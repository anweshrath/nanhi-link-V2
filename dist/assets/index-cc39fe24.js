import{r as f,a as qn,b as hc,R as ja,d as mc,c as me}from"./vendor-f8118e5f.js";import{R as Dr,L as gc,C as Fs,X as qs,Y as Hs,T as Ir,a as fc,A as pc,b as xc,c as oi,P as yc,d as bc,e as vc,B as wc,f as kc}from"./charts-95aa268d.js";import{u as jc}from"./forms-3a082a13.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(i){if(i.ep)return;i.ep=!0;const n=r(i);fetch(i.href,n)}})();var Hn={exports:{}},ts={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nc=f,_c=Symbol.for("react.element"),Sc=Symbol.for("react.fragment"),Cc=Object.prototype.hasOwnProperty,Tc=Nc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pc={key:!0,ref:!0,__self:!0,__source:!0};function zn(t,e,r){var a,i={},n=null,o=null;r!==void 0&&(n=""+r),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(o=e.ref);for(a in e)Cc.call(e,a)&&!Pc.hasOwnProperty(a)&&(i[a]=e[a]);if(t&&t.defaultProps)for(a in e=t.defaultProps,e)i[a]===void 0&&(i[a]=e[a]);return{$$typeof:_c,type:t,key:n,ref:o,props:i,_owner:Tc.current}}ts.Fragment=Sc;ts.jsx=zn;ts.jsxs=zn;Hn.exports=ts;var s=Hn.exports,zs={},li=qn;zs.createRoot=li.createRoot,zs.hydrateRoot=li.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ar(){return ar=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ar.apply(this,arguments)}var Ve;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ve||(Ve={}));const ci="popstate";function Ac(t){t===void 0&&(t={});function e(a,i){let{pathname:n,search:o,hash:l}=a.location;return Ws("",{pathname:n,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){return typeof i=="string"?i:Fr(i)}return Lc(e,r,null,t)}function G(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ec(){return Math.random().toString(36).substr(2,8)}function di(t,e){return{usr:t.state,key:t.key,idx:e}}function Ws(t,e,r,a){return r===void 0&&(r=null),ar({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?It(e):e,{state:r,key:e&&e.key||a||Ec()})}function Fr(t){let{pathname:e="/",search:r="",hash:a=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function It(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let a=t.indexOf("?");a>=0&&(e.search=t.substr(a),t=t.substr(0,a)),t&&(e.pathname=t)}return e}function Lc(t,e,r,a){a===void 0&&(a={});let{window:i=document.defaultView,v5Compat:n=!1}=a,o=i.history,l=Ve.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(ar({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=Ve.Pop;let v=u(),N=v==null?null:v-d;d=v,c&&c({action:l,location:b.location,delta:N})}function m(v,N){l=Ve.Push;let y=Ws(b.location,v,N);r&&r(y,v),d=u()+1;let p=di(y,d),j=b.createHref(y);try{o.pushState(p,"",j)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(j)}n&&c&&c({action:l,location:b.location,delta:1})}function g(v,N){l=Ve.Replace;let y=Ws(b.location,v,N);r&&r(y,v),d=u();let p=di(y,d),j=b.createHref(y);o.replaceState(p,"",j),n&&c&&c({action:l,location:b.location,delta:0})}function x(v){let N=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof v=="string"?v:Fr(v);return y=y.replace(/ $/,"%20"),G(N,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,N)}let b={get action(){return l},get location(){return t(i,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(ci,h),c=v,()=>{i.removeEventListener(ci,h),c=null}},createHref(v){return e(i,v)},createURL:x,encodeLocation(v){let N=x(v);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:m,replace:g,go(v){return o.go(v)}};return b}var ui;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ui||(ui={}));function Rc(t,e,r){return r===void 0&&(r="/"),Dc(t,e,r,!1)}function Dc(t,e,r,a){let i=typeof e=="string"?It(e):e,n=Na(i.pathname||"/",r);if(n==null)return null;let o=Gn(t);Ic(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=Wc(n);l=Hc(o[c],d,a)}return l}function Gn(t,e,r,a){e===void 0&&(e=[]),r===void 0&&(r=[]),a===void 0&&(a="");let i=(n,o,l)=>{let c={relativePath:l===void 0?n.path||"":l,caseSensitive:n.caseSensitive===!0,childrenIndex:o,route:n};c.relativePath.startsWith("/")&&(G(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=qe([a,c.relativePath]),u=r.concat(c);n.children&&n.children.length>0&&(G(n.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Gn(n.children,e,u,d)),!(n.path==null&&!n.index)&&e.push({path:d,score:Fc(d,n.index),routesMeta:u})};return t.forEach((n,o)=>{var l;if(n.path===""||!((l=n.path)!=null&&l.includes("?")))i(n,o);else for(let c of Kn(n.path))i(n,o,c)}),e}function Kn(t){let e=t.split("/");if(e.length===0)return[];let[r,...a]=e,i=r.endsWith("?"),n=r.replace(/\?$/,"");if(a.length===0)return i?[n,""]:[n];let o=Kn(a.join("/")),l=[];return l.push(...o.map(c=>c===""?n:[n,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Ic(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:qc(e.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const Oc=/^:[\w-]+$/,Mc=3,$c=2,Uc=1,Bc=10,Vc=-2,hi=t=>t==="*";function Fc(t,e){let r=t.split("/"),a=r.length;return r.some(hi)&&(a+=Vc),e&&(a+=$c),r.filter(i=>!hi(i)).reduce((i,n)=>i+(Oc.test(n)?Mc:n===""?Uc:Bc),a)}function qc(t,e){return t.length===e.length&&t.slice(0,-1).every((a,i)=>a===e[i])?t[t.length-1]-e[e.length-1]:0}function Hc(t,e,r){r===void 0&&(r=!1);let{routesMeta:a}=t,i={},n="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],d=l===a.length-1,u=n==="/"?e:e.slice(n.length)||"/",h=mi({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h&&d&&r&&!a[a.length-1].route.index&&(h=mi({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:qe([n,h.pathname]),pathnameBase:Xc(qe([n,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(n=qe([n,h.pathnameBase]))}return o}function mi(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=zc(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let n=i[0],o=n.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:a.reduce((d,u,h)=>{let{paramName:m,isOptional:g}=u;if(m==="*"){let b=l[h]||"";o=n.slice(0,n.length-b.length).replace(/(.)\/+$/,"$1")}const x=l[h];return g&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:n,pathnameBase:o,pattern:t}}function zc(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Wn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),a]}function Wc(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wn(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Na(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}function Gc(t,e){e===void 0&&(e="/");let{pathname:r,search:a="",hash:i=""}=typeof t=="string"?It(t):t;return{pathname:r?r.startsWith("/")?r:Kc(r,e):e,search:Yc(a),hash:Zc(i)}}function Kc(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function ks(t,e,r,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Jc(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function _a(t,e){let r=Jc(t);return e?r.map((a,i)=>i===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function Sa(t,e,r,a){a===void 0&&(a=!1);let i;typeof t=="string"?i=It(t):(i=ar({},t),G(!i.pathname||!i.pathname.includes("?"),ks("?","pathname","search",i)),G(!i.pathname||!i.pathname.includes("#"),ks("#","pathname","hash",i)),G(!i.search||!i.search.includes("#"),ks("#","search","hash",i)));let n=t===""||i.pathname==="",o=n?"/":i.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!a&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}l=h>=0?e[h]:"/"}let c=Gc(i,l),d=o&&o!=="/"&&o.endsWith("/"),u=(n||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const qe=t=>t.join("/").replace(/\/\/+/g,"/"),Xc=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Yc=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Zc=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Qc(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Jn=["post","put","patch","delete"];new Set(Jn);const ed=["get",...Jn];new Set(ed);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ir(){return ir=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ir.apply(this,arguments)}const Ca=f.createContext(null),td=f.createContext(null),Xe=f.createContext(null),rs=f.createContext(null),Ye=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Xn=f.createContext(null);function rd(t,e){let{relative:r}=e===void 0?{}:e;Ot()||G(!1);let{basename:a,navigator:i}=f.useContext(Xe),{hash:n,pathname:o,search:l}=Zn(t,{relative:r}),c=o;return a!=="/"&&(c=o==="/"?a:qe([a,o])),i.createHref({pathname:c,search:l,hash:n})}function Ot(){return f.useContext(rs)!=null}function Mt(){return Ot()||G(!1),f.useContext(rs).location}function Yn(t){f.useContext(Xe).static||f.useLayoutEffect(t)}function ss(){let{isDataRoute:t}=f.useContext(Ye);return t?fd():sd()}function sd(){Ot()||G(!1);let t=f.useContext(Ca),{basename:e,future:r,navigator:a}=f.useContext(Xe),{matches:i}=f.useContext(Ye),{pathname:n}=Mt(),o=JSON.stringify(_a(i,r.v7_relativeSplatPath)),l=f.useRef(!1);return Yn(()=>{l.current=!0}),f.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){a.go(d);return}let h=Sa(d,JSON.parse(o),n,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:qe([e,h.pathname])),(u.replace?a.replace:a.push)(h,u.state,u)},[e,a,o,n,t])}function Zn(t,e){let{relative:r}=e===void 0?{}:e,{future:a}=f.useContext(Xe),{matches:i}=f.useContext(Ye),{pathname:n}=Mt(),o=JSON.stringify(_a(i,a.v7_relativeSplatPath));return f.useMemo(()=>Sa(t,JSON.parse(o),n,r==="path"),[t,o,n,r])}function ad(t,e){return id(t,e)}function id(t,e,r,a){Ot()||G(!1);let{navigator:i}=f.useContext(Xe),{matches:n}=f.useContext(Ye),o=n[n.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Mt(),u;if(e){var h;let v=typeof e=="string"?It(e):e;c==="/"||(h=v.pathname)!=null&&h.startsWith(c)||G(!1),u=v}else u=d;let m=u.pathname||"/",g=m;if(c!=="/"){let v=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=Rc(t,{pathname:g}),b=dd(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:qe([c,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:qe([c,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),n,r,a);return e&&b?f.createElement(rs.Provider,{value:{location:ir({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ve.Pop}},b):b}function nd(){let t=gd(),e=Qc(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},n=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),r?f.createElement("pre",{style:i},r):null,n)}const od=f.createElement(nd,null);class ld extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?f.createElement(Ye.Provider,{value:this.props.routeContext},f.createElement(Xn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cd(t){let{routeContext:e,match:r,children:a}=t,i=f.useContext(Ca);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),f.createElement(Ye.Provider,{value:e},a)}function dd(t,e,r,a){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),a===void 0&&(a=null),t==null){var n;if(!r)return null;if(r.errors)t=r.matches;else if((n=a)!=null&&n.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(i=r)==null?void 0:i.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||G(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:m,errors:g}=r,x=h.route.loader&&m[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||x){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,m)=>{let g,x=!1,b=null,v=null;r&&(g=l&&h.route.id?l[h.route.id]:void 0,b=h.route.errorElement||od,c&&(d<0&&m===0?(pd("route-fallback",!1),x=!0,v=null):d===m&&(x=!0,v=h.route.hydrateFallbackElement||null)));let N=e.concat(o.slice(0,m+1)),y=()=>{let p;return g?p=b:x?p=v:h.route.Component?p=f.createElement(h.route.Component,null):h.route.element?p=h.route.element:p=u,f.createElement(cd,{match:h,routeContext:{outlet:u,matches:N,isDataRoute:r!=null},children:p})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?f.createElement(ld,{location:r.location,revalidation:r.revalidation,component:b,error:g,children:y(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):y()},null)}var Qn=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Qn||{}),qr=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(qr||{});function ud(t){let e=f.useContext(Ca);return e||G(!1),e}function hd(t){let e=f.useContext(td);return e||G(!1),e}function md(t){let e=f.useContext(Ye);return e||G(!1),e}function eo(t){let e=md(),r=e.matches[e.matches.length-1];return r.route.id||G(!1),r.route.id}function gd(){var t;let e=f.useContext(Xn),r=hd(qr.UseRouteError),a=eo(qr.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[a]}function fd(){let{router:t}=ud(Qn.UseNavigateStable),e=eo(qr.UseNavigateStable),r=f.useRef(!1);return Yn(()=>{r.current=!0}),f.useCallback(function(i,n){n===void 0&&(n={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ir({fromRouteId:e},n)))},[t,e])}const gi={};function pd(t,e,r){!e&&!gi[t]&&(gi[t]=!0)}function xd(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function to(t){let{to:e,replace:r,state:a,relative:i}=t;Ot()||G(!1);let{future:n,static:o}=f.useContext(Xe),{matches:l}=f.useContext(Ye),{pathname:c}=Mt(),d=ss(),u=Sa(e,_a(l,n.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(u);return f.useEffect(()=>d(JSON.parse(h),{replace:r,state:a,relative:i}),[d,h,i,r,a]),null}function ee(t){G(!1)}function yd(t){let{basename:e="/",children:r=null,location:a,navigationType:i=Ve.Pop,navigator:n,static:o=!1,future:l}=t;Ot()&&G(!1);let c=e.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:c,navigator:n,static:o,future:ir({v7_relativeSplatPath:!1},l)}),[c,l,n,o]);typeof a=="string"&&(a=It(a));let{pathname:u="/",search:h="",hash:m="",state:g=null,key:x="default"}=a,b=f.useMemo(()=>{let v=Na(u,c);return v==null?null:{location:{pathname:v,search:h,hash:m,state:g,key:x},navigationType:i}},[c,u,h,m,g,x,i]);return b==null?null:f.createElement(Xe.Provider,{value:d},f.createElement(rs.Provider,{children:r,value:b}))}function bd(t){let{children:e,location:r}=t;return ad(Gs(e),r)}new Promise(()=>{});function Gs(t,e){e===void 0&&(e=[]);let r=[];return f.Children.forEach(t,(a,i)=>{if(!f.isValidElement(a))return;let n=[...e,i];if(a.type===f.Fragment){r.push.apply(r,Gs(a.props.children,n));return}a.type!==ee&&G(!1),!a.props.index||!a.props.children||G(!1);let o={id:a.props.id||n.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Gs(a.props.children,n)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ks(){return Ks=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Ks.apply(this,arguments)}function vd(t,e){if(t==null)return{};var r={},a=Object.keys(t),i,n;for(n=0;n<a.length;n++)i=a[n],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function wd(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function kd(t,e){return t.button===0&&(!e||e==="_self")&&!wd(t)}const jd=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Nd="6";try{window.__reactRouterVersion=Nd}catch{}const _d="startTransition",fi=hc[_d];function Sd(t){let{basename:e,children:r,future:a,window:i}=t,n=f.useRef();n.current==null&&(n.current=Ac({window:i,v5Compat:!0}));let o=n.current,[l,c]=f.useState({action:o.action,location:o.location}),{v7_startTransition:d}=a||{},u=f.useCallback(h=>{d&&fi?fi(()=>c(h)):c(h)},[c,d]);return f.useLayoutEffect(()=>o.listen(u),[o,u]),f.useEffect(()=>xd(a),[a]),f.createElement(yd,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:a})}const Cd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Td=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ta=f.forwardRef(function(e,r){let{onClick:a,relative:i,reloadDocument:n,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=e,m=vd(e,jd),{basename:g}=f.useContext(Xe),x,b=!1;if(typeof d=="string"&&Td.test(d)&&(x=d,Cd))try{let p=new URL(window.location.href),j=d.startsWith("//")?new URL(p.protocol+d):new URL(d),w=Na(j.pathname,g);j.origin===p.origin&&w!=null?d=w+j.search+j.hash:b=!0}catch{}let v=rd(d,{relative:i}),N=Pd(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:i,viewTransition:h});function y(p){a&&a(p),p.defaultPrevented||N(p)}return f.createElement("a",Ks({},m,{href:x||v,onClick:b||n?a:y,ref:r,target:c}))});var pi;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(pi||(pi={}));var xi;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(xi||(xi={}));function Pd(t,e){let{target:r,replace:a,state:i,preventScrollReset:n,relative:o,viewTransition:l}=e===void 0?{}:e,c=ss(),d=Mt(),u=Zn(t,{relative:o});return f.useCallback(h=>{if(kd(h,r)){h.preventDefault();let m=a!==void 0?a:Fr(d)===Fr(u);c(t,{replace:m,state:i,preventScrollReset:n,relative:o,viewTransition:l})}},[d,c,u,a,i,r,t,n,o,l])}let Ad={data:""},Ed=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Ad,Ld=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Rd=/\/\*[^]*?\*\/|  +/g,yi=/\n+/g,Ue=(t,e)=>{let r="",a="",i="";for(let n in t){let o=t[n];n[0]=="@"?n[1]=="i"?r=n+" "+o+";":a+=n[1]=="f"?Ue(o,n):n+"{"+Ue(o,n[1]=="k"?"":e)+"}":typeof o=="object"?a+=Ue(o,e?e.replace(/([^,])+/g,l=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):n):o!=null&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Ue.p?Ue.p(n,o):n+":"+o+";")}return r+(e&&i?e+"{"+i+"}":i)+a},_e={},ro=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+ro(t[r]);return e}return t},Dd=(t,e,r,a,i)=>{let n=ro(t),o=_e[n]||(_e[n]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(n));if(!_e[o]){let c=n!==t?t:(d=>{let u,h,m=[{}];for(;u=Ld.exec(d.replace(Rd,""));)u[4]?m.shift():u[3]?(h=u[3].replace(yi," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][u[1]]=u[2].replace(yi," ").trim();return m[0]})(t);_e[o]=Ue(i?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&_e.g?_e.g:null;return r&&(_e.g=_e[o]),((c,d,u,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(_e[o],e,a,l),o},Id=(t,e,r)=>t.reduce((a,i,n)=>{let o=e[n];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Ue(l,""):l===!1?"":l}return a+i+(o??"")},"");function as(t){let e=this||{},r=t.call?t(e.p):t;return Dd(r.unshift?r.raw?Id(r,[].slice.call(arguments,1),e.p):r.reduce((a,i)=>Object.assign(a,i&&i.call?i(e.p):i),{}):r,Ed(e.target),e.g,e.o,e.k)}let so,Js,Xs;as.bind({g:1});let Ee=as.bind({k:1});function Od(t,e,r,a){Ue.p=e,so=t,Js=r,Xs=a}function Ze(t,e){let r=this||{};return function(){let a=arguments;function i(n,o){let l=Object.assign({},n),c=l.className||i.className;r.p=Object.assign({theme:Js&&Js()},l),r.o=/ *go\d+/.test(c),l.className=as.apply(r,a)+(c?" "+c:""),e&&(l.ref=o);let d=t;return t[0]&&(d=l.as||t,delete l.as),Xs&&d[0]&&Xs(l),so(d,l)}return e?e(i):i}}var Md=t=>typeof t=="function",Hr=(t,e)=>Md(t)?t(e):t,$d=(()=>{let t=0;return()=>(++t).toString()})(),ao=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Ud=20,io=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,Ud)};case 1:return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case 2:let{toast:r}=e;return io(t,{type:t.toasts.find(n=>n.id===r.id)?1:0,toast:r});case 3:let{toastId:a}=e;return{...t,toasts:t.toasts.map(n=>n.id===a||a===void 0?{...n,dismissed:!0,visible:!1}:n)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(n=>({...n,pauseDuration:n.pauseDuration+i}))}}},Or=[],dt={toasts:[],pausedAt:void 0},pt=t=>{dt=io(dt,t),Or.forEach(e=>{e(dt)})},Bd={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Vd=(t={})=>{let[e,r]=f.useState(dt),a=f.useRef(dt);f.useEffect(()=>(a.current!==dt&&r(dt),Or.push(r),()=>{let n=Or.indexOf(r);n>-1&&Or.splice(n,1)}),[]);let i=e.toasts.map(n=>{var o,l,c;return{...t,...t[n.type],...n,removeDelay:n.removeDelay||((o=t[n.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:n.duration||((l=t[n.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||Bd[n.type],style:{...t.style,...(c=t[n.type])==null?void 0:c.style,...n.style}}});return{...e,toasts:i}},Fd=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||$d()}),gr=t=>(e,r)=>{let a=Fd(e,t,r);return pt({type:2,toast:a}),a.id},W=(t,e)=>gr("blank")(t,e);W.error=gr("error");W.success=gr("success");W.loading=gr("loading");W.custom=gr("custom");W.dismiss=t=>{pt({type:3,toastId:t})};W.remove=t=>pt({type:4,toastId:t});W.promise=(t,e,r)=>{let a=W.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let n=e.success?Hr(e.success,i):void 0;return n?W.success(n,{id:a,...r,...r==null?void 0:r.success}):W.dismiss(a),i}).catch(i=>{let n=e.error?Hr(e.error,i):void 0;n?W.error(n,{id:a,...r,...r==null?void 0:r.error}):W.dismiss(a)}),t};var qd=(t,e)=>{pt({type:1,toast:{id:t,height:e}})},Hd=()=>{pt({type:5,time:Date.now()})},Kt=new Map,zd=1e3,Wd=(t,e=zd)=>{if(Kt.has(t))return;let r=setTimeout(()=>{Kt.delete(t),pt({type:4,toastId:t})},e);Kt.set(t,r)},Gd=t=>{let{toasts:e,pausedAt:r}=Vd(t);f.useEffect(()=>{if(r)return;let n=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(n-l.createdAt);if(c<0){l.visible&&W.dismiss(l.id);return}return setTimeout(()=>W.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,r]);let a=f.useCallback(()=>{r&&pt({type:6,time:Date.now()})},[r]),i=f.useCallback((n,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:d}=o||{},u=e.filter(g=>(g.position||d)===(n.position||d)&&g.height),h=u.findIndex(g=>g.id===n.id),m=u.filter((g,x)=>x<h&&g.visible).length;return u.filter(g=>g.visible).slice(...l?[m+1]:[0,m]).reduce((g,x)=>g+(x.height||0)+c,0)},[e]);return f.useEffect(()=>{e.forEach(n=>{if(n.dismissed)Wd(n.id,n.removeDelay);else{let o=Kt.get(n.id);o&&(clearTimeout(o),Kt.delete(n.id))}})},[e]),{toasts:e,handlers:{updateHeight:qd,startPause:Hd,endPause:a,calculateOffset:i}}},Kd=Ee`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Jd=Ee`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Xd=Ee`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Yd=Ze("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Kd} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Jd} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Xd} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Zd=Ee`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Qd=Ze("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Zd} 1s linear infinite;
`,eu=Ee`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,tu=Ee`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ru=Ze("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${eu} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${tu} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,su=Ze("div")`
  position: absolute;
`,au=Ze("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,iu=Ee`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,nu=Ze("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${iu} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ou=({toast:t})=>{let{icon:e,type:r,iconTheme:a}=t;return e!==void 0?typeof e=="string"?f.createElement(nu,null,e):e:r==="blank"?null:f.createElement(au,null,f.createElement(Qd,{...a}),r!=="loading"&&f.createElement(su,null,r==="error"?f.createElement(Yd,{...a}):f.createElement(ru,{...a})))},lu=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,cu=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,du="0%{opacity:0;} 100%{opacity:1;}",uu="0%{opacity:1;} 100%{opacity:0;}",hu=Ze("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,mu=Ze("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,gu=(t,e)=>{let r=t.includes("top")?1:-1,[a,i]=ao()?[du,uu]:[lu(r),cu(r)];return{animation:e?`${Ee(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ee(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},fu=f.memo(({toast:t,position:e,style:r,children:a})=>{let i=t.height?gu(t.position||e||"top-center",t.visible):{opacity:0},n=f.createElement(ou,{toast:t}),o=f.createElement(mu,{...t.ariaProps},Hr(t.message,t));return f.createElement(hu,{className:t.className,style:{...i,...r,...t.style}},typeof a=="function"?a({icon:n,message:o}):f.createElement(f.Fragment,null,n,o))});Od(f.createElement);var pu=({id:t,className:e,style:r,onHeightUpdate:a,children:i})=>{let n=f.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;a(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return f.createElement("div",{ref:n,className:e,style:r},i)},xu=(t,e)=>{let r=t.includes("top"),a=r?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:ao()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...a,...i}},yu=as`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Nr=16,no=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:a,children:i,containerStyle:n,containerClassName:o})=>{let{toasts:l,handlers:c}=Gd(r);return f.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Nr,left:Nr,right:Nr,bottom:Nr,pointerEvents:"none",...n},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let u=d.position||e,h=c.calculateOffset(d,{reverseOrder:t,gutter:a,defaultPosition:e}),m=xu(u,h);return f.createElement(pu,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?yu:"",style:m},d.type==="custom"?Hr(d.message,d):i?i(d):f.createElement(fu,{toast:d,position:u}))}))},O=W;const oo=f.createContext(),le=()=>{const t=f.useContext(oo);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},lo=({children:t})=>{const[e,r]=f.useState(null),[a,i]=f.useState(!0);f.useEffect(()=>{const d=localStorage.getItem("user");d&&r(JSON.parse(d)),i(!1)},[]);const c={user:e,login:async(d,u)=>{try{const h={id:"1",email:d,name:d.split("@")[0],created_at:new Date().toISOString()};return r(h),localStorage.setItem("user",JSON.stringify(h)),{success:!0}}catch(h){return{success:!1,error:h.message}}},register:async(d,u,h)=>{try{const m={id:"1",email:d,name:h||d.split("@")[0],created_at:new Date().toISOString()};return r(m),localStorage.setItem("user",JSON.stringify(m)),{success:!0}}catch(m){return{success:!1,error:m.message}}},logout:()=>{r(null),localStorage.removeItem("user")},loading:a};return s.jsx(oo.Provider,{value:c,children:t})},co=f.createContext(),uo=()=>{const t=f.useContext(co);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},bu=({children:t})=>{const[e,r]=f.useState("light");f.useEffect(()=>{const n=localStorage.getItem("theme"),o=window.matchMedia("(prefers-color-scheme: dark)").matches;n?r(n):o&&r("dark")},[]),f.useEffect(()=>{e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const i={theme:e,toggleTheme:()=>{r(n=>n==="light"?"dark":"light")}};return s.jsx(co.Provider,{value:i,children:t})},ce=({children:t})=>{const{user:e,loading:r}=le();return r?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):e?t:s.jsx(to,{to:"/login",replace:!0})},ho=f.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),is=f.createContext({}),ns=f.createContext(null),os=typeof document<"u",Pa=os?f.useLayoutEffect:f.useEffect,mo=f.createContext({strict:!1}),Aa=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),vu="framerAppearId",go="data-"+Aa(vu);function wu(t,e,r,a){const{visualElement:i}=f.useContext(is),n=f.useContext(mo),o=f.useContext(ns),l=f.useContext(ho).reducedMotion,c=f.useRef();a=a||n.renderer,!c.current&&a&&(c.current=a(t,{visualState:e,parent:i,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=c.current;f.useInsertionEffect(()=>{d&&d.update(r,o)});const u=f.useRef(!!(r[go]&&!window.HandoffComplete));return Pa(()=>{d&&(d.render(),u.current&&d.animationState&&d.animationState.animateChanges())}),f.useEffect(()=>{d&&(d.updateFeatures(),!u.current&&d.animationState&&d.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),d}function St(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ku(t,e,r){return f.useCallback(a=>{a&&t.mount&&t.mount(a),e&&(a?e.mount(a):e.unmount()),r&&(typeof r=="function"?r(a):St(r)&&(r.current=a))},[e])}function nr(t){return typeof t=="string"||Array.isArray(t)}function ls(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Ea=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],La=["initial",...Ea];function cs(t){return ls(t.animate)||La.some(e=>nr(t[e]))}function fo(t){return!!(cs(t)||t.variants)}function ju(t,e){if(cs(t)){const{initial:r,animate:a}=t;return{initial:r===!1||nr(r)?r:void 0,animate:nr(a)?a:void 0}}return t.inherit!==!1?e:{}}function Nu(t){const{initial:e,animate:r}=ju(t,f.useContext(is));return f.useMemo(()=>({initial:e,animate:r}),[bi(e),bi(r)])}function bi(t){return Array.isArray(t)?t.join(" "):t}const vi={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},or={};for(const t in vi)or[t]={isEnabled:e=>vi[t].some(r=>!!e[r])};function _u(t){for(const e in t)or[e]={...or[e],...t[e]}}const Ra=f.createContext({}),po=f.createContext({}),Su=Symbol.for("motionComponentSymbol");function Cu({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:a,Component:i}){t&&_u(t);function n(l,c){let d;const u={...f.useContext(ho),...l,layoutId:Tu(l)},{isStatic:h}=u,m=Nu(l),g=a(l,h);if(!h&&os){m.visualElement=wu(i,g,u,e);const x=f.useContext(po),b=f.useContext(mo).strict;m.visualElement&&(d=m.visualElement.loadFeatures(u,b,t,x))}return f.createElement(is.Provider,{value:m},d&&m.visualElement?f.createElement(d,{visualElement:m.visualElement,...u}):null,r(i,l,ku(g,m.visualElement,c),g,h,m.visualElement))}const o=f.forwardRef(n);return o[Su]=i,o}function Tu({layoutId:t}){const e=f.useContext(Ra).id;return e&&t!==void 0?e+"-"+t:t}function Pu(t){function e(a,i={}){return Cu(t(a,i))}if(typeof Proxy>"u")return e;const r=new Map;return new Proxy(e,{get:(a,i)=>(r.has(i)||r.set(i,e(i)),r.get(i))})}const Au=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Da(t){return typeof t!="string"||t.includes("-")?!1:!!(Au.indexOf(t)>-1||/[A-Z]/.test(t))}const zr={};function Eu(t){Object.assign(zr,t)}const fr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xt=new Set(fr);function xo(t,{layout:e,layoutId:r}){return xt.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!zr[t]||t==="opacity")}const ne=t=>!!(t&&t.getVelocity),Lu={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ru=fr.length;function Du(t,{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},a,i){let n="";for(let o=0;o<Ru;o++){const l=fr[o];if(t[l]!==void 0){const c=Lu[l]||l;n+=`${c}(${t[l]}) `}}return e&&!t.z&&(n+="translateZ(0)"),n=n.trim(),i?n=i(t,a?"":n):r&&a&&(n="none"),n}const yo=t=>e=>typeof e=="string"&&e.startsWith(t),bo=yo("--"),Ys=yo("var(--"),Iu=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Ou=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ge=(t,e,r)=>Math.min(Math.max(r,t),e),yt={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Jt={...yt,transform:t=>Ge(0,1,t)},_r={...yt,default:1},Xt=t=>Math.round(t*1e5)/1e5,ds=/(-)?([\d]*\.?[\d])+/g,vo=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Mu=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function pr(t){return typeof t=="string"}const xr=t=>({test:e=>pr(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ie=xr("deg"),we=xr("%"),L=xr("px"),$u=xr("vh"),Uu=xr("vw"),wi={...we,parse:t=>we.parse(t)/100,transform:t=>we.transform(t*100)},ki={...yt,transform:Math.round},wo={borderWidth:L,borderTopWidth:L,borderRightWidth:L,borderBottomWidth:L,borderLeftWidth:L,borderRadius:L,radius:L,borderTopLeftRadius:L,borderTopRightRadius:L,borderBottomRightRadius:L,borderBottomLeftRadius:L,width:L,maxWidth:L,height:L,maxHeight:L,size:L,top:L,right:L,bottom:L,left:L,padding:L,paddingTop:L,paddingRight:L,paddingBottom:L,paddingLeft:L,margin:L,marginTop:L,marginRight:L,marginBottom:L,marginLeft:L,rotate:Ie,rotateX:Ie,rotateY:Ie,rotateZ:Ie,scale:_r,scaleX:_r,scaleY:_r,scaleZ:_r,skew:Ie,skewX:Ie,skewY:Ie,distance:L,translateX:L,translateY:L,translateZ:L,x:L,y:L,z:L,perspective:L,transformPerspective:L,opacity:Jt,originX:wi,originY:wi,originZ:L,zIndex:ki,fillOpacity:Jt,strokeOpacity:Jt,numOctaves:ki};function Ia(t,e,r,a){const{style:i,vars:n,transform:o,transformOrigin:l}=t;let c=!1,d=!1,u=!0;for(const h in e){const m=e[h];if(bo(h)){n[h]=m;continue}const g=wo[h],x=Ou(m,g);if(xt.has(h)){if(c=!0,o[h]=x,!u)continue;m!==(g.default||0)&&(u=!1)}else h.startsWith("origin")?(d=!0,l[h]=x):i[h]=x}if(e.transform||(c||a?i.transform=Du(t.transform,r,u,a):i.transform&&(i.transform="none")),d){const{originX:h="50%",originY:m="50%",originZ:g=0}=l;i.transformOrigin=`${h} ${m} ${g}`}}const Oa=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ko(t,e,r){for(const a in e)!ne(e[a])&&!xo(a,r)&&(t[a]=e[a])}function Bu({transformTemplate:t},e,r){return f.useMemo(()=>{const a=Oa();return Ia(a,e,{enableHardwareAcceleration:!r},t),Object.assign({},a.vars,a.style)},[e])}function Vu(t,e,r){const a=t.style||{},i={};return ko(i,a,t),Object.assign(i,Bu(t,e,r)),t.transformValues?t.transformValues(i):i}function Fu(t,e,r){const a={},i=Vu(t,e,r);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=i,a}const qu=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wr(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||qu.has(t)}let jo=t=>!Wr(t);function Hu(t){t&&(jo=e=>e.startsWith("on")?!Wr(e):t(e))}try{Hu(require("@emotion/is-prop-valid").default)}catch{}function zu(t,e,r){const a={};for(const i in t)i==="values"&&typeof t.values=="object"||(jo(i)||r===!0&&Wr(i)||!e&&!Wr(i)||t.draggable&&i.startsWith("onDrag"))&&(a[i]=t[i]);return a}function ji(t,e,r){return typeof t=="string"?t:L.transform(e+r*t)}function Wu(t,e,r){const a=ji(e,t.x,t.width),i=ji(r,t.y,t.height);return`${a} ${i}`}const Gu={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ku={offset:"strokeDashoffset",array:"strokeDasharray"};function Ju(t,e,r=1,a=0,i=!0){t.pathLength=1;const n=i?Gu:Ku;t[n.offset]=L.transform(-a);const o=L.transform(e),l=L.transform(r);t[n.array]=`${o} ${l}`}function Ma(t,{attrX:e,attrY:r,attrScale:a,originX:i,originY:n,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},u,h,m){if(Ia(t,d,u,m),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:x,dimensions:b}=t;g.transform&&(b&&(x.transform=g.transform),delete g.transform),b&&(i!==void 0||n!==void 0||x.transform)&&(x.transformOrigin=Wu(b,i!==void 0?i:.5,n!==void 0?n:.5)),e!==void 0&&(g.x=e),r!==void 0&&(g.y=r),a!==void 0&&(g.scale=a),o!==void 0&&Ju(g,o,l,c,!1)}const No=()=>({...Oa(),attrs:{}}),$a=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Xu(t,e,r,a){const i=f.useMemo(()=>{const n=No();return Ma(n,e,{enableHardwareAcceleration:!1},$a(a),t.transformTemplate),{...n.attrs,style:{...n.style}}},[e]);if(t.style){const n={};ko(n,t.style,t),i.style={...n,...i.style}}return i}function Yu(t=!1){return(r,a,i,{latestValues:n},o)=>{const c=(Da(r)?Xu:Fu)(a,n,o,r),u={...zu(a,typeof r=="string",t),...c,ref:i},{children:h}=a,m=f.useMemo(()=>ne(h)?h.get():h,[h]);return f.createElement(r,{...u,children:m})}}function _o(t,{style:e,vars:r},a,i){Object.assign(t.style,e,i&&i.getProjectionStyles(a));for(const n in r)t.style.setProperty(n,r[n])}const So=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Co(t,e,r,a){_o(t,e,void 0,a);for(const i in e.attrs)t.setAttribute(So.has(i)?i:Aa(i),e.attrs[i])}function Ua(t,e){const{style:r}=t,a={};for(const i in r)(ne(r[i])||e.style&&ne(e.style[i])||xo(i,t))&&(a[i]=r[i]);return a}function To(t,e){const r=Ua(t,e);for(const a in t)if(ne(t[a])||ne(e[a])){const i=fr.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=t[a]}return r}function Ba(t,e,r,a={},i={}){return typeof e=="function"&&(e=e(r!==void 0?r:t.custom,a,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(r!==void 0?r:t.custom,a,i)),e}function Po(t){const e=f.useRef(null);return e.current===null&&(e.current=t()),e.current}const Gr=t=>Array.isArray(t),Zu=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Qu=t=>Gr(t)?t[t.length-1]||0:t;function Mr(t){const e=ne(t)?t.get():t;return Zu(e)?e.toValue():e}function eh({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},a,i,n){const o={latestValues:th(a,i,n,t),renderState:e()};return r&&(o.mount=l=>r(a,l,o)),o}const Ao=t=>(e,r)=>{const a=f.useContext(is),i=f.useContext(ns),n=()=>eh(t,e,a,i);return r?n():Po(n)};function th(t,e,r,a){const i={},n=a(t,{});for(const m in n)i[m]=Mr(n[m]);let{initial:o,animate:l}=t;const c=cs(t),d=fo(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?l:o;return h&&typeof h!="boolean"&&!ls(h)&&(Array.isArray(h)?h:[h]).forEach(g=>{const x=Ba(t,g);if(!x)return;const{transitionEnd:b,transition:v,...N}=x;for(const y in N){let p=N[y];if(Array.isArray(p)){const j=u?p.length-1:0;p=p[j]}p!==null&&(i[y]=p)}for(const y in b)i[y]=b[y]}),i}const H=t=>t;class Ni{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function rh(t){let e=new Ni,r=new Ni,a=0,i=!1,n=!1;const o=new WeakSet,l={schedule:(c,d=!1,u=!1)=>{const h=u&&i,m=h?e:r;return d&&o.add(c),m.add(c)&&h&&i&&(a=e.order.length),c},cancel:c=>{r.remove(c),o.delete(c)},process:c=>{if(i){n=!0;return}if(i=!0,[e,r]=[r,e],r.clear(),a=e.order.length,a)for(let d=0;d<a;d++){const u=e.order[d];u(c),o.has(u)&&(l.schedule(u),t())}i=!1,n&&(n=!1,l.process(c))}};return l}const Sr=["prepare","read","update","preRender","render","postRender"],sh=40;function ah(t,e){let r=!1,a=!0;const i={delta:0,timestamp:0,isProcessing:!1},n=Sr.reduce((h,m)=>(h[m]=rh(()=>r=!0),h),{}),o=h=>n[h].process(i),l=()=>{const h=performance.now();r=!1,i.delta=a?1e3/60:Math.max(Math.min(h-i.timestamp,sh),1),i.timestamp=h,i.isProcessing=!0,Sr.forEach(o),i.isProcessing=!1,r&&e&&(a=!1,t(l))},c=()=>{r=!0,a=!0,i.isProcessing||t(l)};return{schedule:Sr.reduce((h,m)=>{const g=n[m];return h[m]=(x,b=!1,v=!1)=>(r||c(),g.schedule(x,b,v)),h},{}),cancel:h=>Sr.forEach(m=>n[m].cancel(h)),state:i,steps:n}}const{schedule:B,cancel:Le,state:re,steps:js}=ah(typeof requestAnimationFrame<"u"?requestAnimationFrame:H,!0),ih={useVisualState:Ao({scrapeMotionValuesFromProps:To,createRenderState:No,onMount:(t,e,{renderState:r,latestValues:a})=>{B.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),B.render(()=>{Ma(r,a,{enableHardwareAcceleration:!1},$a(e.tagName),t.transformTemplate),Co(e,r)})}})},nh={useVisualState:Ao({scrapeMotionValuesFromProps:Ua,createRenderState:Oa})};function oh(t,{forwardMotionProps:e=!1},r,a){return{...Da(t)?ih:nh,preloadedFeatures:r,useRender:Yu(e),createVisualElement:a,Component:t}}function Te(t,e,r,a={passive:!0}){return t.addEventListener(e,r,a),()=>t.removeEventListener(e,r)}const Eo=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function us(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const lh=t=>e=>Eo(e)&&t(e,us(e));function Pe(t,e,r,a){return Te(t,e,lh(r),a)}const ch=(t,e)=>r=>e(t(r)),He=(...t)=>t.reduce(ch);function Lo(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const _i=Lo("dragHorizontal"),Si=Lo("dragVertical");function Ro(t){let e=!1;if(t==="y")e=Si();else if(t==="x")e=_i();else{const r=_i(),a=Si();r&&a?e=()=>{r(),a()}:(r&&r(),a&&a())}return e}function Do(){const t=Ro(!0);return t?(t(),!1):!0}class Qe{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Ci(t,e){const r="pointer"+(e?"enter":"leave"),a="onHover"+(e?"Start":"End"),i=(n,o)=>{if(n.pointerType==="touch"||Do())return;const l=t.getProps();t.animationState&&l.whileHover&&t.animationState.setActive("whileHover",e),l[a]&&B.update(()=>l[a](n,o))};return Pe(t.current,r,i,{passive:!t.getProps()[a]})}class dh extends Qe{mount(){this.unmount=He(Ci(this.node,!0),Ci(this.node,!1))}unmount(){}}class uh extends Qe{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=He(Te(this.node.current,"focus",()=>this.onFocus()),Te(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Io=(t,e)=>e?t===e?!0:Io(t,e.parentElement):!1;function Ns(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,us(r))}class hh extends Qe{constructor(){super(...arguments),this.removeStartListeners=H,this.removeEndListeners=H,this.removeAccessibleListeners=H,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const a=this.node.getProps(),n=Pe(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:u,globalTapTarget:h}=this.node.getProps();B.update(()=>{!h&&!Io(this.node.current,l.target)?u&&u(l,c):d&&d(l,c)})},{passive:!(a.onTap||a.onPointerUp)}),o=Pe(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(a.onTapCancel||a.onPointerCancel)});this.removeEndListeners=He(n,o),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=n=>{if(n.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Ns("up",(c,d)=>{const{onTap:u}=this.node.getProps();u&&B.update(()=>u(c,d))})};this.removeEndListeners(),this.removeEndListeners=Te(this.node.current,"keyup",o),Ns("down",(l,c)=>{this.startPress(l,c)})},r=Te(this.node.current,"keydown",e),a=()=>{this.isPressing&&Ns("cancel",(n,o)=>this.cancelPress(n,o))},i=Te(this.node.current,"blur",a);this.removeAccessibleListeners=He(r,i)}}startPress(e,r){this.isPressing=!0;const{onTapStart:a,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),a&&B.update(()=>a(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Do()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:a}=this.node.getProps();a&&B.update(()=>a(e,r))}mount(){const e=this.node.getProps(),r=Pe(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),a=Te(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=He(r,a)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Zs=new WeakMap,_s=new WeakMap,mh=t=>{const e=Zs.get(t.target);e&&e(t)},gh=t=>{t.forEach(mh)};function fh({root:t,...e}){const r=t||document;_s.has(r)||_s.set(r,{});const a=_s.get(r),i=JSON.stringify(e);return a[i]||(a[i]=new IntersectionObserver(gh,{root:t,...e})),a[i]}function ph(t,e,r){const a=fh(e);return Zs.set(t,r),a.observe(t),()=>{Zs.delete(t),a.unobserve(t)}}const xh={some:0,all:1};class yh extends Qe{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:a,amount:i="some",once:n}=e,o={root:r?r.current:void 0,rootMargin:a,threshold:typeof i=="number"?i:xh[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,n&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=d?u:h;m&&m(c)};return ph(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(bh(e,r))&&this.startObserver()}unmount(){}}function bh({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const vh={inView:{Feature:yh},tap:{Feature:hh},focus:{Feature:uh},hover:{Feature:dh}};function Oo(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let a=0;a<r;a++)if(e[a]!==t[a])return!1;return!0}function wh(t){const e={};return t.values.forEach((r,a)=>e[a]=r.get()),e}function kh(t){const e={};return t.values.forEach((r,a)=>e[a]=r.getVelocity()),e}function hs(t,e,r){const a=t.getProps();return Ba(a,e,r!==void 0?r:a.custom,wh(t),kh(t))}let jh=H,Va=H;const ze=t=>t*1e3,Ae=t=>t/1e3,Nh={current:!1},Mo=t=>Array.isArray(t)&&typeof t[0]=="number";function $o(t){return!!(!t||typeof t=="string"&&Uo[t]||Mo(t)||Array.isArray(t)&&t.every($o))}const Wt=([t,e,r,a])=>`cubic-bezier(${t}, ${e}, ${r}, ${a})`,Uo={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wt([0,.65,.55,1]),circOut:Wt([.55,0,1,.45]),backIn:Wt([.31,.01,.66,-.59]),backOut:Wt([.33,1.53,.69,.99])};function Bo(t){if(t)return Mo(t)?Wt(t):Array.isArray(t)?t.map(Bo):Uo[t]}function _h(t,e,r,{delay:a=0,duration:i,repeat:n=0,repeatType:o="loop",ease:l,times:c}={}){const d={[e]:r};c&&(d.offset=c);const u=Bo(l);return Array.isArray(u)&&(d.easing=u),t.animate(d,{delay:a,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:n+1,direction:o==="reverse"?"alternate":"normal"})}function Sh(t,{repeat:e,repeatType:r="loop"}){const a=e&&r!=="loop"&&e%2===1?0:t.length-1;return t[a]}const Vo=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,Ch=1e-7,Th=12;function Ph(t,e,r,a,i){let n,o,l=0;do o=e+(r-e)/2,n=Vo(o,a,i)-t,n>0?r=o:e=o;while(Math.abs(n)>Ch&&++l<Th);return o}function yr(t,e,r,a){if(t===e&&r===a)return H;const i=n=>Ph(n,0,1,t,r);return n=>n===0||n===1?n:Vo(i(n),e,a)}const Ah=yr(.42,0,1,1),Eh=yr(0,0,.58,1),Fo=yr(.42,0,.58,1),Lh=t=>Array.isArray(t)&&typeof t[0]!="number",qo=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Ho=t=>e=>1-t(1-e),Fa=t=>1-Math.sin(Math.acos(t)),zo=Ho(Fa),Rh=qo(Fa),Wo=yr(.33,1.53,.69,.99),qa=Ho(Wo),Dh=qo(qa),Ih=t=>(t*=2)<1?.5*qa(t):.5*(2-Math.pow(2,-10*(t-1))),Oh={linear:H,easeIn:Ah,easeInOut:Fo,easeOut:Eh,circIn:Fa,circInOut:Rh,circOut:zo,backIn:qa,backInOut:Dh,backOut:Wo,anticipate:Ih},Ti=t=>{if(Array.isArray(t)){Va(t.length===4);const[e,r,a,i]=t;return yr(e,r,a,i)}else if(typeof t=="string")return Oh[t];return t},Ha=(t,e)=>r=>!!(pr(r)&&Mu.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),Go=(t,e,r)=>a=>{if(!pr(a))return a;const[i,n,o,l]=a.match(ds);return{[t]:parseFloat(i),[e]:parseFloat(n),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Mh=t=>Ge(0,255,t),Ss={...yt,transform:t=>Math.round(Mh(t))},ut={test:Ha("rgb","red"),parse:Go("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:a=1})=>"rgba("+Ss.transform(t)+", "+Ss.transform(e)+", "+Ss.transform(r)+", "+Xt(Jt.transform(a))+")"};function $h(t){let e="",r="",a="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),a=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),a=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,a+=a,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:i?parseInt(i,16)/255:1}}const Qs={test:Ha("#"),parse:$h,transform:ut.transform},Ct={test:Ha("hsl","hue"),parse:Go("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:a=1})=>"hsla("+Math.round(t)+", "+we.transform(Xt(e))+", "+we.transform(Xt(r))+", "+Xt(Jt.transform(a))+")"},se={test:t=>ut.test(t)||Qs.test(t)||Ct.test(t),parse:t=>ut.test(t)?ut.parse(t):Ct.test(t)?Ct.parse(t):Qs.parse(t),transform:t=>pr(t)?t:t.hasOwnProperty("red")?ut.transform(t):Ct.transform(t)},F=(t,e,r)=>-r*t+r*e+t;function Cs(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Uh({hue:t,saturation:e,lightness:r,alpha:a}){t/=360,e/=100,r/=100;let i=0,n=0,o=0;if(!e)i=n=o=r;else{const l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;i=Cs(c,l,t+1/3),n=Cs(c,l,t),o=Cs(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(n*255),blue:Math.round(o*255),alpha:a}}const Ts=(t,e,r)=>{const a=t*t;return Math.sqrt(Math.max(0,r*(e*e-a)+a))},Bh=[Qs,ut,Ct],Vh=t=>Bh.find(e=>e.test(t));function Pi(t){const e=Vh(t);let r=e.parse(t);return e===Ct&&(r=Uh(r)),r}const Ko=(t,e)=>{const r=Pi(t),a=Pi(e),i={...r};return n=>(i.red=Ts(r.red,a.red,n),i.green=Ts(r.green,a.green,n),i.blue=Ts(r.blue,a.blue,n),i.alpha=F(r.alpha,a.alpha,n),ut.transform(i))};function Fh(t){var e,r;return isNaN(t)&&pr(t)&&(((e=t.match(ds))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(vo))===null||r===void 0?void 0:r.length)||0)>0}const Jo={regex:Iu,countKey:"Vars",token:"${v}",parse:H},Xo={regex:vo,countKey:"Colors",token:"${c}",parse:se.parse},Yo={regex:ds,countKey:"Numbers",token:"${n}",parse:yt.parse};function Ps(t,{regex:e,countKey:r,token:a,parse:i}){const n=t.tokenised.match(e);n&&(t["num"+r]=n.length,t.tokenised=t.tokenised.replace(e,a),t.values.push(...n.map(i)))}function Kr(t){const e=t.toString(),r={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Ps(r,Jo),Ps(r,Xo),Ps(r,Yo),r}function Zo(t){return Kr(t).values}function Qo(t){const{values:e,numColors:r,numVars:a,tokenised:i}=Kr(t),n=e.length;return o=>{let l=i;for(let c=0;c<n;c++)c<a?l=l.replace(Jo.token,o[c]):c<a+r?l=l.replace(Xo.token,se.transform(o[c])):l=l.replace(Yo.token,Xt(o[c]));return l}}const qh=t=>typeof t=="number"?0:t;function Hh(t){const e=Zo(t);return Qo(t)(e.map(qh))}const Ke={test:Fh,parse:Zo,createTransformer:Qo,getAnimatableNone:Hh},el=(t,e)=>r=>`${r>0?e:t}`;function tl(t,e){return typeof t=="number"?r=>F(t,e,r):se.test(t)?Ko(t,e):t.startsWith("var(")?el(t,e):sl(t,e)}const rl=(t,e)=>{const r=[...t],a=r.length,i=t.map((n,o)=>tl(n,e[o]));return n=>{for(let o=0;o<a;o++)r[o]=i[o](n);return r}},zh=(t,e)=>{const r={...t,...e},a={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(a[i]=tl(t[i],e[i]));return i=>{for(const n in a)r[n]=a[n](i);return r}},sl=(t,e)=>{const r=Ke.createTransformer(e),a=Kr(t),i=Kr(e);return a.numVars===i.numVars&&a.numColors===i.numColors&&a.numNumbers>=i.numNumbers?He(rl(a.values,i.values),r):el(t,e)},lr=(t,e,r)=>{const a=e-t;return a===0?1:(r-t)/a},Ai=(t,e)=>r=>F(t,e,r);function Wh(t){return typeof t=="number"?Ai:typeof t=="string"?se.test(t)?Ko:sl:Array.isArray(t)?rl:typeof t=="object"?zh:Ai}function Gh(t,e,r){const a=[],i=r||Wh(t[0]),n=t.length-1;for(let o=0;o<n;o++){let l=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||H:e;l=He(c,l)}a.push(l)}return a}function al(t,e,{clamp:r=!0,ease:a,mixer:i}={}){const n=t.length;if(Va(n===e.length),n===1)return()=>e[0];t[0]>t[n-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Gh(e,a,i),l=o.length,c=d=>{let u=0;if(l>1)for(;u<t.length-2&&!(d<t[u+1]);u++);const h=lr(t[u],t[u+1],d);return o[u](h)};return r?d=>c(Ge(t[0],t[n-1],d)):c}function Kh(t,e){const r=t[t.length-1];for(let a=1;a<=e;a++){const i=lr(0,e,a);t.push(F(r,1,i))}}function Jh(t){const e=[0];return Kh(e,t.length-1),e}function Xh(t,e){return t.map(r=>r*e)}function Yh(t,e){return t.map(()=>e||Fo).splice(0,t.length-1)}function Jr({duration:t=300,keyframes:e,times:r,ease:a="easeInOut"}){const i=Lh(a)?a.map(Ti):Ti(a),n={done:!1,value:e[0]},o=Xh(r&&r.length===e.length?r:Jh(e),t),l=al(o,e,{ease:Array.isArray(i)?i:Yh(e,i)});return{calculatedDuration:t,next:c=>(n.value=l(c),n.done=c>=t,n)}}function il(t,e){return e?t*(1e3/e):0}const Zh=5;function nl(t,e,r){const a=Math.max(e-Zh,0);return il(r-t(a),e-a)}const As=.001,Qh=.01,Ei=10,e0=.05,t0=1;function r0({duration:t=800,bounce:e=.25,velocity:r=0,mass:a=1}){let i,n;jh(t<=ze(Ei));let o=1-e;o=Ge(e0,t0,o),t=Ge(Qh,Ei,Ae(t)),o<1?(i=d=>{const u=d*o,h=u*t,m=u-r,g=ea(d,o),x=Math.exp(-h);return As-m/g*x},n=d=>{const h=d*o*t,m=h*r+r,g=Math.pow(o,2)*Math.pow(d,2)*t,x=Math.exp(-h),b=ea(Math.pow(d,2),o);return(-i(d)+As>0?-1:1)*((m-g)*x)/b}):(i=d=>{const u=Math.exp(-d*t),h=(d-r)*t+1;return-As+u*h},n=d=>{const u=Math.exp(-d*t),h=(r-d)*(t*t);return u*h});const l=5/t,c=a0(i,n,l);if(t=ze(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const d=Math.pow(c,2)*a;return{stiffness:d,damping:o*2*Math.sqrt(a*d),duration:t}}}const s0=12;function a0(t,e,r){let a=r;for(let i=1;i<s0;i++)a=a-t(a)/e(a);return a}function ea(t,e){return t*Math.sqrt(1-e*e)}const i0=["duration","bounce"],n0=["stiffness","damping","mass"];function Li(t,e){return e.some(r=>t[r]!==void 0)}function o0(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Li(t,n0)&&Li(t,i0)){const r=r0(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function ol({keyframes:t,restDelta:e,restSpeed:r,...a}){const i=t[0],n=t[t.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:m}=o0({...a,velocity:-Ae(a.velocity||0)}),g=h||0,x=c/(2*Math.sqrt(l*d)),b=n-i,v=Ae(Math.sqrt(l/d)),N=Math.abs(b)<5;r||(r=N?.01:2),e||(e=N?.005:.5);let y;if(x<1){const p=ea(v,x);y=j=>{const w=Math.exp(-x*v*j);return n-w*((g+x*v*b)/p*Math.sin(p*j)+b*Math.cos(p*j))}}else if(x===1)y=p=>n-Math.exp(-v*p)*(b+(g+v*b)*p);else{const p=v*Math.sqrt(x*x-1);y=j=>{const w=Math.exp(-x*v*j),C=Math.min(p*j,300);return n-w*((g+x*v*b)*Math.sinh(C)+p*b*Math.cosh(C))/p}}return{calculatedDuration:m&&u||null,next:p=>{const j=y(p);if(m)o.done=p>=u;else{let w=g;p!==0&&(x<1?w=nl(y,p,j):w=0);const C=Math.abs(w)<=r,A=Math.abs(n-j)<=e;o.done=C&&A}return o.value=o.done?n:j,o}}}function Ri({keyframes:t,velocity:e=0,power:r=.8,timeConstant:a=325,bounceDamping:i=10,bounceStiffness:n=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=t[0],m={done:!1,value:h},g=E=>l!==void 0&&E<l||c!==void 0&&E>c,x=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let b=r*e;const v=h+b,N=o===void 0?v:o(v);N!==v&&(b=N-h);const y=E=>-b*Math.exp(-E/a),p=E=>N+y(E),j=E=>{const T=y(E),I=p(E);m.done=Math.abs(T)<=d,m.value=m.done?N:I};let w,C;const A=E=>{g(m.value)&&(w=E,C=ol({keyframes:[m.value,x(m.value)],velocity:nl(p,E,m.value),damping:i,stiffness:n,restDelta:d,restSpeed:u}))};return A(0),{calculatedDuration:null,next:E=>{let T=!1;return!C&&w===void 0&&(T=!0,j(E),A(E)),w!==void 0&&E>w?C.next(E-w):(!T&&j(E),m)}}}const l0=t=>{const e=({timestamp:r})=>t(r);return{start:()=>B.update(e,!0),stop:()=>Le(e),now:()=>re.isProcessing?re.timestamp:performance.now()}},Di=2e4;function Ii(t){let e=0;const r=50;let a=t.next(e);for(;!a.done&&e<Di;)e+=r,a=t.next(e);return e>=Di?1/0:e}const c0={decay:Ri,inertia:Ri,tween:Jr,keyframes:Jr,spring:ol};function Xr({autoplay:t=!0,delay:e=0,driver:r=l0,keyframes:a,type:i="keyframes",repeat:n=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:d,onComplete:u,onUpdate:h,...m}){let g=1,x=!1,b,v;const N=()=>{v=new Promise(k=>{b=k})};N();let y;const p=c0[i]||Jr;let j;p!==Jr&&typeof a[0]!="number"&&(j=al([0,100],a,{clamp:!1}),a=[0,100]);const w=p({...m,keyframes:a});let C;l==="mirror"&&(C=p({...m,keyframes:[...a].reverse(),velocity:-(m.velocity||0)}));let A="idle",E=null,T=null,I=null;w.calculatedDuration===null&&n&&(w.calculatedDuration=Ii(w));const{calculatedDuration:X}=w;let Y=1/0,q=1/0;X!==null&&(Y=X+o,q=Y*(n+1)-o);let V=0;const ke=k=>{if(T===null)return;g>0&&(T=Math.min(T,k)),g<0&&(T=Math.min(k-q/g,T)),E!==null?V=E:V=Math.round(k-T)*g;const _=V-e*(g>=0?1:-1),$=g>=0?_<0:_>q;V=Math.max(_,0),A==="finished"&&E===null&&(V=q);let z=V,tt=w;if(n){const ws=Math.min(V,q)/Y;let jr=Math.floor(ws),rt=ws%1;!rt&&ws>=1&&(rt=1),rt===1&&jr--,jr=Math.min(jr,n+1),!!(jr%2)&&(l==="reverse"?(rt=1-rt,o&&(rt-=o/Y)):l==="mirror"&&(tt=C)),z=Ge(0,1,rt)*Y}const Ne=$?{done:!1,value:a[0]}:tt.next(z);j&&(Ne.value=j(Ne.value));let{done:ni}=Ne;!$&&X!==null&&(ni=g>=0?V>=q:V<=0);const uc=E===null&&(A==="finished"||A==="running"&&ni);return h&&h(Ne.value),uc&&De(),Ne},K=()=>{y&&y.stop(),y=void 0},ge=()=>{A="idle",K(),b(),N(),T=I=null},De=()=>{A="finished",u&&u(),K(),b()},je=()=>{if(x)return;y||(y=r(ke));const k=y.now();c&&c(),E!==null?T=k-E:(!T||A==="finished")&&(T=k),A==="finished"&&N(),I=T,E=null,A="running",y.start()};t&&je();const Ft={then(k,_){return v.then(k,_)},get time(){return Ae(V)},set time(k){k=ze(k),V=k,E!==null||!y||g===0?E=k:T=y.now()-k/g},get duration(){const k=w.calculatedDuration===null?Ii(w):w.calculatedDuration;return Ae(k)},get speed(){return g},set speed(k){k===g||!y||(g=k,Ft.time=Ae(V))},get state(){return A},play:je,pause:()=>{A="paused",E=V},stop:()=>{x=!0,A!=="idle"&&(A="idle",d&&d(),ge())},cancel:()=>{I!==null&&ke(I),ge()},complete:()=>{A="finished"},sample:k=>(T=0,ke(k))};return Ft}function d0(t){let e;return()=>(e===void 0&&(e=t()),e)}const u0=d0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),h0=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Cr=10,m0=2e4,g0=(t,e)=>e.type==="spring"||t==="backgroundColor"||!$o(e.ease);function f0(t,e,{onUpdate:r,onComplete:a,...i}){if(!(u0()&&h0.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,l,c,d=!1;const u=()=>{c=new Promise(p=>{l=p})};u();let{keyframes:h,duration:m=300,ease:g,times:x}=i;if(g0(e,i)){const p=Xr({...i,repeat:0,delay:0});let j={done:!1,value:h[0]};const w=[];let C=0;for(;!j.done&&C<m0;)j=p.sample(C),w.push(j.value),C+=Cr;x=void 0,h=w,m=C-Cr,g="linear"}const b=_h(t.owner.current,e,h,{...i,duration:m,ease:g,times:x}),v=()=>{d=!1,b.cancel()},N=()=>{d=!0,B.update(v),l(),u()};return b.onfinish=()=>{d||(t.set(Sh(h,i)),a&&a(),N())},{then(p,j){return c.then(p,j)},attachTimeline(p){return b.timeline=p,b.onfinish=null,H},get time(){return Ae(b.currentTime||0)},set time(p){b.currentTime=ze(p)},get speed(){return b.playbackRate},set speed(p){b.playbackRate=p},get duration(){return Ae(m)},play:()=>{o||(b.play(),Le(v))},pause:()=>b.pause(),stop:()=>{if(o=!0,b.playState==="idle")return;const{currentTime:p}=b;if(p){const j=Xr({...i,autoplay:!1});t.setWithVelocity(j.sample(p-Cr).value,j.sample(p).value,Cr)}N()},complete:()=>{d||b.finish()},cancel:N}}function p0({keyframes:t,delay:e,onUpdate:r,onComplete:a}){const i=()=>(r&&r(t[t.length-1]),a&&a(),{time:0,speed:1,duration:0,play:H,pause:H,stop:H,then:n=>(n(),Promise.resolve()),cancel:H,complete:H});return e?Xr({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const x0={type:"spring",stiffness:500,damping:25,restSpeed:10},y0=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),b0={type:"keyframes",duration:.8},v0={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},w0=(t,{keyframes:e})=>e.length>2?b0:xt.has(t)?t.startsWith("scale")?y0(e[1]):x0:v0,ta=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ke.test(e)||e==="0")&&!e.startsWith("url(")),k0=new Set(["brightness","contrast","saturate","opacity"]);function j0(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[a]=r.match(ds)||[];if(!a)return t;const i=r.replace(a,"");let n=k0.has(e)?1:0;return a!==r&&(n*=100),e+"("+n+i+")"}const N0=/([a-z-]*)\(.*?\)/g,ra={...Ke,getAnimatableNone:t=>{const e=t.match(N0);return e?e.map(j0).join(" "):t}},_0={...wo,color:se,backgroundColor:se,outlineColor:se,fill:se,stroke:se,borderColor:se,borderTopColor:se,borderRightColor:se,borderBottomColor:se,borderLeftColor:se,filter:ra,WebkitFilter:ra},za=t=>_0[t];function ll(t,e){let r=za(t);return r!==ra&&(r=Ke),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const cl=t=>/^0[^.\s]+$/.test(t);function S0(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||cl(t)}function C0(t,e,r,a){const i=ta(e,r);let n;Array.isArray(r)?n=[...r]:n=[null,r];const o=a.from!==void 0?a.from:t.get();let l;const c=[];for(let d=0;d<n.length;d++)n[d]===null&&(n[d]=d===0?o:n[d-1]),S0(n[d])&&c.push(d),typeof n[d]=="string"&&n[d]!=="none"&&n[d]!=="0"&&(l=n[d]);if(i&&c.length&&l)for(let d=0;d<c.length;d++){const u=c[d];n[u]=ll(e,l)}return n}function T0({when:t,delay:e,delayChildren:r,staggerChildren:a,staggerDirection:i,repeat:n,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}function Wa(t,e){return t[e]||t.default||t}const P0={skipAnimations:!1},Ga=(t,e,r,a={})=>i=>{const n=Wa(a,t)||{},o=n.delay||a.delay||0;let{elapsed:l=0}=a;l=l-ze(o);const c=C0(e,t,r,n),d=c[0],u=c[c.length-1],h=ta(t,d),m=ta(t,u);let g={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...n,delay:-l,onUpdate:x=>{e.set(x),n.onUpdate&&n.onUpdate(x)},onComplete:()=>{i(),n.onComplete&&n.onComplete()}};if(T0(n)||(g={...g,...w0(t,g)}),g.duration&&(g.duration=ze(g.duration)),g.repeatDelay&&(g.repeatDelay=ze(g.repeatDelay)),!h||!m||Nh.current||n.type===!1||P0.skipAnimations)return p0(g);if(!a.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const x=f0(e,t,g);if(x)return x}return Xr(g)};function Yr(t){return!!(ne(t)&&t.add)}const dl=t=>/^\-?\d*\.?\d+$/.test(t);function Ka(t,e){t.indexOf(e)===-1&&t.push(e)}function Ja(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class Xa{constructor(){this.subscriptions=[]}add(e){return Ka(this.subscriptions,e),()=>Ja(this.subscriptions,e)}notify(e,r,a){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,a);else for(let n=0;n<i;n++){const o=this.subscriptions[n];o&&o(e,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const A0=t=>!isNaN(parseFloat(t));class E0{constructor(e,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(a,i=!0)=>{this.prev=this.current,this.current=a;const{delta:n,timestamp:o}=re;this.lastUpdated!==o&&(this.timeDelta=n,this.lastUpdated=o,B.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>B.postRender(this.velocityCheck),this.velocityCheck=({timestamp:a})=>{a!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=A0(this.current),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Xa);const a=this.events[e].add(r);return e==="change"?()=>{a(),B.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,a){this.set(r),this.prev=e,this.timeDelta=a}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?il(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function At(t,e){return new E0(t,e)}const ul=t=>e=>e.test(t),L0={test:t=>t==="auto",parse:t=>t},hl=[yt,L,we,Ie,Uu,$u,L0],qt=t=>hl.find(ul(t)),R0=[...hl,se,Ke],D0=t=>R0.find(ul(t));function I0(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,At(r))}function O0(t,e){const r=hs(t,e);let{transitionEnd:a={},transition:i={},...n}=r?t.makeTargetAnimatable(r,!1):{};n={...n,...a};for(const o in n){const l=Qu(n[o]);I0(t,o,l)}}function M0(t,e,r){var a,i;const n=Object.keys(e).filter(l=>!t.hasValue(l)),o=n.length;if(o)for(let l=0;l<o;l++){const c=n[l],d=e[c];let u=null;Array.isArray(d)&&(u=d[0]),u===null&&(u=(i=(a=r[c])!==null&&a!==void 0?a:t.readValue(c))!==null&&i!==void 0?i:e[c]),u!=null&&(typeof u=="string"&&(dl(u)||cl(u))?u=parseFloat(u):!D0(u)&&Ke.test(d)&&(u=ll(c,d)),t.addValue(c,At(u,{owner:t})),r[c]===void 0&&(r[c]=u),u!==null&&t.setBaseTarget(c,u))}}function $0(t,e){return e?(e[t]||e.default||e).from:void 0}function U0(t,e,r){const a={};for(const i in t){const n=$0(i,e);if(n!==void 0)a[i]=n;else{const o=r.getValue(i);o&&(a[i]=o.get())}}return a}function B0({protectedKeys:t,needsAnimating:e},r){const a=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,a}function V0(t,e){const r=t.get();if(Array.isArray(e)){for(let a=0;a<e.length;a++)if(e[a]!==r)return!0}else return r!==e}function ml(t,e,{delay:r=0,transitionOverride:a,type:i}={}){let{transition:n=t.getDefaultTransition(),transitionEnd:o,...l}=t.makeTargetAnimatable(e);const c=t.getValue("willChange");a&&(n=a);const d=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const m=t.getValue(h),g=l[h];if(!m||g===void 0||u&&B0(u,h))continue;const x={delay:r,elapsed:0,...Wa(n||{},h)};if(window.HandoffAppearAnimations){const N=t.getProps()[go];if(N){const y=window.HandoffAppearAnimations(N,h,m,B);y!==null&&(x.elapsed=y,x.isHandoff=!0)}}let b=!x.isHandoff&&!V0(m,g);if(x.type==="spring"&&(m.getVelocity()||x.velocity)&&(b=!1),m.animation&&(b=!1),b)continue;m.start(Ga(h,m,g,t.shouldReduceMotion&&xt.has(h)?{type:!1}:x));const v=m.animation;Yr(c)&&(c.add(h),v.then(()=>c.remove(h))),d.push(v)}return o&&Promise.all(d).then(()=>{o&&O0(t,o)}),d}function sa(t,e,r={}){const a=hs(t,e,r.custom);let{transition:i=t.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(i=r.transitionOverride);const n=a?()=>Promise.all(ml(t,a,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=i;return F0(t,e,d+c,u,h,r)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,d]=l==="beforeChildren"?[n,o]:[o,n];return c().then(()=>d())}else return Promise.all([n(),o(r.delay)])}function F0(t,e,r=0,a=0,i=1,n){const o=[],l=(t.variantChildren.size-1)*a,c=i===1?(d=0)=>d*a:(d=0)=>l-d*a;return Array.from(t.variantChildren).sort(q0).forEach((d,u)=>{d.notify("AnimationStart",e),o.push(sa(d,e,{...n,delay:r+c(u)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function q0(t,e){return t.sortNodePosition(e)}function H0(t,e,r={}){t.notify("AnimationStart",e);let a;if(Array.isArray(e)){const i=e.map(n=>sa(t,n,r));a=Promise.all(i)}else if(typeof e=="string")a=sa(t,e,r);else{const i=typeof e=="function"?hs(t,e,r.custom):e;a=Promise.all(ml(t,i,r))}return a.then(()=>t.notify("AnimationComplete",e))}const z0=[...Ea].reverse(),W0=Ea.length;function G0(t){return e=>Promise.all(e.map(({animation:r,options:a})=>H0(t,r,a)))}function K0(t){let e=G0(t);const r=X0();let a=!0;const i=(c,d)=>{const u=hs(t,d);if(u){const{transition:h,transitionEnd:m,...g}=u;c={...c,...g,...m}}return c};function n(c){e=c(t)}function o(c,d){const u=t.getProps(),h=t.getVariantContext(!0)||{},m=[],g=new Set;let x={},b=1/0;for(let N=0;N<W0;N++){const y=z0[N],p=r[y],j=u[y]!==void 0?u[y]:h[y],w=nr(j),C=y===d?p.isActive:null;C===!1&&(b=N);let A=j===h[y]&&j!==u[y]&&w;if(A&&a&&t.manuallyAnimateOnMount&&(A=!1),p.protectedKeys={...x},!p.isActive&&C===null||!j&&!p.prevProp||ls(j)||typeof j=="boolean")continue;let T=J0(p.prevProp,j)||y===d&&p.isActive&&!A&&w||N>b&&w,I=!1;const X=Array.isArray(j)?j:[j];let Y=X.reduce(i,{});C===!1&&(Y={});const{prevResolvedValues:q={}}=p,V={...q,...Y},ke=K=>{T=!0,g.has(K)&&(I=!0,g.delete(K)),p.needsAnimating[K]=!0};for(const K in V){const ge=Y[K],De=q[K];if(x.hasOwnProperty(K))continue;let je=!1;Gr(ge)&&Gr(De)?je=!Oo(ge,De):je=ge!==De,je?ge!==void 0?ke(K):g.add(K):ge!==void 0&&g.has(K)?ke(K):p.protectedKeys[K]=!0}p.prevProp=j,p.prevResolvedValues=Y,p.isActive&&(x={...x,...Y}),a&&t.blockInitialAnimation&&(T=!1),T&&(!A||I)&&m.push(...X.map(K=>({animation:K,options:{type:y,...c}})))}if(g.size){const N={};g.forEach(y=>{const p=t.getBaseTarget(y);p!==void 0&&(N[y]=p)}),m.push({animation:N})}let v=!!m.length;return a&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(v=!1),a=!1,v?e(m):Promise.resolve()}function l(c,d,u){var h;if(r[c].isActive===d)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(g=>{var x;return(x=g.animationState)===null||x===void 0?void 0:x.setActive(c,d)}),r[c].isActive=d;const m=o(u,c);for(const g in r)r[g].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:n,getState:()=>r}}function J0(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Oo(e,t):!1}function st(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function X0(){return{animate:st(!0),whileInView:st(),whileHover:st(),whileTap:st(),whileDrag:st(),whileFocus:st(),exit:st()}}class Y0 extends Qe{constructor(e){super(e),e.animationState||(e.animationState=K0(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ls(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let Z0=0;class Q0 extends Qe{constructor(){super(...arguments),this.id=Z0++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r,custom:a}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const n=this.node.animationState.setActive("exit",!e,{custom:a??this.node.getProps().custom});r&&!e&&n.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const em={animation:{Feature:Y0},exit:{Feature:Q0}},Oi=(t,e)=>Math.abs(t-e);function tm(t,e){const r=Oi(t.x,e.x),a=Oi(t.y,e.y);return Math.sqrt(r**2+a**2)}class gl{constructor(e,r,{transformPagePoint:a,contextWindow:i,dragSnapToOrigin:n=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Ls(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=tm(h.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:x}=h,{timestamp:b}=re;this.history.push({...x,timestamp:b});const{onStart:v,onMove:N}=this.handlers;m||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Es(m,this.transformPagePoint),B.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:g,onSessionEnd:x,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Ls(h.type==="pointercancel"?this.lastMoveEventInfo:Es(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,v),x&&x(h,v)},!Eo(e))return;this.dragSnapToOrigin=n,this.handlers=r,this.transformPagePoint=a,this.contextWindow=i||window;const o=us(e),l=Es(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=re;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=r;u&&u(e,Ls(l,this.history)),this.removeListeners=He(Pe(this.contextWindow,"pointermove",this.handlePointerMove),Pe(this.contextWindow,"pointerup",this.handlePointerUp),Pe(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Le(this.updatePoint)}}function Es(t,e){return e?{point:e(t.point)}:t}function Mi(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ls({point:t},e){return{point:t,delta:Mi(t,fl(e)),offset:Mi(t,rm(e)),velocity:sm(e,.1)}}function rm(t){return t[0]}function fl(t){return t[t.length-1]}function sm(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,a=null;const i=fl(t);for(;r>=0&&(a=t[r],!(i.timestamp-a.timestamp>ze(e)));)r--;if(!a)return{x:0,y:0};const n=Ae(i.timestamp-a.timestamp);if(n===0)return{x:0,y:0};const o={x:(i.x-a.x)/n,y:(i.y-a.y)/n};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function oe(t){return t.max-t.min}function aa(t,e=0,r=.01){return Math.abs(t-e)<=r}function $i(t,e,r,a=.5){t.origin=a,t.originPoint=F(e.min,e.max,t.origin),t.scale=oe(r)/oe(e),(aa(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=F(r.min,r.max,t.origin)-t.originPoint,(aa(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Yt(t,e,r,a){$i(t.x,e.x,r.x,a?a.originX:void 0),$i(t.y,e.y,r.y,a?a.originY:void 0)}function Ui(t,e,r){t.min=r.min+e.min,t.max=t.min+oe(e)}function am(t,e,r){Ui(t.x,e.x,r.x),Ui(t.y,e.y,r.y)}function Bi(t,e,r){t.min=e.min-r.min,t.max=t.min+oe(e)}function Zt(t,e,r){Bi(t.x,e.x,r.x),Bi(t.y,e.y,r.y)}function im(t,{min:e,max:r},a){return e!==void 0&&t<e?t=a?F(e,t,a.min):Math.max(t,e):r!==void 0&&t>r&&(t=a?F(r,t,a.max):Math.min(t,r)),t}function Vi(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function nm(t,{top:e,left:r,bottom:a,right:i}){return{x:Vi(t.x,r,i),y:Vi(t.y,e,a)}}function Fi(t,e){let r=e.min-t.min,a=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,a]=[a,r]),{min:r,max:a}}function om(t,e){return{x:Fi(t.x,e.x),y:Fi(t.y,e.y)}}function lm(t,e){let r=.5;const a=oe(t),i=oe(e);return i>a?r=lr(e.min,e.max-a,t.min):a>i&&(r=lr(t.min,t.max-i,e.min)),Ge(0,1,r)}function cm(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const ia=.35;function dm(t=ia){return t===!1?t=0:t===!0&&(t=ia),{x:qi(t,"left","right"),y:qi(t,"top","bottom")}}function qi(t,e,r){return{min:Hi(t,e),max:Hi(t,r)}}function Hi(t,e){return typeof t=="number"?t:t[e]||0}const zi=()=>({translate:0,scale:1,origin:0,originPoint:0}),Tt=()=>({x:zi(),y:zi()}),Wi=()=>({min:0,max:0}),J=()=>({x:Wi(),y:Wi()});function he(t){return[t("x"),t("y")]}function pl({top:t,left:e,right:r,bottom:a}){return{x:{min:e,max:r},y:{min:t,max:a}}}function um({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function hm(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),a=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}function Rs(t){return t===void 0||t===1}function na({scale:t,scaleX:e,scaleY:r}){return!Rs(t)||!Rs(e)||!Rs(r)}function it(t){return na(t)||xl(t)||t.z||t.rotate||t.rotateX||t.rotateY}function xl(t){return Gi(t.x)||Gi(t.y)}function Gi(t){return t&&t!=="0%"}function Zr(t,e,r){const a=t-r,i=e*a;return r+i}function Ki(t,e,r,a,i){return i!==void 0&&(t=Zr(t,i,a)),Zr(t,r,a)+e}function oa(t,e=0,r=1,a,i){t.min=Ki(t.min,e,r,a,i),t.max=Ki(t.max,e,r,a,i)}function yl(t,{x:e,y:r}){oa(t.x,e.translate,e.scale,e.originPoint),oa(t.y,r.translate,r.scale,r.originPoint)}function mm(t,e,r,a=!1){const i=r.length;if(!i)return;e.x=e.y=1;let n,o;for(let l=0;l<i;l++){n=r[l],o=n.projectionDelta;const c=n.instance;c&&c.style&&c.style.display==="contents"||(a&&n.options.layoutScroll&&n.scroll&&n!==n.root&&Pt(t,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,yl(t,o)),a&&it(n.latestValues)&&Pt(t,n.latestValues))}e.x=Ji(e.x),e.y=Ji(e.y)}function Ji(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Me(t,e){t.min=t.min+e,t.max=t.max+e}function Xi(t,e,[r,a,i]){const n=e[i]!==void 0?e[i]:.5,o=F(t.min,t.max,n);oa(t,e[r],e[a],o,e.scale)}const gm=["x","scaleX","originX"],fm=["y","scaleY","originY"];function Pt(t,e){Xi(t.x,e,gm),Xi(t.y,e,fm)}function bl(t,e){return pl(hm(t.getBoundingClientRect(),e))}function pm(t,e,r){const a=bl(t,r),{scroll:i}=e;return i&&(Me(a.x,i.offset.x),Me(a.y,i.offset.y)),a}const vl=({current:t})=>t?t.ownerDocument.defaultView:null,xm=new WeakMap;class ym{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=J(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(us(u,"page").point)},n=(u,h)=>{const{drag:m,dragPropagation:g,onDragStart:x}=this.getProps();if(m&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Ro(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),he(v=>{let N=this.getAxisMotionValue(v).get()||0;if(we.test(N)){const{projection:y}=this.visualElement;if(y&&y.layout){const p=y.layout.layoutBox[v];p&&(N=oe(p)*(parseFloat(N)/100))}}this.originPoint[v]=N}),x&&B.update(()=>x(u,h),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:x,onDrag:b}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:v}=h;if(g&&this.currentDirection===null){this.currentDirection=bm(v),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),b&&b(u,h)},l=(u,h)=>this.stop(u,h),c=()=>he(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new gl(e,{onSessionStart:i,onStart:n,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:vl(this.visualElement)})}stop(e,r){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:n}=this.getProps();n&&B.update(()=>n(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,a){const{drag:i}=this.getProps();if(!a||!Tr(e,i,this.currentDirection))return;const n=this.getAxisMotionValue(e);let o=this.originPoint[e]+a[e];this.constraints&&this.constraints[e]&&(o=im(o,this.constraints[e],this.elastic[e])),n.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:a}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,n=this.constraints;r&&St(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=nm(i.layoutBox,r):this.constraints=!1,this.elastic=dm(a),n!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&he(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=cm(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!St(e))return!1;const a=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const n=pm(a,i.root,this.visualElement.getTransformPagePoint());let o=om(i.layout.layoutBox,n);if(r){const l=r(um(o));this.hasMutatedConstraints=!!l,l&&(o=pl(l))}return o}startAnimation(e){const{drag:r,dragMomentum:a,dragElastic:i,dragTransition:n,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=he(u=>{if(!Tr(u,r,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const m=i?200:1e6,g=i?40:1e7,x={type:"inertia",velocity:a?e[u]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...n,...h};return this.startAxisValueAnimation(u,x)});return Promise.all(d).then(l)}startAxisValueAnimation(e,r){const a=this.getAxisMotionValue(e);return a.start(Ga(e,a,0,r))}stopAnimation(){he(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){he(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag"+e.toUpperCase(),a=this.visualElement.getProps(),i=a[r];return i||this.visualElement.getValue(e,(a.initial?a.initial[e]:void 0)||0)}snapToCursor(e){he(r=>{const{drag:a}=this.getProps();if(!Tr(r,a,this.currentDirection))return;const{projection:i}=this.visualElement,n=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[r];n.set(e[r]-F(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!St(r)||!a||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};he(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();i[o]=lm({min:c,max:c},this.constraints[o])}});const{transformTemplate:n}=this.visualElement.getProps();this.visualElement.current.style.transform=n?n({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),he(o=>{if(!Tr(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(F(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;xm.set(this.visualElement,this);const e=this.visualElement.current,r=Pe(e,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),a=()=>{const{dragConstraints:c}=this.getProps();St(c)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,n=i.addEventListener("measure",a);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),a();const o=Te(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(he(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),r(),n(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:i=!1,dragConstraints:n=!1,dragElastic:o=ia,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:a,dragPropagation:i,dragConstraints:n,dragElastic:o,dragMomentum:l}}}function Tr(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function bm(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class vm extends Qe{constructor(e){super(e),this.removeGroupControls=H,this.removeListeners=H,this.controls=new ym(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||H}unmount(){this.removeGroupControls(),this.removeListeners()}}const Yi=t=>(e,r)=>{t&&B.update(()=>t(e,r))};class wm extends Qe{constructor(){super(...arguments),this.removePointerDownListener=H}onPointerDown(e){this.session=new gl(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vl(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:a,onPanEnd:i}=this.node.getProps();return{onSessionStart:Yi(e),onStart:Yi(r),onMove:a,onEnd:(n,o)=>{delete this.session,i&&B.update(()=>i(n,o))}}}mount(){this.removePointerDownListener=Pe(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function km(){const t=f.useContext(ns);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:a}=t,i=f.useId();return f.useEffect(()=>a(i),[]),!e&&r?[!1,()=>r&&r(i)]:[!0]}const $r={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Zi(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ht={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(L.test(t))t=parseFloat(t);else return t;const r=Zi(t,e.target.x),a=Zi(t,e.target.y);return`${r}% ${a}%`}},jm={correct:(t,{treeScale:e,projectionDelta:r})=>{const a=t,i=Ke.parse(t);if(i.length>5)return a;const n=Ke.createTransformer(t),o=typeof i[0]!="number"?1:0,l=r.x.scale*e.x,c=r.y.scale*e.y;i[0+o]/=l,i[1+o]/=c;const d=F(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),n(i)}};class Nm extends ja.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:a,layoutId:i}=this.props,{projection:n}=e;Eu(_m),n&&(r.group&&r.group.add(n),a&&a.register&&i&&a.register(n),n.root.didUpdate(),n.addEventListener("animationComplete",()=>{this.safeToRemove()}),n.setOptions({...n.options,onExitComplete:()=>this.safeToRemove()})),$r.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:a,drag:i,isPresent:n}=this.props,o=a.projection;return o&&(o.isPresent=n,i||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==n&&(n?o.promote():o.relegate()||B.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),a&&a.deregister&&a.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function wl(t){const[e,r]=km(),a=f.useContext(Ra);return ja.createElement(Nm,{...t,layoutGroup:a,switchLayoutGroup:f.useContext(po),isPresent:e,safeToRemove:r})}const _m={borderRadius:{...Ht,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ht,borderTopRightRadius:Ht,borderBottomLeftRadius:Ht,borderBottomRightRadius:Ht,boxShadow:jm},kl=["TopLeft","TopRight","BottomLeft","BottomRight"],Sm=kl.length,Qi=t=>typeof t=="string"?parseFloat(t):t,en=t=>typeof t=="number"||L.test(t);function Cm(t,e,r,a,i,n){i?(t.opacity=F(0,r.opacity!==void 0?r.opacity:1,Tm(a)),t.opacityExit=F(e.opacity!==void 0?e.opacity:1,0,Pm(a))):n&&(t.opacity=F(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,a));for(let o=0;o<Sm;o++){const l=`border${kl[o]}Radius`;let c=tn(e,l),d=tn(r,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||en(c)===en(d)?(t[l]=Math.max(F(Qi(c),Qi(d),a),0),(we.test(d)||we.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||r.rotate)&&(t.rotate=F(e.rotate||0,r.rotate||0,a))}function tn(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Tm=jl(0,.5,zo),Pm=jl(.5,.95,H);function jl(t,e,r){return a=>a<t?0:a>e?1:r(lr(t,e,a))}function rn(t,e){t.min=e.min,t.max=e.max}function de(t,e){rn(t.x,e.x),rn(t.y,e.y)}function sn(t,e,r,a,i){return t-=e,t=Zr(t,1/r,a),i!==void 0&&(t=Zr(t,1/i,a)),t}function Am(t,e=0,r=1,a=.5,i,n=t,o=t){if(we.test(e)&&(e=parseFloat(e),e=F(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=F(n.min,n.max,a);t===n&&(l-=e),t.min=sn(t.min,e,r,l,i),t.max=sn(t.max,e,r,l,i)}function an(t,e,[r,a,i],n,o){Am(t,e[r],e[a],e[i],e.scale,n,o)}const Em=["x","scaleX","originX"],Lm=["y","scaleY","originY"];function nn(t,e,r,a){an(t.x,e,Em,r?r.x:void 0,a?a.x:void 0),an(t.y,e,Lm,r?r.y:void 0,a?a.y:void 0)}function on(t){return t.translate===0&&t.scale===1}function Nl(t){return on(t.x)&&on(t.y)}function Rm(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function _l(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function ln(t){return oe(t.x)/oe(t.y)}class Dm{constructor(){this.members=[]}add(e){Ka(this.members,e),e.scheduleRender()}remove(e){if(Ja(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let a;for(let i=r;i>=0;i--){const n=this.members[i];if(n.isPresent!==!1){a=n;break}}return a?(this.promote(a),!0):!1}promote(e,r){const a=this.lead;if(e!==a&&(this.prevLead=a,this.lead=e,e.show(),a)){a.instance&&a.scheduleRender(),e.scheduleRender(),e.resumeFrom=a,r&&(e.resumeFrom.preserveOpacity=!0),a.snapshot&&(e.snapshot=a.snapshot,e.snapshot.latestValues=a.animationValues||a.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:a}=e;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function cn(t,e,r){let a="";const i=t.x.translate/e.x,n=t.y.translate/e.y;if((i||n)&&(a=`translate3d(${i}px, ${n}px, 0) `),(e.x!==1||e.y!==1)&&(a+=`scale(${1/e.x}, ${1/e.y}) `),r){const{rotate:c,rotateX:d,rotateY:u}=r;c&&(a+=`rotate(${c}deg) `),d&&(a+=`rotateX(${d}deg) `),u&&(a+=`rotateY(${u}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(a+=`scale(${o}, ${l})`),a||"none"}const Im=(t,e)=>t.depth-e.depth;class Om{constructor(){this.children=[],this.isDirty=!1}add(e){Ka(this.children,e),this.isDirty=!0}remove(e){Ja(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Im),this.isDirty=!1,this.children.forEach(e)}}function Mm(t,e){const r=performance.now(),a=({timestamp:i})=>{const n=i-r;n>=e&&(Le(a),t(n-e))};return B.read(a,!0),()=>Le(a)}function $m(t){window.MotionDebug&&window.MotionDebug.record(t)}function Um(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Bm(t,e,r){const a=ne(t)?t:At(t);return a.start(Ga("",a,e,r)),a.animation}const dn=["","X","Y","Z"],Vm={visibility:"hidden"},un=1e3;let Fm=0;const nt={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Sl({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:a,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=Fm++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,nt.totalNodes=nt.resolvedTargetDeltas=nt.recalculatedProjection=0,this.nodes.forEach(zm),this.nodes.forEach(Xm),this.nodes.forEach(Ym),this.nodes.forEach(Wm),$m(nt)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Om)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Xa),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Um(o),this.instance=o;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),t){let h;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Mm(m,250),$r.hasAnimatedSinceResize&&($r.hasAnimatedSinceResize=!1,this.nodes.forEach(mn))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||rg,{onLayoutAnimationStart:v,onLayoutAnimationComplete:N}=u.getProps(),y=!this.targetLayout||!_l(this.targetLayout,x)||g,p=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||p||m&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,p);const j={...Wa(b,"layout"),onPlay:v,onComplete:N};(u.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else m||mn(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Le(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Zm),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(hn);return}this.isUpdating||this.nodes.forEach(Km),this.isUpdating=!1,this.nodes.forEach(Jm),this.nodes.forEach(qm),this.nodes.forEach(Hm),this.clearAllSnapshots();const l=performance.now();re.delta=Ge(0,1e3/60,l-re.timestamp),re.timestamp=l,re.isProcessing=!0,js.update.process(re),js.preRender.process(re),js.render.process(re),re.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Gm),this.sharedNodes.forEach(Qm)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,B.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){B.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=J(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:a(this.instance),offset:r(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!Nl(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(l||it(this.latestValues)||u)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),sg(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return J();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Me(l.x,c.offset.x),Me(l.y,c.offset.y)),l}removeElementScroll(o){const l=J();de(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;if(d!==this.root&&u&&h.layoutScroll){if(u.isRoot){de(l,o);const{scroll:m}=this.root;m&&(Me(l.x,-m.offset.x),Me(l.y,-m.offset.y))}Me(l.x,u.offset.x),Me(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const c=J();de(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Pt(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),it(u.latestValues)&&Pt(c,u.latestValues)}return it(this.latestValues)&&Pt(c,this.latestValues),c}removeTransform(o){const l=J();de(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!it(d.latestValues))continue;na(d.latestValues)&&d.updateSnapshot();const u=J(),h=d.measurePageBox();de(u,h),nn(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return it(this.latestValues)&&nn(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==re.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=re.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=J(),this.relativeTargetOrigin=J(),Zt(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),de(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=J(),this.targetWithTransforms=J()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),am(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):de(this.target,this.layout.layoutBox),yl(this.target,this.targetDelta)):de(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=J(),this.relativeTargetOrigin=J(),Zt(this.relativeTargetOrigin,this.target,g.target),de(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}nt.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||na(this.parent.latestValues)||xl(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===re.timestamp&&(d=!1),d)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;de(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;mm(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:x}=l;if(!x){this.projectionTransform&&(this.projectionDelta=Tt(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Tt(),this.projectionDeltaWithTransform=Tt());const b=this.projectionTransform;Yt(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=cn(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==m||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),nt.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=Tt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=J(),g=c?c.source:void 0,x=this.layout?this.layout.source:void 0,b=g!==x,v=this.getStack(),N=!v||v.members.length<=1,y=!!(b&&!N&&this.options.crossfade===!0&&!this.path.some(tg));this.animationProgress=0;let p;this.mixTargetDelta=j=>{const w=j/1e3;gn(h.x,o.x,w),gn(h.y,o.y,w),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zt(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eg(this.relativeTarget,this.relativeTargetOrigin,m,w),p&&Rm(this.relativeTarget,p)&&(this.isProjectionDirty=!1),p||(p=J()),de(p,this.relativeTarget)),b&&(this.animationValues=u,Cm(u,d,this.latestValues,w,y,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Le(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=B.update(()=>{$r.hasAnimatedSinceResize=!0,this.currentAnimation=Bm(0,un,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(un),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&Cl(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||J();const h=oe(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const m=oe(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}de(l,c),Pt(l,u),Yt(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Dm),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const d={};for(let u=0;u<dn.length;u++){const h="rotate"+dn[u];c[h]&&(d[h]=c[h],o.setStaticValue(h,0))}o.render();for(const u in d)o.setStaticValue(u,d[u]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Vm;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Mr(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Mr(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!it(this.latestValues)&&(b.transform=u?u({},""):"none",this.hasProjected=!1),b}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=cn(this.projectionDeltaWithTransform,this.treeScale,m),u&&(d.transform=u(m,d.transform));const{x:g,y:x}=this.projectionDelta;d.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,h.animationValues?d.opacity=h===this?(c=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:d.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in zr){if(m[b]===void 0)continue;const{correct:v,applyTo:N}=zr[b],y=d.transform==="none"?m[b]:v(m[b],h);if(N){const p=N.length;for(let j=0;j<p;j++)d[N[j]]=y}else d[b]=y}return this.options.layoutId&&(d.pointerEvents=h===this?Mr(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(hn),this.root.sharedNodes.clear()}}}function qm(t){t.updateLayout()}function Hm(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:i}=t.layout,{animationType:n}=t.options,o=r.source!==t.layout.source;n==="size"?he(h=>{const m=o?r.measuredBox[h]:r.layoutBox[h],g=oe(m);m.min=a[h].min,m.max=m.min+g}):Cl(n,r.layoutBox,a)&&he(h=>{const m=o?r.measuredBox[h]:r.layoutBox[h],g=oe(a[h]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const l=Tt();Yt(l,a,r.layoutBox);const c=Tt();o?Yt(c,t.applyTransform(i,!0),r.measuredBox):Yt(c,a,r.layoutBox);const d=!Nl(l);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:g}=h;if(m&&g){const x=J();Zt(x,r.layoutBox,m.layoutBox);const b=J();Zt(b,a,g.layoutBox),_l(x,b)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function zm(t){nt.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Wm(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Gm(t){t.clearSnapshot()}function hn(t){t.clearMeasurements()}function Km(t){t.isLayoutDirty=!1}function Jm(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function mn(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Xm(t){t.resolveTargetDelta()}function Ym(t){t.calcProjection()}function Zm(t){t.resetRotation()}function Qm(t){t.removeLeadSnapshot()}function gn(t,e,r){t.translate=F(e.translate,0,r),t.scale=F(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function fn(t,e,r,a){t.min=F(e.min,r.min,a),t.max=F(e.max,r.max,a)}function eg(t,e,r,a){fn(t.x,e.x,r.x,a),fn(t.y,e.y,r.y,a)}function tg(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const rg={duration:.45,ease:[.4,0,.1,1]},pn=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),xn=pn("applewebkit/")&&!pn("chrome/")?Math.round:H;function yn(t){t.min=xn(t.min),t.max=xn(t.max)}function sg(t){yn(t.x),yn(t.y)}function Cl(t,e,r){return t==="position"||t==="preserve-aspect"&&!aa(ln(e),ln(r),.2)}const ag=Sl({attachResizeListener:(t,e)=>Te(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ds={current:void 0},Tl=Sl({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ds.current){const t=new ag({});t.mount(window),t.setOptions({layoutScroll:!0}),Ds.current=t}return Ds.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ig={pan:{Feature:wm},drag:{Feature:vm,ProjectionNode:Tl,MeasureLayout:wl}},ng=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function og(t){const e=ng.exec(t);if(!e)return[,];const[,r,a]=e;return[r,a]}function la(t,e,r=1){const[a,i]=og(t);if(!a)return;const n=window.getComputedStyle(e).getPropertyValue(a);if(n){const o=n.trim();return dl(o)?parseFloat(o):o}else return Ys(i)?la(i,e,r+1):i}function lg(t,{...e},r){const a=t.current;if(!(a instanceof Element))return{target:e,transitionEnd:r};r&&(r={...r}),t.values.forEach(i=>{const n=i.get();if(!Ys(n))return;const o=la(n,a);o&&i.set(o)});for(const i in e){const n=e[i];if(!Ys(n))continue;const o=la(n,a);o&&(e[i]=o,r||(r={}),r[i]===void 0&&(r[i]=n))}return{target:e,transitionEnd:r}}const cg=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Pl=t=>cg.has(t),dg=t=>Object.keys(t).some(Pl),bn=t=>t===yt||t===L,vn=(t,e)=>parseFloat(t.split(", ")[e]),wn=(t,e)=>(r,{transform:a})=>{if(a==="none"||!a)return 0;const i=a.match(/^matrix3d\((.+)\)$/);if(i)return vn(i[1],e);{const n=a.match(/^matrix\((.+)\)$/);return n?vn(n[1],t):0}},ug=new Set(["x","y","z"]),hg=fr.filter(t=>!ug.has(t));function mg(t){const e=[];return hg.forEach(r=>{const a=t.getValue(r);a!==void 0&&(e.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Et={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:wn(4,13),y:wn(5,14)};Et.translateX=Et.x;Et.translateY=Et.y;const gg=(t,e,r)=>{const a=e.measureViewportBox(),i=e.current,n=getComputedStyle(i),{display:o}=n,l={};o==="none"&&e.setStaticValue("display",t.display||"block"),r.forEach(d=>{l[d]=Et[d](a,n)}),e.render();const c=e.measureViewportBox();return r.forEach(d=>{const u=e.getValue(d);u&&u.jump(l[d]),t[d]=Et[d](c,n)}),t},fg=(t,e,r={},a={})=>{e={...e},a={...a};const i=Object.keys(e).filter(Pl);let n=[],o=!1;const l=[];if(i.forEach(c=>{const d=t.getValue(c);if(!t.hasValue(c))return;let u=r[c],h=qt(u);const m=e[c];let g;if(Gr(m)){const x=m.length,b=m[0]===null?1:0;u=m[b],h=qt(u);for(let v=b;v<x&&m[v]!==null;v++)g?Va(qt(m[v])===g):g=qt(m[v])}else g=qt(m);if(h!==g)if(bn(h)&&bn(g)){const x=d.get();typeof x=="string"&&d.set(parseFloat(x)),typeof m=="string"?e[c]=parseFloat(m):Array.isArray(m)&&g===L&&(e[c]=m.map(parseFloat))}else h!=null&&h.transform&&(g!=null&&g.transform)&&(u===0||m===0)?u===0?d.set(g.transform(u)):e[c]=h.transform(m):(o||(n=mg(t),o=!0),l.push(c),a[c]=a[c]!==void 0?a[c]:e[c],d.jump(m))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,d=gg(e,t,l);return n.length&&n.forEach(([u,h])=>{t.getValue(u).set(h)}),t.render(),os&&c!==null&&window.scrollTo({top:c}),{target:d,transitionEnd:a}}else return{target:e,transitionEnd:a}};function pg(t,e,r,a){return dg(e)?fg(t,e,r,a):{target:e,transitionEnd:a}}const xg=(t,e,r,a)=>{const i=lg(t,e,a);return e=i.target,a=i.transitionEnd,pg(t,e,r,a)},ca={current:null},Al={current:!1};function yg(){if(Al.current=!0,!!os)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ca.current=t.matches;t.addListener(e),e()}else ca.current=!1}function bg(t,e,r){const{willChange:a}=e;for(const i in e){const n=e[i],o=r[i];if(ne(n))t.addValue(i,n),Yr(a)&&a.add(i);else if(ne(o))t.addValue(i,At(n,{owner:t})),Yr(a)&&a.remove(i);else if(o!==n)if(t.hasValue(i)){const l=t.getValue(i);!l.hasAnimated&&l.set(n)}else{const l=t.getStaticValue(i);t.addValue(i,At(l!==void 0?l:n,{owner:t}))}}for(const i in r)e[i]===void 0&&t.removeValue(i);return e}const kn=new WeakMap,El=Object.keys(or),vg=El.length,jn=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],wg=La.length;class kg{constructor({parent:e,props:r,presenceContext:a,reducedMotionConfig:i,visualState:n},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>B.render(this.render,!1,!0);const{latestValues:l,renderState:c}=n;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=r,this.presenceContext=a,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=cs(r),this.isVariantNode=fo(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(r,{});for(const h in u){const m=u[h];l[h]!==void 0&&ne(m)&&(m.set(l[h],!1),Yr(d)&&d.add(h))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){this.current=e,kn.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),Al.current||yg(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ca.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){kn.delete(this.current),this.projection&&this.projection.unmount(),Le(this.notifyUpdate),Le(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,r){const a=xt.has(e),i=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&B.update(this.notifyUpdate,!1,!0),a&&this.projection&&(this.projection.isTransformDirty=!0)}),n=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),n()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...r},a,i,n){let o,l;for(let c=0;c<vg;c++){const d=El[c],{isEnabled:u,Feature:h,ProjectionNode:m,MeasureLayout:g}=or[d];m&&(o=m),u(r)&&(!this.features[d]&&h&&(this.features[d]=new h(this)),g&&(l=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:d,drag:u,dragConstraints:h,layoutScroll:m,layoutRoot:g}=r;this.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!u||h&&St(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:n,layoutScroll:m,layoutRoot:g})}return l}updateFeatures(){for(const e in this.features){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):J()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<jn.length;a++){const i=jn[a];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const n=e["on"+i];n&&(this.propEventSubscriptions[i]=this.on(i,n))}this.prevMotionValues=bg(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const a=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(a.initial=this.props.initial),a}const r={};for(let a=0;a<wg;a++){const i=La[a],n=this.props[i];(nr(n)||n===!1)&&(r[i]=n)}return r}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let a=this.values.get(e);return a===void 0&&r!==void 0&&(a=At(r,{owner:this}),this.addValue(e,a)),a}readValue(e){var r;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:a}=this.props,i=typeof a=="string"||typeof a=="object"?(r=Ba(this.props,a))===null||r===void 0?void 0:r[e]:void 0;if(a&&i!==void 0)return i;const n=this.getBaseTargetFromProps(this.props,e);return n!==void 0&&!ne(n)?n:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Xa),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class Ll extends kg{sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:a}){delete r[e],delete a[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...a},{transformValues:i},n){let o=U0(a,e||{},this);if(i&&(r&&(r=i(r)),a&&(a=i(a)),o&&(o=i(o))),n){M0(this,a,o);const l=xg(this,a,o,r);r=l.transitionEnd,a=l.target}return{transition:e,transitionEnd:r,...a}}}function jg(t){return window.getComputedStyle(t)}class Ng extends Ll{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,r){if(xt.has(r)){const a=za(r);return a&&a.default||0}else{const a=jg(e),i=(bo(r)?a.getPropertyValue(r):a[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return bl(e,r)}build(e,r,a,i){Ia(e,r,a,i.transformTemplate)}scrapeMotionValuesFromProps(e,r){return Ua(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ne(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(e,r,a,i){_o(e,r,a,i)}}class _g extends Ll{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(xt.has(r)){const a=za(r);return a&&a.default||0}return r=So.has(r)?r:Aa(r),e.getAttribute(r)}measureInstanceViewportBox(){return J()}scrapeMotionValuesFromProps(e,r){return To(e,r)}build(e,r,a,i){Ma(e,r,a,this.isSVGTag,i.transformTemplate)}renderInstance(e,r,a,i){Co(e,r,a,i)}mount(e){this.isSVGTag=$a(e.tagName),super.mount(e)}}const Sg=(t,e)=>Da(t)?new _g(e,{enableHardwareAcceleration:!1}):new Ng(e,{enableHardwareAcceleration:!0}),Cg={layout:{ProjectionNode:Tl,MeasureLayout:wl}},Tg={...em,...vh,...ig,...Cg},S=Pu((t,e)=>oh(t,e,Tg,Sg));function Rl(){const t=f.useRef(!1);return Pa(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function Pg(){const t=Rl(),[e,r]=f.useState(0),a=f.useCallback(()=>{t.current&&r(e+1)},[e]);return[f.useCallback(()=>B.postRender(a),[a]),e]}class Ag extends f.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Eg({children:t,isPresent:e}){const r=f.useId(),a=f.useRef(null),i=f.useRef({width:0,height:0,top:0,left:0});return f.useInsertionEffect(()=>{const{width:n,height:o,top:l,left:c}=i.current;if(e||!a.current||!n||!o)return;a.current.dataset.motionPopId=r;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${n}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),f.createElement(Ag,{isPresent:e,childRef:a,sizeRef:i},f.cloneElement(t,{ref:a}))}const Is=({children:t,initial:e,isPresent:r,onExitComplete:a,custom:i,presenceAffectsLayout:n,mode:o})=>{const l=Po(Lg),c=f.useId(),d=f.useMemo(()=>({id:c,initial:e,isPresent:r,custom:i,onExitComplete:u=>{l.set(u,!0);for(const h of l.values())if(!h)return;a&&a()},register:u=>(l.set(u,!1),()=>l.delete(u))}),n?void 0:[r]);return f.useMemo(()=>{l.forEach((u,h)=>l.set(h,!1))},[r]),f.useEffect(()=>{!r&&!l.size&&a&&a()},[r]),o==="popLayout"&&(t=f.createElement(Eg,{isPresent:r},t)),f.createElement(ns.Provider,{value:d},t)};function Lg(){return new Map}function Rg(t){return f.useEffect(()=>()=>t(),[])}const ot=t=>t.key||"";function Dg(t,e){t.forEach(r=>{const a=ot(r);e.set(a,r)})}function Ig(t){const e=[];return f.Children.forEach(t,r=>{f.isValidElement(r)&&e.push(r)}),e}const br=({children:t,custom:e,initial:r=!0,onExitComplete:a,exitBeforeEnter:i,presenceAffectsLayout:n=!0,mode:o="sync"})=>{const l=f.useContext(Ra).forceRender||Pg()[0],c=Rl(),d=Ig(t);let u=d;const h=f.useRef(new Map).current,m=f.useRef(u),g=f.useRef(new Map).current,x=f.useRef(!0);if(Pa(()=>{x.current=!1,Dg(d,g),m.current=u}),Rg(()=>{x.current=!0,g.clear(),h.clear()}),x.current)return f.createElement(f.Fragment,null,u.map(y=>f.createElement(Is,{key:ot(y),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:n,mode:o},y)));u=[...u];const b=m.current.map(ot),v=d.map(ot),N=b.length;for(let y=0;y<N;y++){const p=b[y];v.indexOf(p)===-1&&!h.has(p)&&h.set(p,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((y,p)=>{if(v.indexOf(p)!==-1)return;const j=g.get(p);if(!j)return;const w=b.indexOf(p);let C=y;if(!C){const A=()=>{h.delete(p);const E=Array.from(g.keys()).filter(T=>!v.includes(T));if(E.forEach(T=>g.delete(T)),m.current=d.filter(T=>{const I=ot(T);return I===p||E.includes(I)}),!h.size){if(c.current===!1)return;l(),a&&a()}};C=f.createElement(Is,{key:ot(j),isPresent:!1,onExitComplete:A,custom:e,presenceAffectsLayout:n,mode:o},j),h.set(p,C)}u.splice(w,0,C)}),u=u.map(y=>{const p=y.key;return h.has(p)?y:f.createElement(Is,{key:ot(y),isPresent:!0,presenceAffectsLayout:n,mode:o},y)}),f.createElement(f.Fragment,null,h.size?u:u.map(y=>f.cloneElement(y)))};var Og={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Mg=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$g=(t,e)=>{const r=f.forwardRef(({color:a="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:o,children:l,...c},d)=>f.createElement("svg",{ref:d,...Og,width:i,height:i,stroke:a,strokeWidth:o?Number(n)*24/Number(i):n,className:`lucide lucide-${Mg(t)}`,...c},[...e.map(([u,h])=>f.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${t}`,r};var P=$g;const da=P("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),ua=P("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ug=P("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Nn=P("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),Lt=P("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Ya=P("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Ur=P("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Za=P("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),xe=P("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Bg=P("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Vg=P("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Fg=P("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),qg=P("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ht=P("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ve=P("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),cr=P("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),_n=P("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),dr=P("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ft=P("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Je=P("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),be=P("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Dl=P("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Qa=P("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Il=P("FolderPlus",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["line",{x1:"12",x2:"12",y1:"10",y2:"16",key:"3c25pp"}],["line",{x1:"9",x2:"15",y1:"13",y2:"13",key:"10hoct"}]]),Q=P("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),ha=P("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ei=P("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),mt=P("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),Rt=P("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Hg=P("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ol=P("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Qt=P("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),zg=P("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Wg=P("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Br=P("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Gg=P("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Kg=P("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Ml=P("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]),$l=P("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Jg=P("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Xg=P("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Re=P("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ma=P("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]),Yg=P("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Zg=P("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),$t=P("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),gt=P("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Qg=P("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),ye=P("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),ga=P("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),ef=P("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),tf=P("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Ul=P("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),Vr=P("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Ut=P("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Fe=P("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ur=P("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),hr=P("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Bl=P("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ms=P("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),We=P("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),rf=()=>{const t=Mt(),[e,r]=f.useState(!1),a=[{icon:Lt,label:"Dashboard",path:"/"},{icon:Rt,label:"Links",path:"/links"},{icon:Dl,label:"Reports",path:"/reports"},{icon:Qa,label:"Filters",path:"/filters"},{icon:Q,label:"Domains",path:"/domains"},{icon:ma,label:"Integrations",path:"/integrations"},{icon:mt,label:"API",path:"/api"},{icon:ur,label:"Account",path:"/account"},{icon:ha,label:"Help",path:"/help"},{icon:gt,label:"Settings",path:"/settings"}];return s.jsxs(S.div,{className:`bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 flex flex-col transition-all duration-300 fixed left-0 top-0 h-full z-50 ${e?"w-16":"w-64"}`,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,ease:"easeOut"},children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[!e&&s.jsxs(S.div,{className:"flex items-center space-x-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center",children:s.jsx(Rt,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Nanhi.Link"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"v2.0"})]})]}),s.jsx("button",{onClick:()=>r(!e),className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200 cursor-pointer",children:e?s.jsx(qg,{className:"w-4 h-4 text-gray-500"}):s.jsx(Fg,{className:"w-4 h-4 text-gray-500"})})]})}),s.jsx("nav",{className:"flex-1 p-4",children:s.jsx("ul",{className:"space-y-2",children:a.map(i=>{const n=t.pathname===i.path||i.path==="/"&&t.pathname==="/dashboard";return s.jsx("li",{children:s.jsxs(Ta,{to:i.path,className:`flex items-center space-x-3 px-3 py-2.5 rounded-lg transition-all duration-200 group relative cursor-pointer ${n?"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[s.jsx(i.icon,{className:`w-5 h-5 ${n?"text-white":"text-gray-500 group-hover:text-gray-700 dark:group-hover:text-gray-200"}`}),!e&&s.jsx("span",{className:"font-medium",children:i.label}),n&&s.jsx(S.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg -z-10",layoutId:"activeTab",transition:{type:"spring",bounce:.2,duration:.6}})]})},i.path)})})})]})},sf=()=>{const{user:t,logout:e}=le(),{theme:r,toggleTheme:a}=uo(),[i,n]=f.useState(!1),[o,l]=f.useState(!1),c=()=>{e(),n(!1)};return s.jsx("div",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-6 py-4 fixed top-0 right-0 left-64 z-40",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex-1 max-w-lg",children:s.jsxs("div",{className:"relative",children:[s.jsx($t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search links, domains, or analytics...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:a,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors cursor-pointer",children:r==="dark"?s.jsx(tf,{className:"w-5 h-5"}):s.jsx(Gg,{className:"w-5 h-5"})}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>l(!o),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors relative cursor-pointer",children:[s.jsx(Ya,{className:"w-5 h-5"}),s.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),o&&s.jsxs(S.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50",children:[s.jsx("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Notifications"})}),s.jsxs("div",{className:"max-h-64 overflow-y-auto",children:[s.jsxs("div",{className:"px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[s.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:"New domain verification completed"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"2 minutes ago"})]}),s.jsxs("div",{className:"px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[s.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:"Link analytics report ready"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"1 hour ago"})]}),s.jsxs("div",{className:"px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[s.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:"API rate limit warning"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"3 hours ago"})]})]}),s.jsx("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700",children:s.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 cursor-pointer",children:"View all notifications"})})]})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>n(!i),className:"flex items-center space-x-2 p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors cursor-pointer",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-600 to-blue-600 rounded-full flex items-center justify-center",children:s.jsx(ur,{className:"w-4 h-4 text-white"})}),s.jsx("span",{className:"text-sm font-medium",children:(t==null?void 0:t.email)||"User"}),s.jsx(Vg,{className:"w-4 h-4"})]}),i&&s.jsxs(S.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50",children:[s.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(t==null?void 0:t.email)||"user@example.com"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Free Plan"})]}),s.jsxs("button",{onClick:()=>n(!1),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center space-x-2 cursor-pointer",children:[s.jsx(ur,{className:"w-4 h-4"}),s.jsx("span",{children:"Profile"})]}),s.jsxs("button",{onClick:()=>n(!1),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center space-x-2 cursor-pointer",children:[s.jsx(gt,{className:"w-4 h-4"}),s.jsx("span",{children:"Settings"})]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 mt-2 pt-2",children:s.jsxs("button",{onClick:c,className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center space-x-2 cursor-pointer",children:[s.jsx(Hg,{className:"w-4 h-4"}),s.jsx("span",{children:"Sign out"})]})})]})]})]})]})})},ue=({children:t})=>s.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"relative z-30",children:s.jsx(rf,{})}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden ml-64",children:[s.jsx("div",{className:"relative z-20",children:s.jsx(sf,{})}),s.jsx("main",{className:"flex-1 overflow-y-auto p-6 pt-20 relative z-10",children:t})]})]}),af=()=>{const t=ss(),{login:e}=le(),[r,a]=f.useState({email:"",password:""}),[i,n]=f.useState(!1),[o,l]=f.useState(!1),c=u=>{a({...r,[u.target.name]:u.target.value})},d=async u=>{u.preventDefault(),l(!0);try{const h=await e(r.email,r.password);h.success?(O.success("Welcome back!"),t("/")):O.error(h.error||"Login failed")}catch{O.error("An error occurred during login")}finally{l(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-600 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:s.jsx(Rt,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Sign in to your Nanhi.Link account"})]}),s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",name:"email",value:r.email,onChange:c,required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Enter your email"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:i?"text":"password",name:"password",value:r.password,onChange:c,required:!0,className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Enter your password"}),s.jsx("button",{type:"button",onClick:()=>n(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 cursor-pointer",children:i?s.jsx(Je,{className:"w-5 h-5"}):s.jsx(be,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 cursor-pointer"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Remember me"})]}),s.jsx("button",{type:"button",className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 cursor-pointer",children:"Forgot password?"})]}),s.jsx(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:o?"Signing in...":"Sign In"})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",s.jsx(Ta,{to:"/register",className:"text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-medium cursor-pointer",children:"Sign up"})]})})]})})},nf=()=>{const t=ss(),{register:e}=le(),[r,a]=f.useState({name:"",email:"",password:"",confirmPassword:""}),[i,n]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState(!1),u=m=>{a({...r,[m.target.name]:m.target.value})},h=async m=>{if(m.preventDefault(),r.password!==r.confirmPassword){O.error("Passwords do not match");return}if(r.password.length<6){O.error("Password must be at least 6 characters");return}d(!0);try{const g=await e(r.email,r.password,r.name);g.success?(O.success("Account created successfully!"),t("/")):O.error(g.error||"Registration failed")}catch{O.error("An error occurred during registration")}finally{d(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-600 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:s.jsx(Rt,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create Account"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Join Nanhi.Link and start shortening URLs"})]}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),s.jsx("input",{type:"text",name:"name",value:r.name,onChange:u,required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Enter your full name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",name:"email",value:r.email,onChange:u,required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Enter your email"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:i?"text":"password",name:"password",value:r.password,onChange:u,required:!0,className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Create a password"}),s.jsx("button",{type:"button",onClick:()=>n(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 cursor-pointer",children:i?s.jsx(Je,{className:"w-5 h-5"}):s.jsx(be,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:o?"text":"password",name:"confirmPassword",value:r.confirmPassword,onChange:u,required:!0,className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Confirm your password"}),s.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 cursor-pointer",children:o?s.jsx(Je,{className:"w-5 h-5"}):s.jsx(be,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",required:!0,className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 cursor-pointer"}),s.jsxs("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:["I agree to the"," ",s.jsx("button",{type:"button",className:"text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 cursor-pointer",children:"Terms of Service"})," ","and"," ",s.jsx("button",{type:"button",className:"text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 cursor-pointer",children:"Privacy Policy"})]})]}),s.jsx(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:c?"Creating Account...":"Create Account"})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",s.jsx(Ta,{to:"/login",className:"text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-medium cursor-pointer",children:"Sign in"})]})})]})})},of="modulepreload",lf=function(t){return"/"+t},Sn={},vr=function(e,r,a){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(n=>{if(n=lf(n),n in Sn)return;Sn[n]=!0;const o=n.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!a)for(let u=i.length-1;u>=0;u--){const h=i[u];if(h.href===n&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":of,o||(d.as="script",d.crossOrigin=""),d.href=n,document.head.appendChild(d),o)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e()).catch(n=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n})},cf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>vr(()=>Promise.resolve().then(()=>Bt),void 0).then(({default:a})=>a(...r)):e=fetch,(...r)=>e(...r)};class ti extends Error{constructor(e,r="FunctionsError",a){super(e),this.name=r,this.context=a}}class df extends ti{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class uf extends ti{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class hf extends ti{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var fa;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(fa||(fa={}));var mf=globalThis&&globalThis.__awaiter||function(t,e,r,a){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((a=a.apply(t,e||[])).next())})};class gf{constructor(e,{headers:r={},customFetch:a,region:i=fa.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=cf(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var a;return mf(this,void 0,void 0,function*(){try{const{headers:i,method:n,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:d}).catch(x=>{throw new df(x)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new uf(u);if(!u.ok)throw new hf(u);let m=((a=u.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield u.json():m==="application/octet-stream"?g=yield u.blob():m==="text/event-stream"?g=u:m==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(i){return{data:null,error:i}}})}}var ie={},ri={},gs={},wr={},fs={},ps={},ff=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Dt=ff();const pf=Dt.fetch,Vl=Dt.fetch.bind(Dt),Fl=Dt.Headers,xf=Dt.Request,yf=Dt.Response,Bt=Object.freeze(Object.defineProperty({__proto__:null,Headers:Fl,Request:xf,Response:yf,default:Vl,fetch:pf},Symbol.toStringTag,{value:"Module"})),bf=mc(Bt);var xs={};Object.defineProperty(xs,"__esModule",{value:!0});let vf=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};xs.default=vf;var ql=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ps,"__esModule",{value:!0});const wf=ql(bf),kf=ql(xs);let jf=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=wf.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let i=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async n=>{var o,l,c;let d=null,u=null,h=null,m=n.status,g=n.statusText;if(n.ok){if(this.method!=="HEAD"){const N=await n.text();N===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=N:u=JSON.parse(N))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(l=n.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&v&&v.length>1&&(h=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,m=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const b=await n.text();try{d=JSON.parse(b),Array.isArray(d)&&n.status===404&&(u=[],d=null,m=200,g="OK")}catch{n.status===404&&b===""?(m=204,g="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,m=200,g="OK"),d&&this.shouldThrowOnError)throw new kf.default(d)}return{error:d,data:u,count:h,status:m,statusText:g}});return this.shouldThrowOnError||(i=i.catch(n=>{var o,l,c;return{error:{message:`${(o=n==null?void 0:n.name)!==null&&o!==void 0?o:"FetchError"}: ${n==null?void 0:n.message}`,details:`${(l=n==null?void 0:n.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=n==null?void 0:n.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}returns(){return this}overrideTypes(){return this}};ps.default=jf;var Nf=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fs,"__esModule",{value:!0});const _f=Nf(ps);let Sf=class extends _f.default{select(e){let r=!1;const a=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:a,foreignTable:i,referencedTable:n=i}={}){const o=n?`${n}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:a=r}={}){const i=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,r,{foreignTable:a,referencedTable:i=a}={}){const n=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:a=!1,buffers:i=!1,wal:n=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,a?"settings":null,i?"buffers":null,n?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};fs.default=Sf;var Cf=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wr,"__esModule",{value:!0});const Tf=Cf(fs);let Pf=class extends Tf.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const a=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${a})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:a,type:i}={}){let n="";i==="plain"?n="pl":i==="phrase"?n="ph":i==="websearch"&&(n="w");const o=a===void 0?"":`(${a})`;return this.url.searchParams.append(e,`${n}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,a])=>{this.url.searchParams.append(r,`eq.${a}`)}),this}not(e,r,a){return this.url.searchParams.append(e,`not.${r}.${a}`),this}or(e,{foreignTable:r,referencedTable:a=r}={}){const i=a?`${a}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,r,a){return this.url.searchParams.append(e,`${r}.${a}`),this}};wr.default=Pf;var Af=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gs,"__esModule",{value:!0});const zt=Af(wr);let Ef=class{constructor(e,{headers:r={},schema:a,fetch:i}){this.url=e,this.headers=r,this.schema=a,this.fetch=i}select(e,{head:r=!1,count:a}={}){const i=r?"HEAD":"GET";let n=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!n?"":(l==='"'&&(n=!n),l)).join("");return this.url.searchParams.set("select",o),a&&(this.headers.Prefer=`count=${a}`),new zt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:a=!0}={}){const i="POST",n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),a||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new zt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:a=!1,count:i,defaultToNull:n=!0}={}){const o="POST",l=[`resolution=${a?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),n||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new zt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const a="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),this.headers.Prefer=i.join(","),new zt.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",a=[];return e&&a.push(`count=${e}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new zt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};gs.default=Ef;var ys={},bs={};Object.defineProperty(bs,"__esModule",{value:!0});bs.version=void 0;bs.version="0.0.0-automated";Object.defineProperty(ys,"__esModule",{value:!0});ys.DEFAULT_HEADERS=void 0;const Lf=bs;ys.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Lf.version}`};var Hl=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ri,"__esModule",{value:!0});const Rf=Hl(gs),Df=Hl(wr),If=ys;let Of=class zl{constructor(e,{headers:r={},schema:a,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},If.DEFAULT_HEADERS),r),this.schemaName=a,this.fetch=i}from(e){const r=new URL(`${this.url}/${e}`);return new Rf.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new zl(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:a=!1,get:i=!1,count:n}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;a||i?(o=a?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=r);const d=Object.assign({},this.headers);return n&&(d.Prefer=`count=${n}`),new Df.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};ri.default=Of;var Vt=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ie,"__esModule",{value:!0});ie.PostgrestError=ie.PostgrestBuilder=ie.PostgrestTransformBuilder=ie.PostgrestFilterBuilder=ie.PostgrestQueryBuilder=ie.PostgrestClient=void 0;const Wl=Vt(ri);ie.PostgrestClient=Wl.default;const Gl=Vt(gs);ie.PostgrestQueryBuilder=Gl.default;const Kl=Vt(wr);ie.PostgrestFilterBuilder=Kl.default;const Jl=Vt(fs);ie.PostgrestTransformBuilder=Jl.default;const Xl=Vt(ps);ie.PostgrestBuilder=Xl.default;const Yl=Vt(xs);ie.PostgrestError=Yl.default;var Mf=ie.default={PostgrestClient:Wl.default,PostgrestQueryBuilder:Gl.default,PostgrestFilterBuilder:Kl.default,PostgrestTransformBuilder:Jl.default,PostgrestBuilder:Xl.default,PostgrestError:Yl.default};const{PostgrestClient:$f,PostgrestQueryBuilder:ry,PostgrestFilterBuilder:sy,PostgrestTransformBuilder:ay,PostgrestBuilder:iy,PostgrestError:ny}=Mf;function Uf(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Bf=Uf(),Vf="2.11.15",Ff=`realtime-js/${Vf}`,qf="1.0.0",Zl=1e4,Hf=1e3;var er;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(er||(er={}));var te;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(te||(te={}));var pe;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(pe||(pe={}));var pa;(function(t){t.websocket="websocket"})(pa||(pa={}));var ct;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ct||(ct={}));class zf{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),a=new TextDecoder;return this._decodeBroadcast(e,r,a)}_decodeBroadcast(e,r,a){const i=r.getUint8(1),n=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=a.decode(e.slice(o,o+i));o=o+i;const c=a.decode(e.slice(o,o+n));o=o+n;const d=JSON.parse(a.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Ql{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var U;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(U||(U={}));const Cn=(t,e,r={})=>{var a;const i=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(e).reduce((n,o)=>(n[o]=Wf(o,t,e,i),n),{})},Wf=(t,e,r,a)=>{const i=e.find(l=>l.name===t),n=i==null?void 0:i.type,o=r[t];return n&&!a.includes(n)?ec(n,o):xa(o)},ec=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Xf(e,r)}switch(t){case U.bool:return Gf(e);case U.float4:case U.float8:case U.int2:case U.int4:case U.int8:case U.numeric:case U.oid:return Kf(e);case U.json:case U.jsonb:return Jf(e);case U.timestamp:return Yf(e);case U.abstime:case U.date:case U.daterange:case U.int4range:case U.int8range:case U.money:case U.reltime:case U.text:case U.time:case U.timestamptz:case U.timetz:case U.tsrange:case U.tstzrange:return xa(e);default:return xa(e)}},xa=t=>t,Gf=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Kf=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Jf=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Xf=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,a=t[r];if(t[0]==="{"&&a==="}"){let n;const o=t.slice(1,r);try{n=JSON.parse("["+o+"]")}catch{n=o?o.split(","):[]}return n.map(l=>ec(e,l))}return t},Yf=t=>typeof t=="string"?t.replace(" ","T"):t,tc=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Os{constructor(e,r,a={},i=Zl){this.channel=e,this.event=r,this.payload=a,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var a;return this._hasReceived(e)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(a=>a.status===e).forEach(a=>a.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Tn;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Tn||(Tn={}));class tr{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},i=>{const{onJoin:n,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tr.syncState(this.state,i,n,o),this.pendingDiffs.forEach(c=>{this.state=tr.syncDiff(this.state,c,n,o)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},i=>{const{onJoin:n,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=tr.syncDiff(this.state,i,n,o),l())}),this.onJoin((i,n,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:n,newPresences:o})}),this.onLeave((i,n,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:n,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,a,i){const n=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(n,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=n[d];if(h){const m=u.map(v=>v.presence_ref),g=h.map(v=>v.presence_ref),x=u.filter(v=>g.indexOf(v.presence_ref)<0),b=h.filter(v=>m.indexOf(v.presence_ref)<0);x.length>0&&(l[d]=x),b.length>0&&(c[d]=b)}else l[d]=u}),this.syncDiff(n,{joins:l,leaves:c},a,i)}static syncDiff(e,r,a,i){const{joins:n,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),i||(i=()=>{}),this.map(n,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(g=>g.presence_ref),m=u.filter(g=>h.indexOf(g.presence_ref)<0);e[l].unshift(...m)}a(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,i(l,d,c),d.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(a=>r(a,e[a]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,a)=>{const i=e[a];return"metas"in i?r[a]=i.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):r[a]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Pn;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Pn||(Pn={}));var An;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(An||(An={}));var Ce;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ce||(Ce={}));class si{constructor(e,r={config:{}},a){this.topic=e,this.params=r,this.socket=a,this.bindings={},this.state=te.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Os(this,pe.join,this.params,this.timeout),this.rejoinTimer=new Ql(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=te.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=te.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=te.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pe.reply,{},(i,n)=>{this._trigger(this._replyEventName(n),i)}),this.presence=new tr(this),this.broadcastEndpointURL=tc(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==te.closed){const{config:{broadcast:n,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(Ce.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Ce.CLOSED));const c={},d={broadcast:n,presence:o,postgres_changes:(i=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(u=>u.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(Ce.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,x=[];for(let b=0;b<g;b++){const v=m[b],{filter:{event:N,schema:y,table:p,filter:j}}=v,w=u&&u[b];if(w&&w.event===N&&w.schema===y&&w.table===p&&w.filter===j)x.push(Object.assign(Object.assign({},v),{id:w.id}));else{this.unsubscribe(),this.state=te.errored,e==null||e(Ce.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Ce.SUBSCRIBED);return}}).receive("error",u=>{this.state=te.errored,e==null||e(Ce.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ce.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,a){return this._on(e,r,a)}async send(e,r={}){var a,i;if(!this._canPush()&&e.type==="broadcast"){const{event:n,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var o,l,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&n("ok"),d.receive("ok",()=>n("ok")),d.receive("error",()=>n("error")),d.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=te.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pe.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(i=>{a=new Os(this,pe.leave,{},e),a.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,a){const i=new AbortController,n=setTimeout(()=>i.abort(),a),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(n),o}_push(e,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Os(this,e,r,a);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,r,a){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,a){var i,n;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=pe;if(a&&[l,c,d,u].indexOf(o)>=0&&a!==this._joinRef())return;let m=this._onMessage(o,r,a);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var x,b,v;return((x=g.filter)===null||x===void 0?void 0:x.event)==="*"||((v=(b=g.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(g=>g.callback(m,a)):(n=this.bindings[o])===null||n===void 0||n.filter(g=>{var x,b,v,N,y,p;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const j=g.id,w=(x=g.filter)===null||x===void 0?void 0:x.event;return j&&((b=r.ids)===null||b===void 0?void 0:b.includes(j))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const j=(y=(N=g==null?void 0:g.filter)===null||N===void 0?void 0:N.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return j==="*"||j===((p=r==null?void 0:r.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:b,table:v,commit_timestamp:N,type:y,errors:p}=x;m=Object.assign(Object.assign({},{schema:b,table:v,commit_timestamp:N,eventType:y,new:{},old:{},errors:p}),this._getPayloadRecords(x))}g.callback(m,a)})}_isClosed(){return this.state===te.closed}_isJoined(){return this.state===te.joined}_isJoining(){return this.state===te.joining}_isLeaving(){return this.state===te.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,a){const i=e.toLocaleLowerCase(),n={type:i,filter:r,callback:a};return this.bindings[i]?this.bindings[i].push(n):this.bindings[i]=[n],this}_off(e,r){const a=e.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(i=>{var n;return!(((n=i.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===a&&si.isEqual(i.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const a in e)if(e[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pe.close,{},e)}_onError(e){this._on(pe.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=te.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Cn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Cn(e.columns,e.old_record)),r}}const En=()=>{},Zf=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Qf{constructor(e,r){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zl,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=En,this.ref=0,this.logger=En,this.conn=null,this.sendBuffer=[],this.serializer=new zf,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...l)=>vr(()=>Promise.resolve().then(()=>Bt),void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${pa.websocket}`,this.httpEndpoint=tc(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const i=(a=r==null?void 0:r.params)===null||a===void 0?void 0:a.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(n,o)=>o(JSON.stringify(n)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ql(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Bf),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:qf}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(a=>a.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,a){this.logger(e,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case er.connecting:return ct.Connecting;case er.open:return ct.Open;case er.closing:return ct.Closing;default:return ct.Closed}}isConnected(){return this.connectionState()===ct.Open}channel(e,r={config:{}}){const a=`realtime:${e}`,i=this.getChannels().find(n=>n.topic===a);if(i)return i;{const n=new si(`realtime:${e}`,r,this);return this.channels.push(n),n}}push(e){const{topic:r,event:a,payload:i,ref:n}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${a} (${n})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:Ff};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(pe.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Hf,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(a=>a.topic===e&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:a,event:i,payload:n,ref:o}=r;a==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${a} ${i} ${o&&"("+o+")"||""}`,n),Array.from(this.channels).filter(l=>l._isMember(a)).forEach(l=>l._trigger(i,n,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(pe.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const a=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${a}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const a=new Blob([Zf],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}}class ai extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Z(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class ep extends ai{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ya extends ai{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var tp=globalThis&&globalThis.__awaiter||function(t,e,r,a){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((a=a.apply(t,e||[])).next())})};const rc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>vr(()=>Promise.resolve().then(()=>Bt),void 0).then(({default:a})=>a(...r)):e=fetch,(...r)=>e(...r)},rp=()=>tp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield vr(()=>Promise.resolve().then(()=>Bt),void 0)).Response:Response}),ba=t=>{if(Array.isArray(t))return t.map(r=>ba(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,a])=>{const i=r.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));e[i]=ba(a)}),e};var bt=globalThis&&globalThis.__awaiter||function(t,e,r,a){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((a=a.apply(t,e||[])).next())})};const Ms=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),sp=(t,e,r)=>bt(void 0,void 0,void 0,function*(){const a=yield rp();t instanceof a&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{e(new ep(Ms(i),t.status||500))}).catch(i=>{e(new ya(Ms(i),i))}):e(new ya(Ms(t),t))}),ap=(t,e,r,a)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a&&(i.body=JSON.stringify(a)),Object.assign(Object.assign({},i),r))};function kr(t,e,r,a,i,n){return bt(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,ap(e,a,i,n)).then(c=>{if(!c.ok)throw c;return a!=null&&a.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>sp(c,l,a))})})}function Qr(t,e,r,a){return bt(this,void 0,void 0,function*(){return kr(t,"GET",e,r,a)})}function $e(t,e,r,a,i){return bt(this,void 0,void 0,function*(){return kr(t,"POST",e,a,i,r)})}function ip(t,e,r,a,i){return bt(this,void 0,void 0,function*(){return kr(t,"PUT",e,a,i,r)})}function np(t,e,r,a){return bt(this,void 0,void 0,function*(){return kr(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function sc(t,e,r,a,i){return bt(this,void 0,void 0,function*(){return kr(t,"DELETE",e,a,i,r)})}var ae=globalThis&&globalThis.__awaiter||function(t,e,r,a){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((a=a.apply(t,e||[])).next())})};const op={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ln={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lp{constructor(e,r={},a,i){this.url=e,this.headers=r,this.bucketId=a,this.fetch=rc(i)}uploadOrUpdate(e,r,a,i){return ae(this,void 0,void 0,function*(){try{let n;const o=Object.assign(Object.assign({},Ln),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&a instanceof Blob?(n=new FormData,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c)),n.append("",a)):typeof FormData<"u"&&a instanceof FormData?(n=a,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c))):(n=a,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:n,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:d,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(n){if(Z(n))return{data:null,error:n};throw n}})}upload(e,r,a){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,a)})}uploadToSignedUrl(e,r,a,i){return ae(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),o=this._getFinalPath(n),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:Ln.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",d.cacheControl)):(c=a,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),m=yield h.json();return h.ok?{data:{path:n,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(Z(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return ae(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const n=yield $e(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:i}),o=new URL(this.url+n.url),l=o.searchParams.get("token");if(!l)throw new ai("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}update(e,r,a){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,a)})}move(e,r,a){return ae(this,void 0,void 0,function*(){try{return{data:yield $e(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Z(i))return{data:null,error:i};throw i}})}copy(e,r,a){return ae(this,void 0,void 0,function*(){try{return{data:{path:(yield $e(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Z(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,a){return ae(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),n=yield $e(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const o=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${o}`)},{data:n,error:null}}catch(i){if(Z(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,a){return ae(this,void 0,void 0,function*(){try{const i=yield $e(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),n=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${n}`):null})),error:null}}catch(i){if(Z(i))return{data:null,error:i};throw i}})}download(e,r){return ae(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=n?`?${n}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Qr(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Z(l))return{data:null,error:l};throw l}})}info(e){return ae(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const a=yield Qr(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ba(a),error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}exists(e){return ae(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield np(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(Z(a)&&a instanceof ya){const i=a.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:a}}throw a}})}getPublicUrl(e,r){const a=this._getFinalPath(e),i=[],n=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";n!==""&&i.push(n);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${a}${d}`)}}}remove(e){return ae(this,void 0,void 0,function*(){try{return{data:yield sc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}list(e,r,a){return ae(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},op),r),{prefix:e||""});return{data:yield $e(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},a),error:null}}catch(i){if(Z(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const cp="2.7.1",dp={"X-Client-Info":`storage-js/${cp}`};var vt=globalThis&&globalThis.__awaiter||function(t,e,r,a){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((a=a.apply(t,e||[])).next())})};class up{constructor(e,r={},a){this.url=e,this.headers=Object.assign(Object.assign({},dp),r),this.fetch=rc(a)}listBuckets(){return vt(this,void 0,void 0,function*(){try{return{data:yield Qr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}})}getBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield Qr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return vt(this,void 0,void 0,function*(){try{return{data:yield $e(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}updateBucket(e,r){return vt(this,void 0,void 0,function*(){try{return{data:yield ip(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}emptyBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield $e(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}deleteBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield sc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}}class hp extends up{constructor(e,r={},a){super(e,r,a)}from(e){return new lp(this.url,this.headers,e,this.fetch)}}const mp="2.50.2";let Gt="";typeof Deno<"u"?Gt="deno":typeof document<"u"?Gt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gt="react-native":Gt="node";const gp={"X-Client-Info":`supabase-js-${Gt}/${mp}`},fp={headers:gp},pp={schema:"public"},xp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yp={};var bp=globalThis&&globalThis.__awaiter||function(t,e,r,a){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((a=a.apply(t,e||[])).next())})};const vp=t=>{let e;return t?e=t:typeof fetch>"u"?e=Vl:e=fetch,(...r)=>e(...r)},wp=()=>typeof Headers>"u"?Fl:Headers,kp=(t,e,r)=>{const a=vp(r),i=wp();return(n,o)=>bp(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new i(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),a(n,Object.assign(Object.assign({},o),{headers:d}))})};var jp=globalThis&&globalThis.__awaiter||function(t,e,r,a){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((a=a.apply(t,e||[])).next())})};function Np(t){return t.endsWith("/")?t:t+"/"}function _p(t,e){var r,a;const{db:i,auth:n,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,m={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},d),n),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(a=l==null?void 0:l.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>jp(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const ac="2.70.0",Nt=30*1e3,va=3,$s=va*Nt,Sp="http://localhost:9999",Cp="supabase.auth.token",Tp={"X-Client-Info":`gotrue-js/${ac}`},wa="X-Supabase-Api-Version",ic={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Pp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ap=6e5;class ii extends Error{constructor(e,r,a){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function D(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Ep extends ii{constructor(e,r,a){super(e,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function Lp(t){return D(t)&&t.name==="AuthApiError"}class nc extends ii{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class et extends ii{constructor(e,r,a,i){super(e,a,i),this.name=r,this.status=a}}class Oe extends et{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Rp(t){return D(t)&&t.name==="AuthSessionMissingError"}class Pr extends et{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ar extends et{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Er extends et{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Dp(t){return D(t)&&t.name==="AuthImplicitGrantRedirectError"}class Rn extends et{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ka extends et{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Us(t){return D(t)&&t.name==="AuthRetryableFetchError"}class Dn extends et{constructor(e,r,a){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class rr extends et{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const es="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),In=` 	
\r=`.split(""),Ip=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<In.length;e+=1)t[In[e].charCodeAt(0)]=-2;for(let e=0;e<es.length;e+=1)t[es[e].charCodeAt(0)]=e;return t})();function On(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;r(es[a]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;r(es[a]),e.queuedBits-=6}}function oc(t,e,r){const a=Ip[t];if(a>-1)for(e.queue=e.queue<<6|a,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Mn(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},a={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},n=o=>{$p(o,a,r)};for(let o=0;o<t.length;o+=1)oc(t.charCodeAt(o),i,n);return e.join("")}function Op(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Mp(t,e){for(let r=0;r<t.length;r+=1){let a=t.charCodeAt(r);if(a>55295&&a<=56319){const i=(a-55296)*1024&65535;a=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}Op(a,e)}}function $p(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let a=1;a<6;a+=1)if(!(t>>7-a&1)){e.utf8seq=a;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Up(t){const e=[],r={queue:0,queuedBits:0},a=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)oc(t.charCodeAt(i),r,a);return new Uint8Array(e)}function Bp(t){const e=[];return Mp(t,r=>e.push(r)),new Uint8Array(e)}function Vp(t){const e=[],r={queue:0,queuedBits:0},a=i=>{e.push(i)};return t.forEach(i=>On(i,r,a)),On(null,r,a),e.join("")}function Fp(t){return Math.round(Date.now()/1e3)+t}function qp(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const fe=()=>typeof window<"u"&&typeof document<"u",at={tested:!1,writable:!1},sr=()=>{if(!fe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(at.tested)return at.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),at.tested=!0,at.writable=!0}catch{at.tested=!0,at.writable=!1}return at.writable};function Hp(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,n)=>{e[n]=i})}catch{}return r.searchParams.forEach((a,i)=>{e[i]=a}),e}const lc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>vr(()=>Promise.resolve().then(()=>Bt),void 0).then(({default:a})=>a(...r)):e=fetch,(...r)=>e(...r)},zp=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",cc=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Lr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Rr=async(t,e)=>{await t.removeItem(e)};class vs{constructor(){this.promise=new vs.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}vs.promiseConstructor=Promise;function Bs(t){const e=t.split(".");if(e.length!==3)throw new rr("Invalid JWT structure");for(let a=0;a<e.length;a++)if(!Pp.test(e[a]))throw new rr("JWT not in base64url format");return{header:JSON.parse(Mn(e[0])),payload:JSON.parse(Mn(e[1])),signature:Up(e[2]),raw:{header:e[0],payload:e[1]}}}async function Wp(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Gp(t,e){return new Promise((a,i)=>{(async()=>{for(let n=0;n<1/0;n++)try{const o=await t(n);if(!e(n,null,o)){a(o);return}}catch(o){if(!e(n,o)){i(o);return}}})()})}function Kp(t){return("0"+t.toString(16)).substr(-2)}function Jp(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let i="";for(let n=0;n<56;n++)i+=r.charAt(Math.floor(Math.random()*a));return i}return crypto.getRandomValues(e),Array.from(e,Kp).join("")}async function Xp(t){const r=new TextEncoder().encode(t),a=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(a);return Array.from(i).map(n=>String.fromCharCode(n)).join("")}async function Yp(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Xp(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wt(t,e,r=!1){const a=Jp();let i=a;r&&(i+="/PASSWORD_RECOVERY"),await cc(t,`${e}-code-verifier`,i);const n=await Yp(a);return[n,a===n?"plain":"s256"]}const Zp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Qp(t){const e=t.headers.get(wa);if(!e||!e.match(Zp))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ex(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function tx(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const rx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function kt(t){if(!rx.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var sx=globalThis&&globalThis.__rest||function(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(t);i<a.length;i++)e.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(t,a[i])&&(r[a[i]]=t[a[i]]);return r};const lt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ax=[502,503,504];async function $n(t){var e;if(!zp(t))throw new ka(lt(t),0);if(ax.includes(t.status))throw new ka(lt(t),t.status);let r;try{r=await t.json()}catch(n){throw new nc(lt(n),n)}let a;const i=Qp(t);if(i&&i.getTime()>=ic["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new Dn(lt(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(a==="session_not_found")throw new Oe}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0))throw new Dn(lt(r),t.status,r.weak_password.reasons);throw new Ep(lt(r),t.status||500,a)}const ix=(t,e,r,a)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(a),Object.assign(Object.assign({},i),r))};async function M(t,e,r,a){var i;const n=Object.assign({},a==null?void 0:a.headers);n[wa]||(n[wa]=ic["2024-01-01"].name),a!=null&&a.jwt&&(n.Authorization=`Bearer ${a.jwt}`);const o=(i=a==null?void 0:a.query)!==null&&i!==void 0?i:{};a!=null&&a.redirectTo&&(o.redirect_to=a.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await nx(t,e,r+l,{headers:n,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(c):{data:Object.assign({},c),error:null}}async function nx(t,e,r,a,i,n){const o=ix(e,a,i,n);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new ka(lt(c),0)}if(l.ok||await $n(l),a!=null&&a.noResolveJson)return l;try{return await l.json()}catch(c){await $n(c)}}function Se(t){var e;let r=null;dx(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Fp(t.expires_in)));const a=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:a},error:null}}function Un(t){const e=Se(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Be(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function ox(t){return{data:t,error:null}}function lx(t){const{action_link:e,email_otp:r,hashed_token:a,redirect_to:i,verification_type:n}=t,o=sx(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:a,redirect_to:i,verification_type:n},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function cx(t){return t}function dx(t){return t.access_token&&t.refresh_token&&t.expires_in}const Vs=["global","local","others"];var ux=globalThis&&globalThis.__rest||function(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(t);i<a.length;i++)e.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(t,a[i])&&(r[a[i]]=t[a[i]]);return r};class hx{constructor({url:e="",headers:r={},fetch:a}){this.url=e,this.headers=r,this.fetch=lc(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=Vs[0]){if(Vs.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Vs.join(", ")}`);try{return await M(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(a){if(D(a))return{data:null,error:a};throw a}}async inviteUserByEmail(e,r={}){try{return await M(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Be})}catch(a){if(D(a))return{data:{user:null},error:a};throw a}}async generateLink(e){try{const{options:r}=e,a=ux(e,["options"]),i=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(i.new_email=a==null?void 0:a.newEmail,delete i.newEmail),await M(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:lx,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(D(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await M(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Be})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,a,i,n,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await M(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(n=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&n!==void 0?n:""},xform:cx});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(x.split(";")[1].split("=")[1]);d[`${v}Page`]=b}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(D(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){kt(e);try{return await M(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Be})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){kt(e);try{return await M(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Be})}catch(a){if(D(a))return{data:{user:null},error:a};throw a}}async deleteUser(e,r=!1){kt(e);try{return await M(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Be})}catch(a){if(D(a))return{data:{user:null},error:a};throw a}}async _listFactors(e){kt(e.userId);try{const{data:r,error:a}=await M(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:a}}catch(r){if(D(r))return{data:null,error:r};throw r}}async _deleteFactor(e){kt(e.userId),kt(e.id);try{return{data:await M(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}}const mx={getItem:t=>sr()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{sr()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{sr()&&globalThis.localStorage.removeItem(t)}};function Bn(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function gx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const jt={debug:!!(globalThis&&sr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class fx extends dc{}async function px(t,e,r){jt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const a=new globalThis.AbortController;return e>0&&setTimeout(()=>{a.abort(),jt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async i=>{if(i){jt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{jt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw jt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new fx(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(jt.debug)try{const n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}gx();const xx={url:Sp,storageKey:Cp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Tp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Vn(t,e,r){return await r()}class mr{constructor(e){var r,a;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mr.nextInstanceID,mr.nextInstanceID+=1,this.instanceID>0&&fe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},xx),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new hx({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=lc(i.fetch),this.lock=i.lock||Vn,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:fe()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=px:this.lock=Vn,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:sr()?this.storage=mx:(this.memoryStorage={},this.storage=Bn(this.memoryStorage)):(this.memoryStorage={},this.storage=Bn(this.memoryStorage)),fe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ac}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Hp(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),fe()&&this.detectSessionInUrl&&a!=="none"){const{data:i,error:n}=await this._getSessionFromURL(r,a);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),Dp(n)){const c=(e=n.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:n}}return await this._removeSession(),{error:n}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return D(r)?{error:r}:{error:new nc("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,a,i;try{const n=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Se}),{data:o,error:l}=n;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(D(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var r,a,i;try{let n;if("email"in e){const{email:u,password:h,options:m}=e;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await wt(this.storage,this.storageKey)),n=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:x},xform:Se})}else if("phone"in e){const{phone:u,password:h,options:m}=e;n=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(a=m==null?void 0:m.data)!==null&&a!==void 0?a:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Se})}else throw new Ar("You must provide either an email or phone number and a password");const{data:o,error:l}=n;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(D(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let r;if("email"in e){const{email:n,password:o,options:l}=e;r=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Un})}else if("phone"in e){const{phone:n,password:o,options:l}=e;r=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Un})}else throw new Ar("You must provide either an email or phone number and a password");const{data:a,error:i}=r;return i?{data:{user:null,session:null},error:i}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Pr}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:i})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,a,i,n;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,a,i,n,o,l,c,d,u,h,m,g;let x,b;if("message"in e)x=e.message,b=e.signature;else{const{chain:v,wallet:N,statement:y,options:p}=e;let j;if(fe())if(typeof N=="object")j=N;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))j=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=N}const w=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const C=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),y?{statement:y}:null));let A;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")A=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)A=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)x=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),b=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${w.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(i=(a=p==null?void 0:p.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((n=p==null?void 0:p.signInWithSolana)===null||n===void 0)&&n.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((d=p==null?void 0:p.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(u=p==null?void 0:p.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const C=await j.signMessage(new TextEncoder().encode(x),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=C}}try{const{data:v,error:N}=await M(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Vp(b)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Se});if(N)throw N;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Pr}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:N})}catch(v){if(D(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const r=await Lr(this.storage,`${this.storageKey}-code-verifier`),[a,i]=(r??"").split("/");try{const{data:n,error:o}=await M(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:a},xform:Se});if(await Rr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new Pr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:i??null}),error:o})}catch(n){if(D(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:r,provider:a,token:i,access_token:n,nonce:o}=e,l=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:i,access_token:n,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Se}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Pr}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,a,i,n,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await wt(this.storage,this.storageKey));const{error:h}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Ar("You must provide either an email or phone number.")}catch(l){if(D(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,a;try{let i,n;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,n=(a=e.options)===null||a===void 0?void 0:a.captchaToken);const{data:o,error:l}=await M(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:i,xform:Se});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(D(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,a,i;try{let n=null,o=null;return this.flowType==="pkce"&&([n,o]=await wt(this.storage,this.storageKey)),await M(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:o}),headers:this.headers,xform:ox})}catch(n){if(D(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:a}=e;if(a)throw a;if(!r)throw new Oe;const{error:i}=await M(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(D(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:a,type:i,options:n}=e,{error:o}=await M(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},redirectTo:n==null?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:a,type:i,options:n}=e,{data:o,error:l}=await M(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ar("You must provide either an email or phone number and a type")}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Lr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const a=e.expires_at?e.expires_at*1e3-Date.now()<$s:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",e.expires_at),!a){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Be}):await this._useSession(async r=>{var a,i,n;const{data:o,error:l}=r;if(l)throw l;return!(!((a=o.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Oe}:await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:void 0,xform:Be})})}catch(r){if(D(r))return Rp(r)&&(await this._removeSession(),await Rr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async a=>{const{data:i,error:n}=a;if(n)throw n;if(!i.session)throw new Oe;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await wt(this.storage,this.storageKey));const{data:d,error:u}=await M(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Be});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(a){if(D(a))return{data:{user:null},error:a};throw a}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Oe;const r=Date.now()/1e3;let a=r,i=!0,n=null;const{payload:o}=Bs(e.access_token);if(o.exp&&(a=o.exp,i=a<=r),i){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};n=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;n={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(r){if(D(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var a;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(a=o.session)!==null&&a!==void 0?a:void 0}if(!(e!=null&&e.refresh_token))throw new Oe;const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!fe())throw new Er("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Er(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Rn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Er("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Rn("No code detected.");const{data:y,error:p}=await this._exchangeCodeForSession(e.code);if(p)throw p;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:i,access_token:n,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!n||!l||!o||!d)throw new Er("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;c&&(m=parseInt(c));const g=m-u;g*1e3<=Nt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const x=m-h;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,u);const{data:b,error:v}=await this._getUser(n);if(v)throw v;const N={provider_token:a,provider_refresh_token:i,access_token:n,expires_in:h,expires_at:m,refresh_token:o,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:e.type},error:null}}catch(a){if(D(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Lr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:i,error:n}=r;if(n)return{error:n};const o=(a=i.session)===null||a===void 0?void 0:a.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Lp(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Rr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=qp(),a={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(e){return await this._useSession(async r=>{var a,i;try{const{data:{session:n},error:o}=r;if(o)throw o;await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,r={}){let a=null,i=null;this.flowType==="pkce"&&([a,i]=await wt(this.storage,this.storageKey,!0));try{return await M(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:a,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(n){if(D(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:a,error:i}=await this._useSession(async n=>{var o,l,c,d,u;const{data:h,error:m}=n;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await M(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return fe()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:e.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(D(a))return{data:{provider:e.provider,url:null},error:a};throw a}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var a,i;const{data:n,error:o}=r;if(o)throw o;return await M(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(a=n.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await Gp(async i=>(i>0&&await Wp(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await M(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Se})),(i,n)=>{const o=200*Math.pow(2,i);return n&&Us(n)&&Date.now()+o-a<Nt})}catch(a){if(this._debug(r,"error",a),D(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",a),fe()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:e,url:a},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Lr(this.storage,this.storageKey);if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((e=a.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<$s;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${$s}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:n}=await this._callRefreshToken(a.refresh_token);n&&(console.error(n),Us(n)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",n),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,a;if(!e)throw new Oe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new vs;const{data:n,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!n.session)throw new Oe;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const l={session:n.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(n){if(this._debug(i,"error",n),D(n)){const o={session:null,error:n};return Us(n)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(n),n}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,a=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:e,session:r});const n=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){n.push(c)}});if(await Promise.all(o),n.length>0){for(let l=0;l<n.length;l+=1)console.error(n[l]);throw n[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await cc(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Rr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&fe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Nt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((a.expires_at*1e3-e)/Nt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Nt}ms, refresh threshold is ${va} ticks`),i<=va&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof dc)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,a){const i=[`provider=${encodeURIComponent(r)}`];if(a!=null&&a.redirectTo&&i.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&i.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[n,o]=await wt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(a!=null&&a.queryParams){const n=new URLSearchParams(a.queryParams);i.push(n.toString())}return a!=null&&a.skipBrowserRedirect&&i.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var a;const{data:i,error:n}=r;return n?{data:null,error:n}:await M(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var a,i;const{data:n,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await M(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:i,error:n}=r;if(n)return{data:null,error:n};const{data:o,error:l}=await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(D(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:i,error:n}=r;return n?{data:null,error:n}:await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(D(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:a}=await this._challenge({factorId:e.factorId});return a?{data:null,error:a}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=(e==null?void 0:e.factors)||[],i=a.filter(o=>o.factor_type==="totp"&&o.status==="verified"),n=a.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:a,totp:i,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,a;const{data:{session:i},error:n}=e;if(n)return{data:null,error:n};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Bs(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((a=(r=i.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let a=r.keys.find(o=>o.kid===e);if(a||(a=this.jwks.keys.find(o=>o.kid===e),a&&this.jwks_cached_at+Ap>Date.now()))return a;const{data:i,error:n}=await M(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;if(!i.keys||i.keys.length===0)throw new rr("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),a=i.keys.find(o=>o.kid===e),!a)throw new rr("No matching signing key found in JWKS");return a}async getClaims(e,r={keys:[]}){try{let a=e;if(!a){const{data:g,error:x}=await this.getSession();if(x||!g.session)return{data:null,error:x};a=g.session.access_token}const{header:i,payload:n,signature:o,raw:{header:l,payload:c}}=Bs(a);if(ex(n.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(a);if(g)throw g;return{data:{claims:n,header:i,signature:o},error:null}}const d=tx(i.alg),u=await this.fetchJwk(i.kid,r),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Bp(`${l}.${c}`)))throw new rr("Invalid JWT signature");return{data:{claims:n,header:i,signature:o},error:null}}catch(a){if(D(a))return{data:null,error:a};throw a}}}mr.nextInstanceID=0;const yx=mr;class bx extends yx{constructor(e){super(e)}}var vx=globalThis&&globalThis.__awaiter||function(t,e,r,a){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((a=a.apply(t,e||[])).next())})};class wx{constructor(e,r,a){var i,n,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=Np(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:pp,realtime:yp,auth:Object.assign(Object.assign({},xp),{storageKey:d}),global:fp},h=_p(a??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(n=h.global.headers)!==null&&n!==void 0?n:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=kp(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new $f(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new gf(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new hp(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},a={}){return this.rest.rpc(e,r,a)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return vx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(e=a.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:a,storage:i,storageKey:n,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bx({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:n,autoRefreshToken:e,persistSession:r,detectSessionInUrl:a,storage:i,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Qf(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(e,r,a){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kx=(t,e,r)=>new wx(t,e,r),jx="https://bpbbrgsuuaxirkccteuu.supabase.co",Nx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwYmJyZ3N1dWF4aXJrY2N0ZXV1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA4NDc0MzYsImV4cCI6MjA2NjQyMzQzNn0.LPBOUkoCQ3k1xsxVpczYhaEy1VtFT6kvizTkfVqchc4",R=kx(jx,Nx),Fn=()=>{const{user:t}=le(),[e,r]=f.useState(null),[a,i]=f.useState(!0);if(f.useEffect(()=>{(async()=>{if(!t){i(!1);return}try{i(!0),console.log("Loading dashboard data for user:",t.id);const[h,m,g]=await Promise.allSettled([R.from("links").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}),R.from("projects").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}),R.from("clicks").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(100)]),x=h.status==="fulfilled"&&!h.value.error?h.value.data||[]:[],b=m.status==="fulfilled"&&!m.value.error?m.value.data||[]:[],v=g.status==="fulfilled"&&!g.value.error?g.value.data||[]:[];console.log("Loaded data:",{links:x.length,projects:b.length,clicks:v.length});const N=x.reduce((T,I)=>T+(I.total_clicks||0),0),y=x.filter(T=>T.is_active!==!1).length,p=v.filter(T=>{const I=new Date(T.created_at),X=new Date;return X.setDate(X.getDate()-7),I>=X}).length,j=x.length>0?(N/x.length*100).toFixed(1):"0.0",w=x.sort((T,I)=>(I.total_clicks||0)-(T.total_clicks||0)).slice(0,5).map(T=>({...T,clickCount:T.total_clicks||0})),C=[];for(let T=6;T>=0;T--){const I=new Date;I.setDate(I.getDate()-T);const X=I.toLocaleDateString("en-US",{month:"short",day:"numeric"}),Y=v.filter(q=>new Date(q.created_at).toDateString()===I.toDateString()).length;C.push({date:X,clicks:Y})}const A=b.map(T=>({...T,linkCount:x.filter(I=>I.project_id===T.id).length,clickCount:x.filter(I=>I.project_id===T.id).reduce((I,X)=>I+(X.total_clicks||0),0)})),E={totalClicks:N,totalLinks:x.length,activeLinks:y,recentClicks:p,clickRate:parseFloat(j)};r({metrics:E,topLinks:w,chartData:C,projects:A,links:x})}catch(h){console.error("Failed to load dashboard data:",h),O.error("Failed to load dashboard data"),r({metrics:{totalClicks:0,totalLinks:0,activeLinks:0,recentClicks:0,clickRate:0},topLinks:[],chartData:[],projects:[],links:[]})}finally{i(!1)}})()},[t]),a)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});if(!e)return s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load dashboard data"})});const{metrics:n,topLinks:o,chartData:l,projects:c,links:d}=e;return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Welcome back! Here's your link performance overview."})]}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.location.href="/links",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsx("span",{children:"Create Link"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Total Clicks"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:n.totalClicks.toLocaleString()})]}),s.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:s.jsx(Ml,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]}),s.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[s.jsx(Fe,{className:"w-4 h-4 text-green-500 mr-1"}),s.jsx("span",{className:"text-green-500 font-medium",children:n.recentClicks}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"this week"})]})]}),s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Total Links"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:n.totalLinks.toLocaleString()})]}),s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:s.jsx(Q,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]}),s.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[s.jsx(da,{className:"w-4 h-4 text-blue-500 mr-1"}),s.jsx("span",{className:"text-blue-500 font-medium",children:n.activeLinks}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"active"})]})]}),s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Click Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:[n.clickRate,"%"]})]}),s.jsx("div",{className:"p-3 bg-cyan-100 dark:bg-cyan-900/20 rounded-lg",children:s.jsx(Lt,{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400"})})]}),s.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[s.jsx(We,{className:"w-4 h-4 text-yellow-500 mr-1"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"avg per link"})]})]}),s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Projects"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:c.length})]}),s.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:s.jsx(hr,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]}),s.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[s.jsx(Za,{className:"w-4 h-4 text-purple-500 mr-1"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"organized"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(S.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Click Analytics"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last 7 days"})]}),l.length>0?s.jsx(Dr,{width:"100%",height:300,children:s.jsxs(gc,{data:l,children:[s.jsx(Fs,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),s.jsx(qs,{dataKey:"date",stroke:"#64748b",fontSize:12}),s.jsx(Hs,{stroke:"#64748b",fontSize:12}),s.jsx(Ir,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"8px",color:"#0f172a"}}),s.jsx(fc,{type:"monotone",dataKey:"clicks",stroke:"#6366f1",strokeWidth:3,dot:{fill:"#6366f1",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#6366f1",strokeWidth:2}})]})}):s.jsx("div",{className:"flex items-center justify-center h-64 text-gray-600 dark:text-gray-400",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Lt,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No click data available yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Create some links to see analytics"})]})})]}),s.jsxs(S.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Top Performing Links"}),s.jsx(ft,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})]}),s.jsx("div",{className:"space-y-4",children:o.length>0?o.map((u,h)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded",children:["#",h+1]}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:u.title||"Untitled Link"})]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mt-1",children:["/",u.short_code]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:u.clickCount}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"clicks"})]})]},u.id)):s.jsxs("div",{className:"text-center py-8 text-gray-600 dark:text-gray-400",children:[s.jsx(Q,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No links created yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Create your first link to see performance"})]})})]})]}),s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Projects"}),s.jsx("button",{onClick:()=>window.location.href="/links",className:"text-purple-600 hover:text-purple-700 text-sm font-medium",children:"View All"})]}),c.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.slice(0,6).map(u=>s.jsxs(S.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.location.href="/links",className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:shadow-md transition-all duration-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:u.name}),s.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded",children:[u.linkCount||0," links"]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:u.description||"No description"}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:new Date(u.created_at).toLocaleDateString()}),s.jsxs("span",{children:[u.clickCount||0," clicks"]})]})]},u.id))}):s.jsxs("div",{className:"text-center py-8 text-gray-600 dark:text-gray-400",children:[s.jsx(hr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No projects created yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Create a project to organize your links"})]})]}),!1]})},_x=({isOpen:t,onClose:e,onSave:r})=>{const[a,i]=f.useState({scriptInjectionEnabled:!1,trackingScripts:[],scriptDelay:2,scriptPosition:"head"}),[n,o]=f.useState({name:"",code:"",enabled:!0,position:"head",delay:0}),[l,c]=f.useState({}),[d,u]=f.useState(!1),h=[{name:"Google Analytics 4",code:`<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"><\/script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'GA_MEASUREMENT_ID');
<\/script>`,position:"head"},{name:"Facebook Pixel",code:`<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', 'YOUR_PIXEL_ID');
fbq('track', 'PageView');
<\/script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=YOUR_PIXEL_ID&ev=PageView&noscript=1"
/></noscript>`,position:"head"},{name:"Google Tag Manager",code:`<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-XXXXXXX');<\/script>
<!-- End Google Tag Manager -->`,position:"head"},{name:"TikTok Pixel",code:`<script>
!function (w, d, t) {
  w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};
  ttq.load('YOUR_PIXEL_ID');
  ttq.page();
}(window, document, 'ttq');
<\/script>`,position:"head"},{name:"Hotjar Tracking",code:`<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:YOUR_HOTJAR_ID,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
<\/script>`,position:"head"}],m=y=>{const p={...y,id:Date.now(),enabled:!0,delay:0};i(j=>({...j,trackingScripts:[...j.trackingScripts,p],scriptInjectionEnabled:!0})),O.success(`${y.name} added successfully!`)},g=()=>{if(!n.name.trim()||!n.code.trim()){O.error("Please provide both name and code");return}const y={...n,id:Date.now()};i(p=>({...p,trackingScripts:[...p.trackingScripts,y],scriptInjectionEnabled:!0})),o({name:"",code:"",enabled:!0,position:"head",delay:0}),O.success("Custom script added successfully!")},x=y=>{i(p=>({...p,trackingScripts:p.trackingScripts.filter(j=>j.id!==y)}))},b=y=>{i(p=>({...p,trackingScripts:p.trackingScripts.map(j=>j.id===y?{...j,enabled:!j.enabled}:j)}))},v=async y=>{try{await navigator.clipboard.writeText(y),u(!0),O.success("Code copied to clipboard!"),setTimeout(()=>u(!1),2e3)}catch{O.error("Failed to copy code")}},N=()=>{r(a),e()};return t?s.jsx(br,{children:s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(S.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white dark:bg-gray-900 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl text-white",children:s.jsx(ve,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Tracking & Scripts"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add tracking pixels, analytics, and custom scripts"})]})]}),s.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:s.jsx(ms,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Global Settings"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:a.scriptInjectionEnabled,onChange:y=>i(p=>({...p,scriptInjectionEnabled:y.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Script Injection"})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Default Position"}),s.jsxs("select",{value:a.scriptPosition,onChange:y=>i(p=>({...p,scriptPosition:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[s.jsx("option",{value:"head",children:"Head"}),s.jsx("option",{value:"body",children:"Body"}),s.jsx("option",{value:"footer",children:"Footer"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Default Delay (seconds)"}),s.jsx("input",{type:"number",value:a.scriptDelay,onChange:y=>i(p=>({...p,scriptDelay:parseInt(y.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",min:"0",max:"30"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Popular Tracking Scripts"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((y,p)=>s.jsxs(S.div,{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",whileHover:{scale:1.02},children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:y.name}),s.jsx("button",{onClick:()=>m(y),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors",children:"Add"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Position: ",y.position]}),s.jsx("button",{onClick:()=>c(j=>({...j,[p]:!j[p]})),className:"text-xs text-blue-600 hover:text-blue-700 dark:text-blue-400",children:l[p]?"Hide Code":"View Code"})]}),l[p]&&s.jsx(S.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-3",children:s.jsxs("div",{className:"relative",children:[s.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded text-xs overflow-x-auto max-h-32",children:s.jsx("code",{children:y.code})}),s.jsx("button",{onClick:()=>v(y.code),className:"absolute top-2 right-2 p-1 bg-white dark:bg-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:d?s.jsx(Bg,{className:"w-3 h-3 text-green-600"}):s.jsx(cr,{className:"w-3 h-3 text-gray-600"})})]})})]},p))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Add Custom Script"}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Script Name"}),s.jsx("input",{type:"text",value:n.name,onChange:y=>o(p=>({...p,name:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"My Custom Script"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Position"}),s.jsxs("select",{value:n.position,onChange:y=>o(p=>({...p,position:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"head",children:"Head"}),s.jsx("option",{value:"body",children:"Body"}),s.jsx("option",{value:"footer",children:"Footer"})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Script Code"}),s.jsx("textarea",{value:n.code,onChange:y=>o(p=>({...p,code:y.target.value})),rows:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm",placeholder:`<script>
// Your custom script here
console.log('Hello World!');
<\/script>`})]}),s.jsx("button",{onClick:g,className:"w-full py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"Add Custom Script"})]})]}),a.trackingScripts.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Active Scripts (",a.trackingScripts.filter(y=>y.enabled).length,")"]}),s.jsx("div",{className:"space-y-3",children:a.trackingScripts.map(y=>s.jsxs(S.div,{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>b(y.id),className:`p-1 rounded ${y.enabled?"text-green-600 hover:text-green-700":"text-gray-400 hover:text-gray-600"}`,children:y.enabled?s.jsx(be,{className:"w-4 h-4"}):s.jsx(Je,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:y.name}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Position: ",y.position," • Delay: ",y.delay,"s"]})]})]}),s.jsx("button",{onClick:()=>x(y.id),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:s.jsx(Ut,{className:"w-4 h-4"})})]},y.id))})]})]})}),s.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[s.jsx("button",{onClick:e,className:"px-6 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:N,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Save Configuration"})]})]})})}):null},_t=({title:t,description:e,examples:r=[],position:a="top"})=>{const[i,n]=f.useState(!1);return s.jsxs("div",{className:"relative inline-block",children:[s.jsx("button",{type:"button",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:()=>n(!i),onFocus:()=>n(!0),onBlur:()=>n(!1),className:"p-1 text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded","aria-label":`More information about ${t}`,"aria-expanded":i,"aria-describedby":i?"tooltip-content":void 0,children:s.jsx(ei,{className:"w-4 h-4"})}),s.jsx(br,{children:i&&s.jsxs(S.div,{id:"tooltip-content",role:"tooltip",initial:{opacity:0,scale:.95,y:a==="top"?10:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:a==="top"?10:-10},className:`absolute z-50 w-72 sm:w-80 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 p-4 ${a==="top"?"bottom-full mb-2":"top-full mt-2"} left-1/2 transform -translate-x-1/2`,style:{maxWidth:"calc(100vw - 2rem)",left:"clamp(1rem, 50%, calc(100vw - 1rem - 100%))"},children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm break-words",children:t}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed break-words",children:e}),r.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Examples:"}),s.jsx("ul",{className:"space-y-1",children:r.map((o,l)=>s.jsxs("li",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-start",children:[s.jsx("span",{className:"text-blue-500 mr-2 flex-shrink-0",children:"•"}),s.jsx("span",{className:"break-words",children:o})]},l))})]})]}),s.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2 w-3 h-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rotate-45 ${a==="top"?"top-full -mt-2 border-t-0 border-l-0":"bottom-full -mb-2 border-b-0 border-r-0"}`})]})})]})},Sx=({isOpen:t,onClose:e,onSubmit:r,linkType:a,projectData:i,initialData:n=null})=>{var V,ke,K,ge,De,je,Ft;const o=f.useRef(null),[l,c]=f.useState({title:(n==null?void 0:n.title)||"",customAlias:(n==null?void 0:n.short_code)||"",rotationUrls:(n==null?void 0:n.rotation_urls)||[{url:"",weight:100,name:"Original"}],geoTargeting:{enabled:!1,allowedCountries:[],blockedCountries:[],redirectRules:{},fallbackUrl:""},timeTargeting:{enabled:!1,startsAt:"",expiresAt:"",allowedDays:[],allowedHours:{start:"09:00",end:"17:00"},timezone:"America/New_York"},utmSource:"",utmMedium:"",utmCampaign:"",utmTerm:"",utmContent:"",cloakingEnabled:a==="cloaked",cloakPage:{title:"Loading...",description:"Please wait while we redirect you...",backgroundColor:"#ffffff",textColor:"#000000",showLoader:!0,customHtml:""},script_injection_enabled:!1,tracking_scripts:[],script_delay:2,script_position:"head",password:"",clickLimit:"",expiresAt:"",deviceTargeting:{enabled:!1,allowedDevices:["desktop","mobile","tablet"]},ipBlocking:{enabled:!1,blockedIps:[],allowedIps:[]}}),[d,u]=f.useState("basic"),[h,m]=f.useState(!1),[g,x]=f.useState(!1);f.useState(null),f.useEffect(()=>{const k=_=>{o.current&&!o.current.contains(_.target)&&e()};return t&&(document.addEventListener("mousedown",k),document.body.style.overflow="hidden"),()=>{document.removeEventListener("mousedown",k),document.body.style.overflow="unset"}},[t,e]);const b=["United States","Canada","United Kingdom","Germany","France","Italy","Spain","Australia","Japan","China","India","Brazil","Mexico","Russia","South Korea"],v=["America/New_York","America/Los_Angeles","America/Chicago","America/Denver","Europe/London","Europe/Paris","Europe/Berlin","Europe/Rome","Asia/Tokyo","Asia/Shanghai","Asia/Mumbai","Asia/Seoul","Australia/Sydney","Australia/Melbourne"],N=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],y={basic:{title:"Basic Link Settings",description:"Set up the fundamental properties of your link including the title, destination URL, and custom alias.",tips:["Choose a descriptive title to easily identify your link later","Custom alias creates a memorable short URL (e.g., yoursite.com/my-campaign)","Leave alias empty to auto-generate a random code"]},rotation:{title:"A/B Testing & Traffic Splitting",description:"Split your traffic between multiple destination URLs to test which performs better.",tips:["Add multiple URLs to test different landing pages","Set weight percentages to control traffic distribution","Total weight must equal 100% for proper splitting","Great for testing different offers or page designs"]},geo:{title:"Geographic Targeting",description:"Redirect visitors to different URLs based on their country or location.",tips:["Show different content to visitors from different countries","Useful for compliance with local laws and regulations","Set a fallback URL for blocked or unspecified countries","Perfect for international campaigns"]},time:{title:"Time-Based Targeting",description:"Control when your link is active and redirect users based on time and date.",tips:["Schedule campaigns to start and end automatically","Restrict access to specific days of the week","Set business hours for your links","Perfect for limited-time offers and events"]},utm:{title:"UTM Campaign Tracking",description:"Add tracking parameters to measure campaign performance in Google Analytics.",tips:["UTM Source: Where traffic comes from (google, facebook, email)","UTM Medium: How traffic arrives (cpc, social, email)","UTM Campaign: Your campaign name (spring_sale, product_launch)","Essential for measuring marketing ROI"]},cloaking:{title:"Link Cloaking & Landing Pages",description:"Hide your destination URL and show a custom landing page before redirecting.",tips:["Protects your destination URL from being seen","Creates a branded experience before redirect","Useful for affiliate marketing and brand protection","Can include custom HTML and styling"]},tracking:{title:"Tracking Scripts & Pixels",description:"Add analytics codes, Facebook pixels, and other tracking scripts to your links.",tips:["Track conversions with Facebook Pixel, Google Analytics","Add retargeting pixels for remarketing campaigns","Include custom JavaScript for advanced tracking","Scripts can be placed in head or body of the page"]},advanced:{title:"Advanced Security & Limits",description:"Set password protection, click limits, expiration dates, and device targeting.",tips:["Password protection restricts access to authorized users","Click limits prevent overuse of your links","Expiration dates automatically disable links","Device targeting shows different content on mobile vs desktop"]}},p=[{id:"basic",label:"Basic Settings",icon:gt,color:"text-blue-600",bgColor:"bg-blue-50 dark:bg-blue-900/20",description:"Link title, URL, and alias"},{id:"rotation",label:"A/B Testing",icon:We,color:"text-yellow-600",bgColor:"bg-yellow-50 dark:bg-yellow-900/20",description:"Split traffic between URLs",show:["rotator","short"].includes(a)},{id:"geo",label:"Geo Targeting",icon:Qt,color:"text-green-600",bgColor:"bg-green-50 dark:bg-green-900/20",description:"Location-based redirects",show:["geo","short"].includes(a)},{id:"time",label:"Time Targeting",icon:ht,color:"text-orange-600",bgColor:"bg-orange-50 dark:bg-orange-900/20",description:"Schedule and expiration",show:["time","short"].includes(a)},{id:"utm",label:"UTM Tracking",icon:Vr,color:"text-red-600",bgColor:"bg-red-50 dark:bg-red-900/20",description:"Campaign parameters",show:["utm","short"].includes(a)},{id:"cloaking",label:"Page Cloaking",icon:ye,color:"text-purple-600",bgColor:"bg-purple-50 dark:bg-purple-900/20",description:"Custom landing page",show:["cloaked","short"].includes(a)},{id:"tracking",label:"Tracking Scripts",icon:ve,color:"text-indigo-600",bgColor:"bg-indigo-50 dark:bg-indigo-900/20",description:"Analytics and pixels"},{id:"advanced",label:"Advanced Options",icon:gt,color:"text-gray-600",bgColor:"bg-gray-50 dark:bg-gray-900/20",description:"Security and limits"}].filter(k=>k.show!==!1);f.useEffect(()=>{a&&l.rotationUrls.length===1&&!l.rotationUrls[0].url&&c(k=>({...k,rotationUrls:[{url:"",weight:100,name:"Primary URL"}]}))},[a]);const j=()=>{c(k=>({...k,rotationUrls:[...k.rotationUrls,{url:"",weight:0,name:`Variant ${k.rotationUrls.length+1}`}]}))},w=k=>{l.rotationUrls.length>1&&c(_=>({..._,rotationUrls:_.rotationUrls.filter(($,z)=>z!==k)}))},C=(k,_,$)=>{c(z=>({...z,rotationUrls:z.rotationUrls.map((tt,Ne)=>Ne===k?{...tt,[_]:$}:tt)}))},A=()=>{const k=l.rotationUrls.reduce((_,$)=>_+(parseFloat($.weight)||0),0);if(k!==100&&k>0){const _=100/k;c($=>({...$,rotationUrls:$.rotationUrls.map(z=>({...z,weight:Math.round((parseFloat(z.weight)||0)*_)}))}))}},E=k=>{c(_=>({..._,...k})),x(!1)},T=(k,_)=>{c($=>({...$,geoTargeting:{...$.geoTargeting,[_]:$.geoTargeting[_].includes(k)?$.geoTargeting[_].filter(z=>z!==k):[...$.geoTargeting[_],k]}}))},I=k=>{c(_=>({..._,timeTargeting:{..._.timeTargeting,allowedDays:_.timeTargeting.allowedDays.includes(k)?_.timeTargeting.allowedDays.filter($=>$!==k):[..._.timeTargeting.allowedDays,k]}}))},X=async k=>{k.preventDefault(),m(!0);try{if(a==="rotator"&&l.rotationUrls.length>1){const z=l.rotationUrls.reduce((tt,Ne)=>tt+(parseFloat(Ne.weight)||0),0);if(Math.abs(z-100)>1){O.error("Total weight must equal 100%"),m(!1);return}}if(l.rotationUrls.filter(z=>z.url.trim()).length===0){O.error("Please provide at least one destination URL"),m(!1);return}const $={...l,linkType:a,projectId:i==null?void 0:i.id};await r($)}catch(_){console.error("Error creating link:",_),O.error("Failed to create link")}finally{m(!1)}};if(!t)return null;const q=(()=>{switch(a){case"short":return{title:"Short Link",icon:Q,color:"bg-blue-500"};case"cloaked":return{title:"Cloaked Link",icon:ye,color:"bg-purple-500"};case"geo":return{title:"Geo-Targeted Link",icon:Qt,color:"bg-green-500"};case"time":return{title:"Time-Based Link",icon:ht,color:"bg-orange-500"};case"utm":return{title:"UTM Tracking Link",icon:Vr,color:"bg-red-500"};case"rotator":return{title:"A/B Testing Rotator",icon:We,color:"bg-yellow-500"};default:return{title:"Advanced Link",icon:Q,color:"bg-gray-500"}}})();return s.jsxs(s.Fragment,{children:[s.jsx(br,{children:s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(S.div,{ref:o,initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-7xl h-[95vh] overflow-hidden shadow-2xl flex",children:[s.jsxs("div",{className:"w-80 bg-gray-50 dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("div",{className:`w-10 h-10 rounded-xl ${q.color} flex items-center justify-center text-white shadow-lg`,children:s.jsx(q.icon,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white truncate",children:q.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:i==null?void 0:i.name})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:p.map(k=>s.jsx(S.button,{onClick:()=>u(k.id),className:`w-full text-left p-4 rounded-xl transition-all duration-200 ${d===k.id?`${k.bgColor} border-2 border-current ${k.color}`:"hover:bg-gray-100 dark:hover:bg-gray-800 border-2 border-transparent"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(k.icon,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${d===k.id?k.color:"text-gray-500 dark:text-gray-400"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:`font-semibold text-sm truncate ${d===k.id?"text-gray-900 dark:text-white":"text-gray-700 dark:text-gray-300"}`,children:k.label}),s.jsx("p",{className:`text-xs mt-1 break-words ${d===k.id?"text-gray-600 dark:text-gray-400":"text-gray-500 dark:text-gray-500"}`,children:k.description})]})]})},k.id))})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:(V=p.find(k=>k.id===d))==null?void 0:V.label}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:(ke=p.find(k=>k.id===d))==null?void 0:ke.description})]}),s.jsx(_t,{title:(K=y[d])==null?void 0:K.title,description:(ge=y[d])==null?void 0:ge.description,examples:(De=y[d])==null?void 0:De.tips})]}),s.jsx("button",{onClick:e,className:"p-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors flex-shrink-0",children:s.jsx(ms,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:X,className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[d==="basic"&&s.jsxs(S.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ei,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-1",children:"Getting Started"}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Fill in the basic information for your link. The title helps you identify it later, and the custom alias creates a memorable short URL."})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Link Title *"}),s.jsx("input",{type:"text",value:l.title,onChange:k=>c(_=>({..._,title:k.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"My Campaign Link",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Custom Alias"}),s.jsx("input",{type:"text",value:l.customAlias,onChange:k=>c(_=>({..._,customAlias:k.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"my-custom-link"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave empty to auto-generate"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Primary Destination URL *"}),s.jsx("input",{type:"url",value:((je=l.rotationUrls[0])==null?void 0:je.url)||"",onChange:k=>C(0,"url",k.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com",required:!0})]})]}),d==="rotation"&&s.jsxs(S.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-xl p-4 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(We,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-200 mb-1",children:"A/B Testing Made Easy"}),s.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Split your traffic between multiple URLs to test which performs better. Set weight percentages to control how traffic is distributed."})]})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Traffic Distribution"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Split traffic between multiple URLs for A/B testing"})]}),s.jsxs("button",{type:"button",onClick:j,className:"flex items-center space-x-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsx("span",{children:"Add URL"})]})]}),s.jsx("div",{className:"space-y-4",children:l.rotationUrls.map((k,_)=>s.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4 bg-gray-50 dark:bg-gray-700",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end",children:[s.jsxs("div",{className:"md:col-span-3",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Variant Name"}),s.jsx("input",{type:"text",value:k.name,onChange:$=>C(_,"name",$.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-600 text-gray-900 dark:text-white",placeholder:`Variant ${_+1}`})]}),s.jsxs("div",{className:"md:col-span-6",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Destination URL"}),s.jsx("input",{type:"url",value:k.url,onChange:$=>C(_,"url",$.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-600 text-gray-900 dark:text-white",placeholder:"https://example.com",required:!0})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Weight %"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:k.weight,onChange:$=>C(_,"weight",parseFloat($.target.value)||0),className:"w-full px-3 py-2 pr-8 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-600 text-gray-900 dark:text-white",min:"0",max:"100",step:"0.1"}),s.jsx(Xg,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-3 h-3 text-gray-400"})]})]}),s.jsx("div",{className:"md:col-span-1",children:l.rotationUrls.length>1&&s.jsx("button",{type:"button",onClick:()=>w(_),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:s.jsx(Ut,{className:"w-4 h-4"})})})]})},_))}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl",children:[s.jsxs("span",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:["Total Weight: ",l.rotationUrls.reduce((k,_)=>k+(parseFloat(_.weight)||0),0).toFixed(1),"%"]}),s.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 bg-yellow-600 text-white text-sm rounded-lg hover:bg-yellow-700 transition-colors",children:"Auto-balance to 100%"})]})]}),d==="geo"&&s.jsxs(S.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-4 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Qt,{className:"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-1",children:"Geographic Targeting"}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Show different content to visitors from different countries. Perfect for compliance and localization."})]})]})}),s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx("input",{type:"checkbox",checked:l.geoTargeting.enabled,onChange:k=>c(_=>({..._,geoTargeting:{..._.geoTargeting,enabled:k.target.checked}})),className:"w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),s.jsx("label",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Enable Geographic Targeting"})]}),l.geoTargeting.enabled&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Fallback URL (for blocked countries)"}),s.jsx("input",{type:"url",value:l.geoTargeting.fallbackUrl,onChange:k=>c(_=>({..._,geoTargeting:{..._.geoTargeting,fallbackUrl:k.target.value}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"https://fallback-page.com"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-md font-semibold text-green-700 dark:text-green-300 mb-3 flex items-center space-x-2",children:[s.jsx(xe,{className:"w-4 h-4"}),s.jsx("span",{children:"Allowed Countries"})]}),s.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700",children:b.map(k=>s.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[s.jsx("input",{type:"checkbox",checked:l.geoTargeting.allowedCountries.includes(k),onChange:()=>T(k,"allowedCountries"),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:k})]},k))})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-md font-semibold text-red-700 dark:text-red-300 mb-3 flex items-center space-x-2",children:[s.jsx(Nn,{className:"w-4 h-4"}),s.jsx("span",{children:"Blocked Countries"})]}),s.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700",children:b.map(k=>s.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[s.jsx("input",{type:"checkbox",checked:l.geoTargeting.blockedCountries.includes(k),onChange:()=>T(k,"blockedCountries"),className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:k})]},k))})]})]})]})]}),d==="time"&&s.jsxs(S.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[s.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-xl p-4 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ht,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-orange-800 dark:text-orange-200 mb-1",children:"Time-Based Control"}),s.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:"Schedule when your links are active and automatically expire them. Perfect for limited-time offers."})]})]})}),s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx("input",{type:"checkbox",checked:l.timeTargeting.enabled,onChange:k=>c(_=>({..._,timeTargeting:{..._.timeTargeting,enabled:k.target.checked}})),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),s.jsx("label",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Enable Time-Based Targeting"})]}),l.timeTargeting.enabled&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Start Date & Time"}),s.jsx("input",{type:"datetime-local",value:l.timeTargeting.startsAt,onChange:k=>c(_=>({..._,timeTargeting:{..._.timeTargeting,startsAt:k.target.value}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"End Date & Time"}),s.jsx("input",{type:"datetime-local",value:l.timeTargeting.expiresAt,onChange:k=>c(_=>({..._,timeTargeting:{..._.timeTargeting,expiresAt:k.target.value}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Timezone"}),s.jsx("select",{value:l.timeTargeting.timezone,onChange:k=>c(_=>({..._,timeTargeting:{..._.timeTargeting,timezone:k.target.value}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:v.map(k=>s.jsx("option",{value:k,children:k},k))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Allowed Days of Week"}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:N.map(k=>s.jsx("button",{type:"button",onClick:()=>I(k),className:`p-3 text-sm font-medium rounded-lg transition-colors ${l.timeTargeting.allowedDays.includes(k)?"bg-orange-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:k.slice(0,3)},k))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Start Time (24h format)"}),s.jsx("input",{type:"time",value:l.timeTargeting.allowedHours.start,onChange:k=>c(_=>({..._,timeTargeting:{..._.timeTargeting,allowedHours:{..._.timeTargeting.allowedHours,start:k.target.value}}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"End Time (24h format)"}),s.jsx("input",{type:"time",value:l.timeTargeting.allowedHours.end,onChange:k=>c(_=>({..._,timeTargeting:{..._.timeTargeting,allowedHours:{..._.timeTargeting.allowedHours,end:k.target.value}}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]})]})]}),d==="utm"&&s.jsxs(S.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-4 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Vr,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-red-800 dark:text-red-200 mb-1",children:"Campaign Tracking"}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Add UTM parameters to track your campaigns in Google Analytics and measure marketing ROI."})]})]})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"UTM Campaign Parameters"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Add UTM parameters to track campaign performance in Google Analytics"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"UTM Source *"}),s.jsx("input",{type:"text",value:l.utmSource,onChange:k=>c(_=>({..._,utmSource:k.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"google, facebook, newsletter"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Identify the advertiser, site, publication, etc."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"UTM Medium *"}),s.jsx("input",{type:"text",value:l.utmMedium,onChange:k=>c(_=>({..._,utmMedium:k.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"cpc, email, social"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Advertising or marketing medium"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"UTM Campaign *"}),s.jsx("input",{type:"text",value:l.utmCampaign,onChange:k=>c(_=>({..._,utmCampaign:k.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"spring_sale, product_launch"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Product, promo code, or slogan"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"UTM Term"}),s.jsx("input",{type:"text",value:l.utmTerm,onChange:k=>c(_=>({..._,utmTerm:k.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"keyword terms"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Identify paid search keywords"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"UTM Content"}),s.jsx("input",{type:"text",value:l.utmContent,onChange:k=>c(_=>({..._,utmContent:k.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"logolink, textlink, banner"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Differentiate ads or links that point to the same URL"})]})]}),(l.utmSource||l.utmMedium||l.utmCampaign)&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"UTM Preview"}),s.jsxs("div",{className:"text-xs font-mono text-red-700 dark:text-red-300 break-all",children:[((Ft=l.rotationUrls[0])==null?void 0:Ft.url)||"https://example.com",l.utmSource&&`?utm_source=${encodeURIComponent(l.utmSource)}`,l.utmMedium&&`&utm_medium=${encodeURIComponent(l.utmMedium)}`,l.utmCampaign&&`&utm_campaign=${encodeURIComponent(l.utmCampaign)}`,l.utmTerm&&`&utm_term=${encodeURIComponent(l.utmTerm)}`,l.utmContent&&`&utm_content=${encodeURIComponent(l.utmContent)}`]})]})]}),d==="cloaking"&&s.jsxs(S.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[s.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-4 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ye,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-purple-800 dark:text-purple-200 mb-1",children:"Link Cloaking"}),s.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Hide your destination URL and show a custom landing page. Perfect for affiliate marketing and brand protection."})]})]})}),s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx("input",{type:"checkbox",checked:l.cloakingEnabled,onChange:k=>c(_=>({..._,cloakingEnabled:k.target.checked})),className:"w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),s.jsx("label",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Enable Link Cloaking"})]}),l.cloakingEnabled&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Page Title"}),s.jsx("input",{type:"text",value:l.cloakPage.title,onChange:k=>c(_=>({..._,cloakPage:{..._.cloakPage,title:k.target.value}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Loading..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Page Description"}),s.jsx("input",{type:"text",value:l.cloakPage.description,onChange:k=>c(_=>({..._,cloakPage:{..._.cloakPage,description:k.target.value}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Please wait while we redirect you..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Background Color"}),s.jsx("input",{type:"color",value:l.cloakPage.backgroundColor,onChange:k=>c(_=>({..._,cloakPage:{..._.cloakPage,backgroundColor:k.target.value}})),className:"w-full h-12 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Text Color"}),s.jsx("input",{type:"color",value:l.cloakPage.textColor,onChange:k=>c(_=>({..._,cloakPage:{..._.cloakPage,textColor:k.target.value}})),className:"w-full h-12 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("input",{type:"checkbox",checked:l.cloakPage.showLoader,onChange:k=>c(_=>({..._,cloakPage:{..._.cloakPage,showLoader:k.target.checked}})),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show loading spinner"})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Custom HTML (Optional)"}),s.jsx("textarea",{value:l.cloakPage.customHtml,onChange:k=>c(_=>({..._,cloakPage:{..._.cloakPage,customHtml:k.target.value}})),rows:6,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm",placeholder:"<div>Custom HTML content...</div>"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Add custom HTML to override the default cloaking page"})]})]})]}),d==="tracking"&&s.jsxs(S.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[s.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-xl p-4 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ve,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-indigo-800 dark:text-indigo-200 mb-1",children:"Tracking & Analytics"}),s.jsx("p",{className:"text-sm text-indigo-700 dark:text-indigo-300",children:"Add tracking pixels, analytics codes, and custom scripts to monitor your link performance and conversions."})]})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Tracking & Scripts"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add tracking pixels, analytics, and custom scripts"})]}),s.jsxs("button",{type:"button",onClick:()=>x(!0),className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[s.jsx(ve,{className:"w-4 h-4"}),s.jsx("span",{children:"Configure Tracking"})]})]}),l.script_injection_enabled&&l.tracking_scripts.length>0?s.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center",children:s.jsx(ve,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-indigo-800 dark:text-indigo-200",children:[l.tracking_scripts.filter(k=>k.enabled).length," tracking scripts configured"]}),s.jsxs("p",{className:"text-sm text-indigo-600 dark:text-indigo-300",children:["Scripts will be injected in the ",l.script_position," with ",l.script_delay,"s delay"]})]})]}),s.jsx("div",{className:"space-y-2",children:l.tracking_scripts.filter(k=>k.enabled).map((k,_)=>s.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"font-medium text-indigo-800 dark:text-indigo-200",children:k.name}),s.jsxs("span",{className:"text-indigo-600 dark:text-indigo-400",children:["(",k.position,")"]})]},_))})]}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[s.jsx(ve,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No tracking configured"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Add tracking pixels, analytics codes, and custom scripts to monitor your link performance"}),s.jsx("button",{type:"button",onClick:()=>x(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Add Tracking Scripts"})]})]}),d==="advanced"&&s.jsxs(S.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[s.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(gt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1",children:"Advanced Security"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Set password protection, click limits, expiration dates, and device targeting for enhanced control."})]})]})}),s.jsx("div",{children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Advanced Options"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Password Protection"}),s.jsx("input",{type:"password",value:l.password,onChange:k=>c(_=>({..._,password:k.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-gray-500 focus:border-transparent",placeholder:"Optional password"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Require password to access link"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Click Limit"}),s.jsx("input",{type:"number",value:l.clickLimit,onChange:k=>c(_=>({..._,clickLimit:k.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-gray-500 focus:border-transparent",placeholder:"Unlimited",min:"1"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Maximum number of clicks allowed"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Expires At"}),s.jsx("input",{type:"datetime-local",value:l.expiresAt,onChange:k=>c(_=>({..._,expiresAt:k.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-gray-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Link will expire at this date/time"})]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("input",{type:"checkbox",checked:l.deviceTargeting.enabled,onChange:k=>c(_=>({..._,deviceTargeting:{..._.deviceTargeting,enabled:k.target.checked}})),className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-500"}),s.jsxs("label",{className:"text-md font-semibold text-gray-900 dark:text-white flex items-center space-x-2",children:[s.jsx(ga,{className:"w-4 h-4"}),s.jsx("span",{children:"Device Targeting"})]})]}),l.deviceTargeting.enabled&&s.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{id:"desktop",label:"Desktop",icon:Br},{id:"mobile",label:"Mobile",icon:ga},{id:"tablet",label:"Tablet",icon:Ul}].map(k=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:l.deviceTargeting.allowedDevices.includes(k.id),onChange:_=>{const $=_.target.checked?[...l.deviceTargeting.allowedDevices,k.id]:l.deviceTargeting.allowedDevices.filter(z=>z!==k.id);c(z=>({...z,deviceTargeting:{...z.deviceTargeting,allowedDevices:$}}))},className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-500"}),s.jsx(k.icon,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:k.label})]},k.id))})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("input",{type:"checkbox",checked:l.ipBlocking.enabled,onChange:k=>c(_=>({..._,ipBlocking:{..._.ipBlocking,enabled:k.target.checked}})),className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-500"}),s.jsxs("label",{className:"text-md font-semibold text-gray-900 dark:text-white flex items-center space-x-2",children:[s.jsx(Nn,{className:"w-4 h-4"}),s.jsx("span",{children:"IP Address Filtering"})]})]}),l.ipBlocking.enabled&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Blocked IPs (one per line)"}),s.jsx("textarea",{value:l.ipBlocking.blockedIps.join(`
`),onChange:k=>c(_=>({..._,ipBlocking:{..._.ipBlocking,blockedIps:k.target.value.split(`
`).filter($=>$.trim())}})),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:`192.168.1.1
10.0.0.1`})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Allowed IPs (one per line)"}),s.jsx("textarea",{value:l.ipBlocking.allowedIps.join(`
`),onChange:k=>c(_=>({..._,ipBlocking:{..._.ipBlocking,allowedIps:k.target.value.split(`
`).filter($=>$.trim())}})),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:`192.168.1.100
10.0.0.100`})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex-shrink-0",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-3 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 font-medium transition-colors",children:"Cancel"}),s.jsx(S.button,{type:"submit",disabled:h,className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl disabled:shadow-none transition-all duration-200",whileHover:{scale:h?1:1.02},whileTap:{scale:h?1:.98},children:h?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),s.jsx("span",{children:"Creating..."})]}):`Create ${q.title}`})]})]})]})]})})}),s.jsx(_x,{isOpen:g,onClose:()=>x(!1),onSave:E})]})},Cx=({isOpen:t,onClose:e,onSubmit:r})=>{const a=f.useRef(null),[i,n]=f.useState({name:"",description:"",destination_url:"",color:"#8B5CF6"}),[o,l]=f.useState(!1);f.useEffect(()=>{const m=g=>{a.current&&!a.current.contains(g.target)&&e()};return t&&(document.addEventListener("mousedown",m),document.body.style.overflow="hidden"),()=>{document.removeEventListener("mousedown",m),document.body.style.overflow="unset"}},[t,e]);const c=["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#EC4899","#6366F1","#84CC16","#F97316","#06B6D4","#8B5A2B","#6B7280"],d=m=>{const{name:g,value:x}=m.target;n(b=>({...b,[g]:x}))},u=m=>{n(g=>({...g,color:m}))},h=async m=>{if(m.preventDefault(),!i.name.trim()){O.error("Project name is required");return}try{l(!0),await r(i),n({name:"",description:"",destination_url:"",color:"#8B5CF6"})}catch{}finally{l(!1)}};return t?s.jsx(br,{children:s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(S.div,{ref:a,initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl rounded-3xl w-full max-w-2xl max-h-[95vh] overflow-hidden shadow-2xl border border-white/20 dark:border-gray-700/50",children:[s.jsxs("div",{className:"flex items-center justify-between p-8 border-b border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 flex-shrink-0",children:[s.jsxs("h2",{className:"text-2xl font-display text-gray-900 dark:text-white flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-blue-500 rounded-xl text-white",children:s.jsx(Il,{className:"w-6 h-6"})}),s.jsx("span",{children:"Create New Project"}),s.jsx(_t,{title:"Project Organization",description:"Projects help you organize your links by campaign, client, or purpose. Each project can have its own settings and branding.",examples:["Social Media Campaign","Client: ABC Company","Product Launch 2024"]})]}),s.jsx("button",{onClick:e,className:"p-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-all duration-200",children:s.jsx(ms,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto max-h-[calc(95vh-140px)] premium-scrollbar",children:s.jsxs("form",{onSubmit:h,className:"p-8 space-y-6",children:[s.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-4 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ei,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-purple-800 dark:text-purple-200 mb-1",children:"Project Organization"}),s.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Projects help you organize your links by campaign, client, or purpose. Each project can have its own default settings and color coding."})]})]})}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center space-x-2",children:[s.jsx("span",{children:"Project Name *"}),s.jsx(_t,{title:"Project Name",description:"Choose a descriptive name that helps you identify this project's purpose or campaign.",examples:["Summer Sale 2024","Client: Tech Startup","Social Media Links"]})]}),s.jsx("input",{type:"text",name:"name",value:i.name,onChange:d,placeholder:"Enter project name",required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center space-x-2",children:[s.jsx("span",{children:"Description"}),s.jsx(_t,{title:"Project Description",description:"Optional description to provide more context about this project's goals or target audience.",examples:["Q4 marketing campaign for new product line","Client work for ABC Company's rebranding","Personal blog and social media links"]})]}),s.jsx("textarea",{name:"description",value:i.description,onChange:d,placeholder:"Enter project description",rows:3,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center space-x-2",children:[s.jsx("span",{children:"Default Destination URL"}),s.jsx(_t,{title:"Default Destination URL",description:"Optional default URL that will be pre-filled when creating new links in this project.",examples:["https://mystore.com","https://client-website.com","https://myblog.com"]})]}),s.jsx("input",{type:"url",name:"destination_url",value:i.destination_url,onChange:d,placeholder:"https://example.com",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($l,{className:"w-4 h-4"}),s.jsx("span",{children:"Project Color"}),s.jsx(_t,{title:"Project Color",description:"Choose a color to help visually identify this project in your dashboard and link listings.",examples:["Blue for corporate clients","Green for eco-friendly campaigns","Red for urgent promotions"]})]})}),s.jsx("div",{className:"grid grid-cols-6 gap-3",children:c.map(m=>s.jsx("button",{type:"button",onClick:()=>u(m),className:`w-12 h-12 rounded-xl transition-all duration-200 ${i.color===m?"ring-2 ring-offset-2 ring-gray-400 dark:ring-gray-500 scale-110":"hover:scale-105"}`,style:{backgroundColor:m}},m))})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-3 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 font-medium transition-colors",children:"Cancel"}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:o,className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl disabled:shadow-none transition-all duration-200 flex items-center space-x-2",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsx("span",{children:o?"Creating...":"Create Project"})]})]})]})})]})})}):null},Tx=()=>{const{user:t}=le(),[e,r]=f.useState([]),[a,i]=f.useState([]),[n,o]=f.useState("all"),[l,c]=f.useState(""),[d,u]=f.useState(!0),[h,m]=f.useState(!1),[g,x]=f.useState(!1),[b,v]=f.useState({id:"short",title:"Short Link"});f.useEffect(()=>{(async()=>{if(!t){u(!1);return}try{const{data:C,error:A}=await R.from("projects").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(A)throw A;i(C||[]);const{data:E,error:T}=await R.from("links").select(`
            *,
            projects (
              id,
              name,
              color
            )
          `).eq("user_id",t.id).order("created_at",{ascending:!1});if(T)throw T;r(E||[])}catch(C){console.error("Error loading data:",C),O.error("Failed to load data")}finally{u(!1)}})()},[t]);const N=async w=>{var C,A,E;try{const T=n==="all"?(C=a[0])==null?void 0:C.id:n;if(!T){O.error("Please create a project first");return}const I={title:w.title,destination_url:((E=(A=w.rotationUrls)==null?void 0:A[0])==null?void 0:E.url)||"",short_code:w.customAlias||Math.random().toString(36).substring(2,8),project_id:T,user_id:t.id,link_type:b.id,is_active:!0,total_clicks:0,rotation_urls:w.rotationUrls||[],geo_targeting:w.geoTargeting||{},time_targeting:w.timeTargeting||{},utm_source:w.utmSource||null,utm_medium:w.utmMedium||null,utm_campaign:w.utmCampaign||null,utm_term:w.utmTerm||null,utm_content:w.utmContent||null,cloaking_enabled:w.cloakingEnabled||!1,cloaking_page:w.cloakPage||null,script_injection_enabled:w.script_injection_enabled||!1,tracking_scripts:w.tracking_scripts||[],script_delay:w.script_delay||2,script_position:w.script_position||"head",password:w.password||null,click_limit:w.clickLimit?parseInt(w.clickLimit):null,expires_at:w.expiresAt||null},{data:X,error:Y}=await R.from("links").insert(I).select(`
          *,
          projects (
            id,
            name,
            color
          )
        `).single();if(Y)throw Y;r(q=>[X,...q]),O.success(`${b.title} created successfully!`),m(!1)}catch(T){throw console.error("Error creating advanced link:",T),O.error("Failed to create link"),T}},y=async w=>{try{const{data:C,error:A}=await R.from("projects").insert({...w,user_id:t.id}).select().single();if(A)throw A;i(E=>[C,...E]),O.success("Project created successfully!"),x(!1)}catch(C){console.error("Error creating project:",C),O.error("Failed to create project")}},p=async w=>{try{await navigator.clipboard.writeText(w),O.success("Link copied to clipboard!")}catch{O.error("Failed to copy link")}},j=e.filter(w=>{var E,T,I;const C=n==="all"||w.project_id===n,A=((E=w.title)==null?void 0:E.toLowerCase().includes(l.toLowerCase()))||((T=w.destination_url)==null?void 0:T.toLowerCase().includes(l.toLowerCase()))||((I=w.short_code)==null?void 0:I.toLowerCase().includes(l.toLowerCase()));return C&&A});return d?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs(S.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Links & Projects"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your shortened links and organize them into projects"})]}),s.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[s.jsxs(S.button,{onClick:()=>x(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-xl font-semibold transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[s.jsx(Il,{className:"w-4 h-4"}),s.jsx("span",{children:"New Project"})]}),s.jsxs(S.button,{onClick:()=>{v({id:"short",title:"Short Link"}),m(!0)},className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200",whileHover:{scale:1.02},whileTap:{scale:.98},children:[s.jsx(Re,{className:"w-5 h-5"}),s.jsx("span",{children:"Create Link"})]})]})]}),s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 dark:border-slate-700/30 p-6 mb-8",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[s.jsx("div",{className:"flex-1 max-w-md",children:s.jsxs("div",{className:"relative",children:[s.jsx($t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search links...",value:l,onChange:w=>c(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("select",{value:n,onChange:w=>o(w.target.value),className:"px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"all",children:"All Projects"}),a.map(w=>s.jsx("option",{value:w.id,children:w.name},w.id))]})})]})}),s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[{title:"Total Links",value:e.length,icon:Rt,color:"text-blue-600",bg:"bg-blue-50 dark:bg-blue-900/20"},{title:"Total Clicks",value:e.reduce((w,C)=>w+(C.total_clicks||0),0),icon:Fe,color:"text-green-600",bg:"bg-green-50 dark:bg-green-900/20"},{title:"Active Links",value:e.filter(w=>w.is_active).length,icon:We,color:"text-yellow-600",bg:"bg-yellow-50 dark:bg-yellow-900/20"},{title:"Projects",value:a.length,icon:Vr,color:"text-purple-600",bg:"bg-purple-50 dark:bg-purple-900/20"}].map((w,C)=>s.jsx(S.div,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 dark:border-slate-700/30 p-6",whileHover:{y:-2},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*C},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:w.title}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.value.toLocaleString()})]}),s.jsx("div",{className:`p-3 rounded-xl ${w.bg}`,children:s.jsx(w.icon,{className:`w-6 h-6 ${w.color}`})})]})},w.title))}),s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 dark:border-slate-700/30 overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Recent Links (",j.length,")"]})}),j.length>0?s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:j.map((w,C)=>s.jsx(S.div,{className:"p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*C},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:w.title||"Untitled Link"}),w.projects&&s.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full",style:{backgroundColor:`${w.projects.color}20`,color:w.projects.color},children:w.projects.name}),s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w.is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:w.is_active?"Active":"Inactive"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:[s.jsx("span",{className:"font-medium",children:"Short:"})," nanhi.link/",w.short_code]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:[s.jsx("span",{className:"font-medium",children:"Destination:"})," ",w.destination_url]})]}),s.jsxs("div",{className:"flex items-center space-x-4 mt-3 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(be,{className:"w-4 h-4"}),s.jsxs("span",{children:[w.total_clicks||0," clicks"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Za,{className:"w-4 h-4"}),s.jsx("span",{children:new Date(w.created_at).toLocaleDateString()})]}),w.link_type&&w.link_type!=="short"&&s.jsxs("div",{className:"flex items-center space-x-1",children:[w.link_type==="cloaked"&&s.jsx(ye,{className:"w-4 h-4"}),w.link_type==="time"&&s.jsx(ht,{className:"w-4 h-4"}),w.link_type==="geo"&&s.jsx(Q,{className:"w-4 h-4"}),s.jsx("span",{className:"capitalize",children:w.link_type})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsx(S.button,{onClick:()=>p(`https://nanhi.link/${w.short_code}`),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:s.jsx(cr,{className:"w-4 h-4"})}),s.jsx(S.button,{onClick:()=>window.open(`https://nanhi.link/${w.short_code}`,"_blank"),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:s.jsx(ft,{className:"w-4 h-4"})}),s.jsx(S.button,{className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:s.jsx(Kg,{className:"w-4 h-4"})})]})]})},w.id))}):s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(Rt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No links found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:l?"Try adjusting your search terms":"Create your first link to get started"}),s.jsx(S.button,{onClick:()=>{v({id:"short",title:"Short Link"}),m(!0)},className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Create Your First Link"})]})]})]}),s.jsx(Sx,{isOpen:h,onClose:()=>{m(!1),v(null)},onSubmit:N,linkType:b==null?void 0:b.id,projectData:a.find(w=>w.id===n)||a[0]}),s.jsx(Cx,{isOpen:g,onClose:()=>x(!1),onSubmit:y})]})},Px=()=>{le();const[t,e]=f.useState("7d"),[r,a]=f.useState(!1),[i,n]=f.useState(null);f.useEffect(()=>{n((()=>{const C=[],A=t==="7d"?7:t==="30d"?30:90;for(let q=A-1;q>=0;q--){const V=new Date;V.setDate(V.getDate()-q),C.push({date:V.toLocaleDateString("en-US",{month:"short",day:"numeric",...A>30&&{year:"2-digit"}}),clicks:Math.floor(Math.random()*500)+100,uniqueClicks:Math.floor(Math.random()*300)+50,conversions:Math.floor(Math.random()*50)+10})}return{clickTrends:C,geoData:[{country:"United States",clicks:2840,percentage:35.2},{country:"United Kingdom",clicks:1620,percentage:20.1},{country:"Canada",clicks:980,percentage:12.2},{country:"Germany",clicks:760,percentage:9.4},{country:"France",clicks:540,percentage:6.7},{country:"Australia",clicks:420,percentage:5.2},{country:"Others",clicks:890,percentage:11.2}],deviceData:[{name:"Desktop",value:45.2,clicks:3640,color:"#8B5CF6"},{name:"Mobile",value:38.8,clicks:3120,color:"#06B6D4"},{name:"Tablet",value:16,clicks:1290,color:"#10B981"}],browserData:[{name:"Chrome",clicks:4200,percentage:52.1},{name:"Safari",clicks:1680,percentage:20.8},{name:"Firefox",clicks:1200,percentage:14.9},{name:"Edge",clicks:720,percentage:8.9},{name:"Others",clicks:250,percentage:3.3}],topLinks:[{id:1,title:"Product Launch Campaign",shortCode:"launch2024",clicks:8420,ctr:12.4,conversions:340},{id:2,title:"Holiday Sale Promotion",shortCode:"holiday-sale",clicks:6890,ctr:9.8,conversions:280},{id:3,title:"Newsletter Signup",shortCode:"newsletter",clicks:5240,ctr:8.2,conversions:210},{id:4,title:"Social Media Campaign",shortCode:"social-promo",clicks:4180,ctr:7.1,conversions:165},{id:5,title:"Email Marketing",shortCode:"email-blast",clicks:3560,ctr:6.4,conversions:142}],referrerData:[{source:"Direct",clicks:3240,percentage:40.2},{source:"Social Media",clicks:2180,percentage:27.1},{source:"Email",clicks:1420,percentage:17.6},{source:"Search",clicks:890,percentage:11},{source:"Others",clicks:320,percentage:4.1}],totalClicks:8050,uniqueClicks:6240,totalLinks:156,avgCTR:8.7,topCountry:"United States",topDevice:"Desktop",peakHour:"2:00 PM"}})())},[t]);const o=()=>{O.success("Analytics report exported successfully!",{style:{background:"linear-gradient(135deg, #10B981, #059669)",color:"white",fontWeight:"600",borderRadius:"12px",padding:"16px 24px"}})},l=()=>{a(!0),setTimeout(()=>{n(w=>({...w})),a(!1),O.success("Analytics refreshed")},1e3)};if(!i)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});const{clickTrends:c,geoData:d,deviceData:u,browserData:h,topLinks:m,referrerData:g,totalClicks:x,uniqueClicks:b,totalLinks:v,avgCTR:N,topCountry:y,topDevice:p,peakHour:j}=i;return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Analytics"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive insights into your link performance"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"flex bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-1",children:[{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"90d",label:"90 Days"}].map(w=>s.jsx("button",{onClick:()=>e(w.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${t===w.value?"bg-purple-600 text-white shadow-lg":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:w.label},w.value))}),s.jsx(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:l,disabled:r,className:"p-3 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-xl transition-colors duration-200",children:s.jsx(Yg,{className:`w-5 h-5 text-gray-600 dark:text-gray-400 ${r?"animate-spin":""}`})}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:o,className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[s.jsx(dr,{className:"w-4 h-4"}),s.jsx("span",{children:"Export"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Total Clicks"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:x.toLocaleString()})]}),s.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:s.jsx(Ml,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]}),s.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[s.jsx(Fe,{className:"w-4 h-4 text-green-500 mr-1"}),s.jsx("span",{className:"text-green-500 font-medium",children:"+12.5%"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"vs last period"})]})]}),s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Unique Clicks"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:b.toLocaleString()})]}),s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:s.jsx(hr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]}),s.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[s.jsx(Fe,{className:"w-4 h-4 text-green-500 mr-1"}),s.jsx("span",{className:"text-green-500 font-medium",children:"+8.2%"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"vs last period"})]})]}),s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Click-Through Rate"}),s.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:[N,"%"]})]}),s.jsx("div",{className:"p-3 bg-cyan-100 dark:bg-cyan-900/20 rounded-lg",children:s.jsx(Lt,{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400"})})]}),s.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[s.jsx(Fe,{className:"w-4 h-4 text-green-500 mr-1"}),s.jsx("span",{className:"text-green-500 font-medium",children:"+2.1%"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"vs last period"})]})]}),s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Active Links"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:v})]}),s.jsx("div",{className:"p-3 bg-emerald-100 dark:bg-emerald-900/20 rounded-lg",children:s.jsx(Q,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})})]}),s.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[s.jsx(da,{className:"w-4 h-4 text-blue-500 mr-1"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"all performing well"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(S.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Click Trends"}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Last ",t]})]}),s.jsx(Dr,{width:"100%",height:300,children:s.jsxs(pc,{data:c,children:[s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"clicksGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#8B5CF6",stopOpacity:.3}),s.jsx("stop",{offset:"95%",stopColor:"#8B5CF6",stopOpacity:0})]}),s.jsxs("linearGradient",{id:"uniqueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#06B6D4",stopOpacity:.3}),s.jsx("stop",{offset:"95%",stopColor:"#06B6D4",stopOpacity:0})]})]}),s.jsx(Fs,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),s.jsx(qs,{dataKey:"date",stroke:"#64748b",fontSize:12}),s.jsx(Hs,{stroke:"#64748b",fontSize:12}),s.jsx(Ir,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"12px",color:"#0f172a",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"}}),s.jsx(xc,{}),s.jsx(oi,{type:"monotone",dataKey:"clicks",stroke:"#8B5CF6",strokeWidth:3,fill:"url(#clicksGradient)",name:"Total Clicks"}),s.jsx(oi,{type:"monotone",dataKey:"uniqueClicks",stroke:"#06B6D4",strokeWidth:3,fill:"url(#uniqueGradient)",name:"Unique Clicks"})]})})]}),s.jsxs(S.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Device Distribution"}),s.jsx(Br,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})]}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(Dr,{width:"100%",height:300,children:s.jsxs(yc,{children:[s.jsx(bc,{data:u,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:5,dataKey:"value",children:u.map((w,C)=>s.jsx(vc,{fill:w.color},`cell-${C}`))}),s.jsx(Ir,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"12px",color:"#0f172a"},formatter:(w,C)=>[`${w}%`,C]})]})})}),s.jsx("div",{className:"grid grid-cols-3 gap-4 mt-4",children:u.map((w,C)=>s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center mb-2",children:[w.name==="Desktop"&&s.jsx(Br,{className:"w-5 h-5",style:{color:w.color}}),w.name==="Mobile"&&s.jsx(ga,{className:"w-5 h-5",style:{color:w.color}}),w.name==="Tablet"&&s.jsx(Ul,{className:"w-5 h-5",style:{color:w.color}})]}),s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:w.name}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[w.value,"%"]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:w.clicks.toLocaleString()})]},C))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Geographic Distribution"}),s.jsx(Qt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})]}),s.jsx("div",{className:"space-y-4",children:d.map((w,C)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg flex items-center justify-center text-white text-xs font-bold",children:w.country.slice(0,2).toUpperCase()}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:w.country})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${w.percentage}%`}})}),s.jsxs("div",{className:"text-right min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:w.clicks.toLocaleString()}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[w.percentage,"%"]})]})]})]},C))})]}),s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Top Performing Links"}),s.jsx(Fe,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})]}),s.jsx("div",{className:"space-y-4",children:m.map((w,C)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg flex items-center justify-center text-white text-sm font-bold",children:C+1}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:w.title}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["/",w.shortCode]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:w.clicks.toLocaleString()}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[w.ctr,"% CTR"]})]})]},w.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Browser Distribution"}),s.jsx(Q,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})]}),s.jsx(Dr,{width:"100%",height:250,children:s.jsxs(wc,{data:h,layout:"horizontal",children:[s.jsx(Fs,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),s.jsx(qs,{type:"number",stroke:"#64748b",fontSize:12}),s.jsx(Hs,{dataKey:"name",type:"category",stroke:"#64748b",fontSize:12,width:60}),s.jsx(Ir,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"12px",color:"#0f172a"}}),s.jsx(kc,{dataKey:"clicks",fill:"url(#browserGradient)",radius:[0,4,4,0]}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"browserGradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[s.jsx("stop",{offset:"5%",stopColor:"#8B5CF6",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#06B6D4",stopOpacity:.8})]})})]})})]}),s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Traffic Sources"}),s.jsx(da,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})]}),s.jsx("div",{className:"space-y-4",children:g.map((w,C)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-purple-500 to-blue-500"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:w.source})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${w.percentage}%`}})}),s.jsxs("div",{className:"text-right min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:w.clicks.toLocaleString()}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[w.percentage,"%"]})]})]})]},C))})]})]}),s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-2xl p-6 border border-purple-200 dark:border-purple-800",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(be,{className:"w-5 h-5 mr-2 text-purple-600 dark:text-purple-400"}),"Quick Insights"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/40 rounded-lg w-fit mx-auto mb-3",children:s.jsx(Qt,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Top Country"}),s.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:y})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/40 rounded-lg w-fit mx-auto mb-3",children:s.jsx(Br,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Top Device"}),s.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:p})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"p-3 bg-cyan-100 dark:bg-cyan-900/40 rounded-lg w-fit mx-auto mb-3",children:s.jsx(ht,{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400"})}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Peak Hour"}),s.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:j})]})]})]})]})},Ax=()=>{const{user:t}=le(),[e,r]=f.useState("profile"),a=[{id:"profile",name:"Profile",icon:ur},{id:"security",name:"Security",icon:ye},{id:"billing",name:"Billing",icon:_n},{id:"notifications",name:"Notifications",icon:Ya}];return s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Account Settings"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage your account preferences and settings"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsx("nav",{className:"space-y-1",children:a.map(i=>s.jsxs("button",{onClick:()=>r(i.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 ${e===i.id?"bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,children:[s.jsx(i.icon,{className:"w-5 h-5 mr-3"}),i.name]},i.id))})}),s.jsxs("div",{className:"lg:col-span-3",children:[e==="profile"&&s.jsxs("div",{className:"card p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Profile Information"}),s.jsxs("form",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"First Name"}),s.jsx("input",{type:"text",defaultValue:"John",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Name"}),s.jsx("input",{type:"text",defaultValue:"Doe",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",defaultValue:(t==null?void 0:t.email)||"user@example.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company"}),s.jsx("input",{type:"text",placeholder:"Your company name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),s.jsx("textarea",{rows:"4",placeholder:"Tell us about yourself",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",className:"btn-primary",children:"Save Changes"})})]})]}),e==="security"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"card p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Change Password"}),s.jsxs("form",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),s.jsx("input",{type:"password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),s.jsx("input",{type:"password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),s.jsx("input",{type:"password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",className:"btn-primary",children:"Update Password"})})]})]}),s.jsxs("div",{className:"card p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Two-Factor Authentication"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Two-factor authentication is disabled"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Add an extra layer of security to your account"})]}),s.jsx("button",{className:"btn-primary",children:"Enable 2FA"})]})]})]}),e==="billing"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"card p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Current Plan"}),s.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-purple-900 dark:text-purple-300",children:"Pro Plan"}),s.jsx("p",{className:"text-purple-700 dark:text-purple-400",children:"$29/month • Billed monthly"})]}),s.jsx("button",{className:"btn-secondary",children:"Change Plan"})]})})]}),s.jsxs("div",{className:"card p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Payment Method"}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(_n,{className:"w-8 h-8 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"•••• •••• •••• 4242"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expires 12/25"})]})]}),s.jsx("button",{className:"btn-secondary",children:"Update"})]})]}),s.jsxs("div",{className:"card p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Billing History"}),s.jsx("div",{className:"space-y-3",children:[{date:"2024-01-01",amount:"$29.00",status:"Paid"},{date:"2023-12-01",amount:"$29.00",status:"Paid"},{date:"2023-11-01",amount:"$29.00",status:"Paid"}].map((i,n)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:new Date(i.date).toLocaleDateString()}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pro Plan"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:i.amount}),s.jsx("p",{className:"text-sm text-green-600",children:i.status})]})]},n))})]})]}),e==="notifications"&&s.jsxs("div",{className:"card p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Notification Preferences"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Email Notifications"}),s.jsx("div",{className:"space-y-3",children:[{id:"weekly-reports",label:"Weekly performance reports",checked:!0},{id:"link-alerts",label:"Link performance alerts",checked:!0},{id:"security-alerts",label:"Security alerts",checked:!0},{id:"product-updates",label:"Product updates and news",checked:!1}].map(i=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{htmlFor:i.id,className:"text-gray-700 dark:text-gray-300",children:i.label}),s.jsx("input",{id:i.id,type:"checkbox",defaultChecked:i.checked,className:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})]},i.id))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Push Notifications"}),s.jsx("div",{className:"space-y-3",children:[{id:"browser-notifications",label:"Browser notifications",checked:!1},{id:"mobile-notifications",label:"Mobile app notifications",checked:!0}].map(i=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{htmlFor:i.id,className:"text-gray-700 dark:text-gray-300",children:i.label}),s.jsx("input",{id:i.id,type:"checkbox",defaultChecked:i.checked,className:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})]},i.id))})]}),s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{className:"btn-primary",children:"Save Preferences"})})]})]})]})]})]})},Ex=()=>{const[t,e]=f.useState(""),[r,a]=f.useState("faq"),i=[{id:1,question:"How do I create a short link?",answer:'To create a short link, go to the Links page and click "Create Link". Enter your original URL, optionally customize the short URL, and click "Create Link".'},{id:2,question:"Can I customize my short URLs?",answer:"Yes! When creating a link, you can specify a custom alias instead of using our randomly generated one. Custom aliases must be unique and follow our naming guidelines."},{id:3,question:"How do I track link performance?",answer:"Visit the Analytics page to see detailed statistics about your links, including clicks, geographic data, device information, and more."},{id:4,question:"What is link filtering?",answer:"Link filtering allows you to control who can access your links based on criteria like geographic location, device type, or time of day."},{id:5,question:"How do I add a custom domain?",answer:`Go to the Domains page, click "Add Domain", enter your domain name, and follow the DNS setup instructions. We'll verify your domain automatically.`},{id:6,question:"Can I integrate with other tools?",answer:"Yes! We offer integrations with popular tools like Google Analytics, Slack, Zapier, and more. Check the Integrations page for available options."}],n={gettingStarted:{title:"Getting Started with Nanhi.Links API",content:[{title:"Authentication",description:"All API requests require authentication using an API key.",code:`// Include API key in headers
X-API-Key: your_api_key_here

// Or as query parameter
?api_key=your_api_key_here`},{title:"Base URL",description:"All API endpoints are relative to the base URL:",code:"https://api.nanhi.link/api"},{title:"Rate Limits",description:"API requests are limited to 100 requests per 15 minutes per IP address.",code:`// Rate limit headers in response
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1640995200`}]},endpoints:{title:"API Endpoints",content:[{title:"Create Short Link",description:"Create a new short link",method:"POST",endpoint:"/links",code:`curl -X POST https://api.nanhi.link/api/links \\
  -H "X-API-Key: your_api_key_here" \\
  -H "Content-Type: application/json" \\
  -d '{
    "url": "https://example.com/very-long-url",
    "title": "My Example Link",
    "custom_code": "my-link"
  }'`},{title:"Get Links",description:"Retrieve your links with pagination",method:"GET",endpoint:"/links",code:`curl -X GET "https://api.nanhi.link/api/links?page=1&limit=20" \\
  -H "X-API-Key: your_api_key_here"`},{title:"Get Link Analytics",description:"Retrieve detailed analytics for a specific link",method:"GET",endpoint:"/links/:id/analytics",code:`curl -X GET "https://api.nanhi.link/api/links/uuid-here/analytics?period=30d" \\
  -H "X-API-Key: your_api_key_here"`},{title:"Update Link",description:"Update an existing link",method:"PUT",endpoint:"/links/:id",code:`curl -X PUT https://api.nanhi.link/api/links/uuid-here \\
  -H "X-API-Key: your_api_key_here" \\
  -H "Content-Type: application/json" \\
  -d '{
    "title": "Updated Title",
    "is_active": false
  }'`},{title:"Delete Link",description:"Delete a link permanently",method:"DELETE",endpoint:"/links/:id",code:`curl -X DELETE https://api.nanhi.link/api/links/uuid-here \\
  -H "X-API-Key: your_api_key_here"`},{title:"Bulk Create Links",description:"Create multiple links in a single request (max 100)",method:"POST",endpoint:"/links/bulk",code:`curl -X POST https://api.nanhi.link/api/links/bulk \\
  -H "X-API-Key: your_api_key_here" \\
  -H "Content-Type: application/json" \\
  -d '{
    "links": [
      {
        "url": "https://example1.com",
        "title": "Link 1"
      },
      {
        "url": "https://example2.com", 
        "title": "Link 2"
      }
    ]
  }'`}]},sdks:{title:"SDKs & Libraries",content:[{title:"JavaScript/Node.js",description:"Use our JavaScript SDK for easy integration",code:`const NanhiLinks = require('nanhi-links-sdk');

const client = new NanhiLinks({
  apiKey: 'your_api_key_here',
  baseUrl: 'https://api.nanhi.link/api'
});

// Create a short link
const link = await client.links.create({
  url: 'https://example.com/very-long-url',
  title: 'My Example Link'
});

console.log(link.short_url); // https://nanhi.link/abc123`},{title:"Python",description:"Python SDK for server-side applications",code:`from nanhi_links import NanhiLinksClient

client = NanhiLinksClient(api_key='your_api_key_here')

# Create a short link
link = client.links.create(
    url='https://example.com/very-long-url',
    title='My Example Link'
)

print(link.short_url)  # https://nanhi.link/abc123`},{title:"PHP",description:"PHP SDK for web applications",code:`<?php
require_once 'vendor/autoload.php';

use NanhiLinks\\Client;

$client = new Client('your_api_key_here');

// Create a short link
$link = $client->links->create([
    'url' => 'https://example.com/very-long-url',
    'title' => 'My Example Link'
]);

echo $link->short_url; // https://nanhi.link/abc123
?>`}]},webhooks:{title:"Webhooks",content:[{title:"Webhook Events",description:"Configure webhooks to receive real-time notifications",code:`// Supported events:
- link.created: New link created
- link.clicked: Link was clicked  
- link.updated: Link was updated
- link.deleted: Link was deleted`},{title:"Webhook Payload",description:"Example webhook payload for link.clicked event",code:`{
  "event": "link.clicked",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "data": {
    "link": {
      "id": "uuid-here",
      "short_code": "abc123",
      "url": "https://example.com"
    },
    "click": {
      "country": "United States",
      "device": "Desktop", 
      "referrer": "Google"
    }
  }
}`}]},errors:{title:"Error Handling",content:[{title:"Error Response Format",description:"All errors follow a consistent format",code:`{
  "error": "Human-readable error message",
  "code": "MACHINE_READABLE_ERROR_CODE"
}`},{title:"Common Error Codes",description:"Standard error codes you may encounter",code:`MISSING_API_KEY: API key not provided
INVALID_API_KEY: API key is invalid or expired
RATE_LIMIT_EXCEEDED: Too many requests
MISSING_URL: Required URL parameter not provided
INVALID_URL: URL format is invalid
CODE_EXISTS: Custom short code already exists
LINK_NOT_FOUND: Requested link not found
INTERNAL_ERROR: Internal server error`},{title:"HTTP Status Codes",description:"Standard HTTP status codes used by the API",code:`200 OK: Request successful
201 Created: Resource created successfully
400 Bad Request: Invalid request parameters
401 Unauthorized: Authentication required or failed
404 Not Found: Resource not found
409 Conflict: Resource conflict (e.g., duplicate short code)
429 Too Many Requests: Rate limit exceeded
500 Internal Server Error: Server error`}]}},o=[{title:"Getting Started Guide",description:"Learn the basics of using Nanhi.Links",icon:Ur,link:"#"},{title:"API Documentation",description:"Complete API reference and examples",icon:ve,link:"/api/docs"},{title:"Video Tutorials",description:"Watch step-by-step video guides",icon:ft,link:"#"},{title:"Best Practices",description:"Tips for optimizing your link strategy",icon:Ur,link:"#"}],l=i.filter(u=>u.question.toLowerCase().includes(t.toLowerCase())||u.answer.toLowerCase().includes(t.toLowerCase())),c=u=>{navigator.clipboard.writeText(u)},d=()=>{const u=n[r];return u?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:u.title}),u.content.map((h,m)=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white flex items-center space-x-2",children:[h.method&&s.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded ${h.method==="GET"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":h.method==="POST"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":h.method==="PUT"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":h.method==="DELETE"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:h.method}),s.jsx("span",{children:h.title}),h.endpoint&&s.jsx("code",{className:"text-sm bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:h.endpoint})]})}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:h.description}),s.jsxs("div",{className:"relative",children:[s.jsx("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto text-sm",children:s.jsx("code",{children:h.code})}),s.jsx("button",{onClick:()=>c(h.code),className:"absolute top-2 right-2 p-2 bg-gray-800 hover:bg-gray-700 rounded text-gray-400 hover:text-white transition-colors",title:"Copy to clipboard",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]},m))]}):null};return s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Help Center"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Find answers to common questions and get support"})]}),s.jsx("div",{className:"card p-6 mb-8",children:s.jsxs("div",{className:"relative max-w-md mx-auto",children:[s.jsx($t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:t,onChange:u=>e(u.target.value),placeholder:"Search for help...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})}),s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"faq",label:"FAQ",icon:ha},{id:"gettingStarted",label:"API Getting Started",icon:mt},{id:"endpoints",label:"API Endpoints",icon:ve},{id:"sdks",label:"SDKs & Libraries",icon:Ur},{id:"webhooks",label:"Webhooks",icon:We},{id:"errors",label:"Error Handling",icon:ye}].map(u=>s.jsxs("button",{onClick:()=>a(u.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${r===u.id?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[s.jsx(u.icon,{className:"w-4 h-4"}),s.jsx("span",{children:u.label})]},u.id))})})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx("div",{className:"card p-6",children:r==="faq"?s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Frequently Asked Questions"}),s.jsx("div",{className:"space-y-4",children:l.map(u=>s.jsxs("details",{className:"group",children:[s.jsxs("summary",{className:"flex items-center justify-between cursor-pointer p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[s.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:u.question}),s.jsx(ha,{className:"w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform duration-200"})]}),s.jsx("div",{className:"mt-3 p-4 text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:u.answer})]},u.id))})]}):d()})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"card p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Need More Help?"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 text-left bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/30",children:[s.jsx(zg,{className:"w-5 h-5"}),s.jsx("span",{children:"Live Chat"})]}),s.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 text-left bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600",children:[s.jsx(Ol,{className:"w-5 h-5"}),s.jsx("span",{children:"Email Support"})]})]})]}),s.jsxs("div",{className:"card p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Resources"}),s.jsx("div",{className:"space-y-3",children:o.map((u,h)=>s.jsxs("a",{href:u.link,className:"flex items-center space-x-3 p-3 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx(u.icon,{className:"w-5 h-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:u.title}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:u.description})]})]},h))})]}),s.jsxs("div",{className:"card p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"System Status"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"All systems operational"})]}),s.jsx("a",{href:"/status",className:"text-sm text-purple-600 dark:text-purple-400 hover:underline mt-2 inline-block",children:"View status page"})]})]})]})]})},Lx=()=>{const[t,e]=f.useState([]),[r,a]=f.useState(!0),[i,n]=f.useState(!1),[o,l]=f.useState(""),[c,d]=f.useState(new Set),[u,h]=f.useState(null);f.useEffect(()=>{setTimeout(()=>{e([{id:"1",name:"Production API",key:"nl_live_abc123def456ghi789jkl012mno345pqr678stu901vwx234yz",created_at:"2024-01-15T10:30:00.000Z",last_used:"2024-01-20T14:22:00.000Z",usage_count:1247},{id:"2",name:"Development",key:"nl_test_xyz987wvu654tsr321qpo098nml765kji432hgf109edc876ba",created_at:"2024-01-10T09:15:00.000Z",last_used:"2024-01-19T16:45:00.000Z",usage_count:89}]),a(!1)},1e3)},[]);const m=async()=>{if(!o.trim()){W.error("Please enter a key name");return}const y={id:Date.now().toString(),name:o,key:`nl_live_${Math.random().toString(36).substring(2,15)}${Math.random().toString(36).substring(2,15)}${Math.random().toString(36).substring(2,15)}`,created_at:new Date().toISOString(),last_used:null,usage_count:0};e(p=>[y,...p]),l(""),n(!1),W.success("API key generated successfully")},g=async y=>{confirm("Are you sure you want to delete this API key? This action cannot be undone.")&&(e(p=>p.filter(j=>j.id!==y)),W.success("API key deleted"))},x=y=>{navigator.clipboard.writeText(y),W.success("API key copied to clipboard")},b=y=>{d(p=>{const j=new Set(p);return j.has(y)?j.delete(y):j.add(y),j})},v=async y=>{h(y),setTimeout(()=>{h(null),W.success("API key is working correctly")},2e3)},N=y=>y.length<=12?y:`${y.substring(0,12)}${"•".repeat(y.length-20)}${y.substring(y.length-8)}`;return r?s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-8"}),s.jsx("div",{className:"space-y-4",children:[1,2,3].map(y=>s.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"},y))})]})}):s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"API Management"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage your API keys and access the Nanhi.Links API"})]}),s.jsxs("button",{onClick:()=>n(!0),className:"btn-primary flex items-center space-x-2",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsx("span",{children:"Generate API Key"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"card p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Keys"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:t.length})]}),s.jsx(mt,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})]})}),s.jsx("div",{className:"card p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Requests"}),s.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:t.reduce((y,p)=>y+p.usage_count,0).toLocaleString()})]}),s.jsx(ve,{className:"w-8 h-8 text-green-600"})]})}),s.jsx("div",{className:"card p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Rate Limit"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:"1000/hr"})]}),s.jsx(xe,{className:"w-8 h-8 text-blue-600"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"card p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:s.jsx(Ur,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"API Documentation"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Complete guide to using the Nanhi.Links API"})]})]}),s.jsxs("a",{href:"/api/docs",target:"_blank",className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium",children:[s.jsx("span",{children:"View Documentation"}),s.jsx(ft,{className:"w-4 h-4"})]})]}),s.jsxs("div",{className:"card p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:s.jsx(ve,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"API Endpoint"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Base URL for all API requests"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-3 py-2 rounded text-sm font-mono",children:"https://api.nanhi.link/api"}),s.jsx("button",{onClick:()=>x("https://api.nanhi.link/api"),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(cr,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"card p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:s.jsx(mt,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Your API Keys"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and monitor your API keys"})]})]})}),t.length>0?s.jsx("div",{className:"space-y-4",children:t.map(y=>s.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:y.name}),s.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400 px-2 py-1 rounded-full",children:"Active"})]}),s.jsx("div",{className:"flex items-center space-x-4 mb-3",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("code",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-600 px-2 py-1 rounded font-mono",children:c.has(y.id)?y.key:N(y.key)}),s.jsx("button",{onClick:()=>b(y.id),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.has(y.id)?s.jsx(Je,{className:"w-4 h-4"}):s.jsx(be,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>x(y.key),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(cr,{className:"w-4 h-4"})})]})}),s.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{children:["Created ",new Date(y.created_at).toLocaleDateString()]}),s.jsxs("span",{children:[y.usage_count.toLocaleString()," requests"]}),y.last_used&&s.jsxs("span",{children:["Last used ",new Date(y.last_used).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>v(y.id),disabled:u===y.id,className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-600 hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-400 dark:hover:bg-blue-900/30 rounded-lg transition-colors duration-200 disabled:opacity-50",children:u===y.id?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 border border-blue-600 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Testing..."})]}):"Test"}),s.jsx("button",{onClick:()=>g(y.id),className:"p-2 text-red-400 hover:text-red-600",children:s.jsx(Ut,{className:"w-4 h-4"})})]})]})},y.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(mt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No API keys generated yet"}),s.jsx("button",{onClick:()=>n(!0),className:"btn-primary",children:"Generate Your First API Key"})]})]}),s.jsxs("div",{className:"card p-6 mt-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Start Example"}),s.jsx("div",{className:"bg-gray-900 rounded-lg p-4 overflow-x-auto",children:s.jsx("pre",{className:"text-green-400 text-sm",children:`curl -X POST https://api.nanhi.link/api/links \\
  -H "X-API-Key: your_api_key_here" \\
  -H "Content-Type: application/json" \\
  -d '{
    "url": "https://example.com/very-long-url",
    "title": "My Example Link"
  }'`})}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-2",children:["Replace ",s.jsx("code",{children:"your_api_key_here"})," with one of your API keys above."]})]}),i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Generate New API Key"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Key Name"}),s.jsx("input",{type:"text",value:o,onChange:y=>l(y.target.value),placeholder:"e.g., Production API, Development, Mobile App",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3 mb-4",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(ua,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 font-medium",children:"Important Security Notice"}),s.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:"Store your API key securely. It won't be shown again after creation."})]})]})}),s.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{n(!1),l("")},className:"btn-secondary",children:"Cancel"}),s.jsx("button",{onClick:m,className:"btn-primary",children:"Generate API Key"})]})]})})]})},Rx={async getUserLinks(t){try{const{data:e,error:r}=await R.from("links").select("*").eq("user_id",t).order("created_at",{ascending:!1});return r?(console.error("Error fetching user links:",r),[]):e||[]}catch(e){return console.error("Error in getUserLinks:",e),[]}},async getUserProjects(t){try{const{data:e,error:r}=await R.from("projects").select("*").eq("user_id",t).order("created_at",{ascending:!1});return r?(console.error("Error fetching user projects:",r),[]):e||[]}catch(e){return console.error("Error in getUserProjects:",e),[]}},async createLink(t){try{const{data:e,error:r}=await R.from("links").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("Error creating link:",e),e}},async updateLink(t,e){try{const{data:r,error:a}=await R.from("links").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(a)throw a;return r}catch(r){throw console.error("Error updating link:",r),r}},async deleteLink(t){try{const{error:e}=await R.from("links").delete().eq("id",t);if(e)throw e}catch(e){throw console.error("Error deleting link:",e),e}},async createProject(t){try{const{data:e,error:r}=await R.from("projects").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("Error creating project:",e),e}},async updateProject(t,e){try{const{data:r,error:a}=await R.from("projects").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(a)throw a;return r}catch(r){throw console.error("Error updating project:",r),r}},async deleteProject(t){try{const{error:e}=await R.from("projects").delete().eq("id",t);if(e)throw e}catch(e){throw console.error("Error deleting project:",e),e}},async getAnalytics(t){try{const{data:e,error:r}=await R.from("links").select("total_clicks, is_active").eq("user_id",t);if(r)throw r;const a=e.reduce((n,o)=>n+(o.total_clicks||0),0),i=e.filter(n=>n.is_active!==!1).length;return{totalClicks:a,activeLinks:i,averageCTR:"2.4%",averageSession:"1.2m"}}catch(e){return console.error("Error getting analytics:",e),{totalClicks:0,activeLinks:0,averageCTR:"0%",averageSession:"0m"}}}},Dx=()=>{const{user:t}=le(),[e,r]=f.useState(!0),[a,i]=f.useState(null),[n,o]=f.useState("7d");f.useEffect(()=>{(async()=>{if(t)try{r(!0);const d=await Rx.getAnalytics(t.id);i(d)}catch(d){console.error("Failed to load analytics:",d)}finally{r(!1)}})()},[t,n]);const l=[{id:"clicks",title:"Click Analytics",description:"Detailed click tracking and user behavior",icon:Lt,color:"purple"},{id:"performance",title:"Performance Report",description:"Link performance and conversion metrics",icon:Fe,color:"blue"},{id:"geographic",title:"Geographic Report",description:"Geographic distribution of clicks",icon:Q,color:"green"},{id:"devices",title:"Device Analytics",description:"Device and browser usage statistics",icon:hr,color:"orange"}];return e?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Reports"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Generate and download detailed analytics reports"})]}),s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("select",{value:n,onChange:c=>o(c.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"7d",children:"Last 7 days"}),s.jsx("option",{value:"30d",children:"Last 30 days"}),s.jsx("option",{value:"90d",children:"Last 90 days"}),s.jsx("option",{value:"1y",children:"Last year"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:s.jsx(be,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Clicks"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(a==null?void 0:a.totalClicks)||0})]})]})}),s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:s.jsx(Dl,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Links"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(a==null?void 0:a.activeLinks)||0})]})]})}),s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-lg",children:s.jsx(Fe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg. CTR"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(a==null?void 0:a.averageCTR)||"0%"})]})]})}),s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:s.jsx(ht,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg. Session"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(a==null?void 0:a.averageSession)||"0m"})]})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map((c,d)=>s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-3 bg-${c.color}-100 dark:bg-${c.color}-900/20 rounded-lg`,children:s.jsx(c.icon,{className:`w-6 h-6 text-${c.color}-600 dark:text-${c.color}-400`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:c.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.description})]})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",new Date().toLocaleDateString()]}),s.jsxs(S.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`bg-${c.color}-100 dark:bg-${c.color}-900/20 text-${c.color}-600 dark:text-${c.color}-400 px-4 py-2 rounded-lg text-sm font-medium hover:bg-${c.color}-200 dark:hover:bg-${c.color}-900/40 transition-colors flex items-center space-x-2`,children:[s.jsx(dr,{className:"w-4 h-4"}),s.jsx("span",{children:"Download"})]})]})]},c.id))}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Custom Report Builder"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date Range"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Za,{className:"w-4 h-4 text-gray-400"}),s.jsx("input",{type:"date",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx("span",{className:"text-gray-500",children:"to"}),s.jsx("input",{type:"date",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Metrics"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Qa,{className:"w-4 h-4 text-gray-400"}),s.jsxs("select",{className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{children:"All Metrics"}),s.jsx("option",{children:"Clicks Only"}),s.jsx("option",{children:"Geographic Data"}),s.jsx("option",{children:"Device Data"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Format"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{children:"CSV"}),s.jsx("option",{children:"PDF"}),s.jsx("option",{children:"Excel"}),s.jsx("option",{children:"JSON"})]})]})]}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[s.jsx(dr,{className:"w-4 h-4"}),s.jsx("span",{children:"Generate Custom Report"})]})]})]})},Ix=()=>{le();const[t,e]=f.useState([]);f.useState(!1);const[r,a]=f.useState(""),[i,n]=f.useState(!1);f.useEffect(()=>{e([{id:1,name:"Geographic Filter",type:"geographic",description:"Block traffic from specific countries",isActive:!0,rules:["Block: CN, RU","Allow: US, CA, UK"],created_at:new Date().toISOString()},{id:2,name:"Bot Protection",type:"security",description:"Filter out bot traffic and suspicious requests",isActive:!0,rules:["Block known bots","Rate limiting: 10/min"],created_at:new Date().toISOString()},{id:3,name:"Time-based Filter",type:"temporal",description:"Restrict access during specific hours",isActive:!1,rules:["Block: 2AM-6AM UTC","Weekend restrictions"],created_at:new Date().toISOString()}])},[]);const o=t.filter(h=>h.name.toLowerCase().includes(r.toLowerCase())||h.description.toLowerCase().includes(r.toLowerCase())),l=[{id:"geographic",name:"Geographic",icon:Q,color:"blue"},{id:"security",name:"Security",icon:ye,color:"red"},{id:"temporal",name:"Time-based",icon:ht,color:"green"},{id:"device",name:"Device",icon:hr,color:"purple"}],c=h=>l.find(m=>m.id===h)||l[0],d=h=>{e(t.map(m=>m.id===h?{...m,isActive:!m.isActive}:m)),O.success("Filter updated successfully")},u=h=>{confirm("Are you sure you want to delete this filter?")&&(e(t.filter(m=>m.id!==h)),O.success("Filter deleted successfully"))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Filters"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage traffic filtering and security rules"})]}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(!0),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsx("span",{children:"Create Filter"})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"relative",children:[s.jsx($t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search filters...",value:r,onChange:h=>a(h.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:l.map((h,m)=>s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-3 bg-${h.color}-100 dark:bg-${h.color}-900/20 rounded-lg`,children:s.jsx(h.icon,{className:`w-6 h-6 text-${h.color}-600 dark:text-${h.color}-400`})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:h.name}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.filter(g=>g.type===h.id).length})]})]})},h.id))}),s.jsx("div",{className:"space-y-4",children:o.length>0?o.map((h,m)=>{const g=c(h.type);return s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[s.jsx("div",{className:`p-3 bg-${g.color}-100 dark:bg-${g.color}-900/20 rounded-lg`,children:s.jsx(g.icon,{className:`w-6 h-6 text-${g.color}-600 dark:text-${g.color}-400`})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:h.name}),s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${h.isActive?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:h.isActive?s.jsxs(s.Fragment,{children:[s.jsx(be,{className:"w-3 h-3 mr-1"}),"Active"]}):s.jsxs(s.Fragment,{children:[s.jsx(Je,{className:"w-3 h-3 mr-1"}),"Inactive"]})}),s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-${g.color}-100 text-${g.color}-800 dark:bg-${g.color}-900/20 dark:text-${g.color}-400`,children:g.name})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:h.description}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rules:"}),h.rules.map((x,b)=>s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 ml-2",children:["• ",x]},b))]}),s.jsxs("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400",children:["Created ",new Date(h.created_at).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(S.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>d(h.id),className:`p-2 rounded-lg transition-colors ${h.isActive?"text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20":"text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:h.isActive?s.jsx(be,{className:"w-4 h-4"}):s.jsx(Je,{className:"w-4 h-4"})}),s.jsx(S.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:s.jsx(Jg,{className:"w-4 h-4"})}),s.jsx(S.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u(h.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:s.jsx(Ut,{className:"w-4 h-4"})})]})]})},h.id)}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Qa,{className:"w-12 h-12 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:r?"No filters found":"No filters created yet"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:r?"Try adjusting your search criteria":"Create your first filter to manage traffic and security"}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(!0),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2 mx-auto",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsx("span",{children:"Create Filter"})]})]})})]})},Ox=({isOpen:t,onClose:e})=>{const{register:r,handleSubmit:a,formState:{errors:i},reset:n}=jc();f.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),f.useEffect(()=>{const u=h=>{h.key==="Escape"&&t&&l()};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[t]);const o=u=>{W.success("Domain added successfully! Please configure DNS.",{duration:4e3,style:{background:"linear-gradient(135deg, #10B981, #059669)",color:"white",fontWeight:"600",borderRadius:"12px",padding:"16px 24px"}}),n(),e()},l=()=>{n(),e()},c=u=>{u.target===u.currentTarget&&l()},d=s.jsx(br,{mode:"wait",children:t&&s.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center p-4",children:[s.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeOut"},className:"absolute inset-0 bg-black/60 backdrop-blur-md",onClick:c}),s.jsxs(S.div,{initial:{opacity:0,scale:.9,y:20,rotateX:-15},animate:{opacity:1,scale:1,y:0,rotateX:0},exit:{opacity:0,scale:.95,y:10,rotateX:5},transition:{type:"spring",damping:25,stiffness:300,duration:.5},className:"relative w-full max-w-2xl mx-auto bg-white dark:bg-gray-900 rounded-3xl shadow-2xl overflow-hidden",style:{boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.1)"},children:[s.jsxs("div",{className:"relative bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700 px-8 py-6",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/20 to-blue-600/20 backdrop-blur-sm"}),s.jsxs("div",{className:"relative flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(S.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring",stiffness:200},className:"p-3 bg-white/20 backdrop-blur-sm rounded-2xl",children:s.jsx(Q,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx(S.h3,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"text-2xl font-bold text-white",children:"Add Custom Domain"}),s.jsx(S.p,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.15},className:"text-white/80 text-sm",children:"Brand your links with your own domain"})]})]}),s.jsx(S.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},onClick:l,className:"p-2 text-white/80 hover:text-white hover:bg-white/20 rounded-xl transition-all duration-200",type:"button",children:s.jsx(ms,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"p-8 max-h-[70vh] overflow-y-auto modal-scrollbar",children:s.jsxs("form",{onSubmit:a(o),className:"space-y-6",children:[s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Domain Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{...r("domain",{required:"Domain name is required",pattern:{value:/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/,message:"Please enter a valid domain name"}}),type:"text",placeholder:"links.yourdomain.com",className:"w-full px-6 py-4 border-2 border-gray-200 dark:border-gray-700 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:border-purple-500 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 transition-all duration-300 text-lg font-medium"}),s.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-6",children:s.jsx(Q,{className:"w-5 h-5 text-gray-400"})})]}),i.domain&&s.jsx(S.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium",children:i.domain.message}),s.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Enter your custom domain (e.g., links.yourdomain.com)"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-5",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-xl",children:s.jsx(Q,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-bold text-blue-900 dark:text-blue-100 mb-2",children:"Domain Requirements"}),s.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1.5",children:[s.jsxs("li",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),s.jsx("span",{children:"You must own the domain or have DNS access"})]}),s.jsxs("li",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),s.jsx("span",{children:"Subdomains are recommended (e.g., links.yourdomain.com)"})]}),s.jsxs("li",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),s.jsx("span",{children:"SSL certificate will be automatically provisioned"})]})]})]})]})}),s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-5",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-xl",children:s.jsx(Ug,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-bold text-amber-900 dark:text-amber-100 mb-2",children:"DNS Configuration"}),s.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200 leading-relaxed",children:["After adding your domain, configure DNS by adding a CNAME record pointing to"," ",s.jsx("code",{className:"bg-amber-100 dark:bg-amber-800 px-2 py-1 rounded-lg font-mono text-xs",children:"cname.sureto.click"})]})]})]})}),s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-gradient-to-r from-emerald-50 to-green-50 dark:from-emerald-900/20 dark:to-green-900/20 border border-emerald-200 dark:border-emerald-800 rounded-2xl p-5",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/40 rounded-xl",children:s.jsx(ef,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-bold text-emerald-900 dark:text-emerald-100 mb-2",children:"Benefits"}),s.jsxs("ul",{className:"text-sm text-emerald-800 dark:text-emerald-200 space-y-1.5",children:[s.jsxs("li",{className:"flex items-center space-x-2",children:[s.jsx(xe,{className:"w-3.5 h-3.5 text-emerald-500"}),s.jsx("span",{children:"Branded short links with your domain"})]}),s.jsxs("li",{className:"flex items-center space-x-2",children:[s.jsx(xe,{className:"w-3.5 h-3.5 text-emerald-500"}),s.jsx("span",{children:"Increased trust and click-through rates"})]}),s.jsxs("li",{className:"flex items-center space-x-2",children:[s.jsx(xe,{className:"w-3.5 h-3.5 text-emerald-500"}),s.jsx("span",{children:"Professional appearance for your links"})]})]})]})]})}),s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-800 rounded-2xl p-5",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-xl",children:s.jsx(xe,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-bold text-purple-900 dark:text-purple-100 mb-2",children:"Advanced Features"}),s.jsxs("ul",{className:"text-sm text-purple-800 dark:text-purple-200 space-y-1.5",children:[s.jsxs("li",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),s.jsx("span",{children:"Custom SSL certificates supported"})]}),s.jsxs("li",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),s.jsx("span",{children:"Wildcard subdomain support"})]}),s.jsxs("li",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),s.jsx("span",{children:"Advanced analytics and tracking"})]}),s.jsxs("li",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),s.jsx("span",{children:"Custom redirect pages"})]})]})]})]})})]}),s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"button",onClick:l,className:"px-8 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-2xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 font-semibold",children:"Cancel"}),s.jsxs(S.button,{whileHover:{scale:1.02,y:-1},whileTap:{scale:.98},type:"submit",className:"px-8 py-3 bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 hover:from-purple-700 hover:via-blue-700 hover:to-indigo-700 text-white rounded-2xl font-bold shadow-xl hover:shadow-2xl transition-all duration-300 relative overflow-hidden",children:[s.jsx("span",{className:"relative z-10",children:"Add Domain"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"})]})]})]})})]})]})});return typeof document<"u"?qn.createPortal(d,document.body):null},Mx=()=>{le();const[t,e]=f.useState([]);f.useState(!1);const[r,a]=f.useState(""),[i,n]=f.useState(!1);f.useEffect(()=>{e([{id:1,domain:"nanhi.link",status:"active",isDefault:!0,ssl:!0,verified:!0,clicks:15420,created_at:new Date().toISOString()},{id:2,domain:"short.example.com",status:"pending",isDefault:!1,ssl:!0,verified:!1,clicks:0,created_at:new Date().toISOString()},{id:3,domain:"link.mysite.com",status:"active",isDefault:!1,ssl:!0,verified:!0,clicks:2340,created_at:new Date().toISOString()}])},[]);const o=t.filter(g=>g.domain.toLowerCase().includes(r.toLowerCase())),l=g=>{switch(g){case"active":return{icon:xe,color:"green",text:"Active"};case"pending":return{icon:ua,color:"yellow",text:"Pending"};case"inactive":return{icon:Bl,color:"red",text:"Inactive"};default:return{icon:ua,color:"gray",text:"Unknown"}}},c=async g=>{try{await navigator.clipboard.writeText(g),O.success("Domain copied to clipboard!")}catch{O.error("Failed to copy")}},d=g=>{e(t.map(x=>({...x,isDefault:x.id===g}))),O.success("Default domain updated")},u=g=>{const x=t.find(b=>b.id===g);if(x!=null&&x.isDefault){O.error("Cannot delete the default domain");return}confirm("Are you sure you want to delete this domain?")&&(e(t.filter(b=>b.id!==g)),O.success("Domain deleted successfully"))},h=g=>{O.info("Domain settings opened")},m=g=>{window.open(`https://${g}`,"_blank")};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Domains"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your custom domains and SSL certificates"})]}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(!0),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2 cursor-pointer",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Domain"})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"relative",children:[s.jsx($t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search domains...",value:r,onChange:g=>a(g.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:s.jsx(Q,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Domains"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.length})]})]})}),s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-lg",children:s.jsx(xe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Domains"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.filter(g=>g.status==="active").length})]})]})}),s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:s.jsx(ye,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"SSL Enabled"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.filter(g=>g.ssl).length})]})]})})]}),s.jsx("div",{className:"space-y-4",children:o.length>0?o.map((g,x)=>{const b=l(g.status);return s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:s.jsx(Q,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("button",{onClick:()=>m(g.domain),className:"font-semibold text-gray-900 dark:text-white text-lg hover:text-blue-600 dark:hover:text-blue-400 transition-colors cursor-pointer",children:g.domain}),g.isDefault&&s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:"Default"}),s.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${b.color==="green"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":b.color==="yellow"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":b.color==="red"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:[s.jsx(b.icon,{className:"w-3 h-3 mr-1"}),b.text]}),g.ssl&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:[s.jsx(ye,{className:"w-3 h-3 mr-1"}),"SSL"]}),g.verified&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:[s.jsx(xe,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),s.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ft,{className:"w-4 h-4"}),s.jsxs("span",{children:[g.clicks.toLocaleString()," clicks"]})]}),s.jsxs("div",{children:["Added ",new Date(g.created_at).toLocaleDateString()]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(S.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c(g.domain),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors cursor-pointer",title:"Copy domain",children:s.jsx(cr,{className:"w-4 h-4"})}),!g.isDefault&&s.jsx(S.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d(g.id),className:"px-3 py-1 text-xs font-medium text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg transition-colors cursor-pointer",title:"Set as default domain",children:"Set Default"}),s.jsx(S.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>h(g.id),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors cursor-pointer",title:"Domain settings",children:s.jsx(gt,{className:"w-4 h-4"})}),!g.isDefault&&s.jsx(S.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u(g.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors cursor-pointer",title:"Delete domain",children:s.jsx(Ut,{className:"w-4 h-4"})})]})]})},g.id)}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Q,{className:"w-12 h-12 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:r?"No domains found":"No custom domains added yet"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:r?"Try adjusting your search criteria":"Add your first custom domain to brand your short links"}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(!0),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2 mx-auto cursor-pointer",children:[s.jsx(Re,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Domain"})]})]})}),s.jsx(Ox,{isOpen:i,onClose:()=>n(!1)})]})},$x=()=>{le();const[t,e]=f.useState([]);f.useState(!1);const[r,a]=f.useState(""),[i,n]=f.useState("all");f.useEffect(()=>{e([{id:1,name:"Google Analytics",description:"Track link clicks and user behavior with Google Analytics",category:"analytics",icon:Lt,color:"orange",isConnected:!0,isPopular:!0,features:["Click tracking","User behavior","Conversion tracking"]},{id:2,name:"Slack",description:"Send link notifications and reports to Slack channels",category:"communication",icon:Wg,color:"purple",isConnected:!1,isPopular:!0,features:["Real-time notifications","Daily reports","Team collaboration"]},{id:3,name:"Zapier",description:"Connect with 3000+ apps through Zapier automation",category:"automation",icon:We,color:"yellow",isConnected:!0,isPopular:!0,features:["Workflow automation","3000+ app connections","Custom triggers"]},{id:4,name:"Mailchimp",description:"Integrate with email marketing campaigns",category:"marketing",icon:Ol,color:"blue",isConnected:!1,isPopular:!1,features:["Email campaigns","Subscriber tracking","A/B testing"]},{id:5,name:"Facebook Pixel",description:"Track conversions and optimize Facebook ads",category:"analytics",icon:Qg,color:"blue",isConnected:!1,isPopular:!0,features:["Conversion tracking","Audience insights","Ad optimization"]},{id:6,name:"Webhook",description:"Send real-time data to any endpoint",category:"developer",icon:Q,color:"green",isConnected:!0,isPopular:!1,features:["Real-time data","Custom endpoints","Event triggers"]}])},[]);const o=[{id:"all",name:"All",count:t.length},{id:"analytics",name:"Analytics",count:t.filter(d=>d.category==="analytics").length},{id:"communication",name:"Communication",count:t.filter(d=>d.category==="communication").length},{id:"automation",name:"Automation",count:t.filter(d=>d.category==="automation").length},{id:"marketing",name:"Marketing",count:t.filter(d=>d.category==="marketing").length},{id:"developer",name:"Developer",count:t.filter(d=>d.category==="developer").length}],l=t.filter(d=>{const u=d.name.toLowerCase().includes(r.toLowerCase())||d.description.toLowerCase().includes(r.toLowerCase()),h=i==="all"||d.category===i;return u&&h}),c=d=>{e(t.map(h=>h.id===d?{...h,isConnected:!h.isConnected}:h));const u=t.find(h=>h.id===d);O.success(`${u.name} ${u.isConnected?"disconnected":"connected"} successfully`)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Integrations"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Connect with your favorite tools and services"})]}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[s.jsx(ft,{className:"w-4 h-4"}),s.jsx("span",{children:"Browse More"})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx($t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search integrations...",value:r,onChange:d=>a(d.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsx("div",{className:"flex items-center space-x-2 overflow-x-auto",children:o.map(d=>s.jsxs("button",{onClick:()=>n(d.id),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${i===d.id?"bg-purple-100 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[d.name," (",d.count,")"]},d.id))})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:s.jsx(ma,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Integrations"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.length})]})]})}),s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-lg",children:s.jsx(xe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Connected"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.filter(d=>d.isConnected).length})]})]})}),s.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:s.jsx(We,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Popular"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.filter(d=>d.isPopular).length})]})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.length>0?l.map((d,u)=>s.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-3 bg-${d.color}-100 dark:bg-${d.color}-900/20 rounded-lg`,children:s.jsx(d.icon,{className:`w-6 h-6 text-${d.color}-600 dark:text-${d.color}-400`})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:d.name}),d.isPopular&&s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",children:"Popular"})]}),s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${d.isConnected?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:d.isConnected?s.jsxs(s.Fragment,{children:[s.jsx(xe,{className:"w-3 h-3 mr-1"}),"Connected"]}):s.jsxs(s.Fragment,{children:[s.jsx(Bl,{className:"w-3 h-3 mr-1"}),"Not Connected"]})})]})]})}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:d.description}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Features:"}),d.features.map((h,m)=>s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 ml-2",children:["• ",h]},m))]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(S.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(d.id),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${d.isConnected?"bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/40":"bg-purple-100 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 hover:bg-purple-200 dark:hover:bg-purple-900/40"}`,children:d.isConnected?"Disconnect":"Connect"}),d.isConnected&&s.jsx(S.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:s.jsx(gt,{className:"w-4 h-4"})})]})]},d.id)):s.jsxs("div",{className:"col-span-full text-center py-12",children:[s.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(ma,{className:"w-12 h-12 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:r||i!=="all"?"No integrations found":"No integrations available"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:r||i!=="all"?"Try adjusting your search or filter criteria":"Browse our integration marketplace to connect your favorite tools"}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2 mx-auto",children:[s.jsx(ft,{className:"w-4 h-4"}),s.jsx("span",{children:"Browse Integrations"})]})]})})]})},Ux=()=>{var b;const{user:t}=le(),{currentTheme:e,setTheme:r,themes:a}=uo(),[i,n]=f.useState("profile"),[o,l]=f.useState(!1),[c,d]=f.useState({name:((b=t==null?void 0:t.user_metadata)==null?void 0:b.full_name)||"",email:(t==null?void 0:t.email)||"",currentPassword:"",newPassword:"",confirmPassword:""}),u=[{id:"profile",name:"Profile",icon:ur},{id:"notifications",name:"Notifications",icon:Ya},{id:"security",name:"Security",icon:ye},{id:"appearance",name:"Appearance",icon:$l},{id:"api",name:"API Keys",icon:mt},{id:"data",name:"Data & Privacy",icon:dr}],h=v=>{d({...c,[v.target.name]:v.target.value})},m=()=>{O.success("Profile updated successfully")},g=()=>{if(c.newPassword!==c.confirmPassword){O.error("Passwords do not match");return}O.success("Password updated successfully"),d({...c,currentPassword:"",newPassword:"",confirmPassword:""})},x=()=>{switch(i){case"profile":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Profile Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),s.jsx("input",{type:"text",name:"name",value:c.name,onChange:h,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",name:"email",value:c.email,onChange:h,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:m,className:"mt-4 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[s.jsx(Zg,{className:"w-4 h-4"}),s.jsx("span",{children:"Save Changes"})]})]})});case"security":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Change Password"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:o?"text":"password",name:"currentPassword",value:c.currentPassword,onChange:h,className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o?s.jsx(Je,{className:"w-5 h-5"}):s.jsx(be,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),s.jsx("input",{type:o?"text":"password",name:"newPassword",value:c.newPassword,onChange:h,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),s.jsx("input",{type:o?"text":"password",name:"confirmPassword",value:c.confirmPassword,onChange:h,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,className:"mt-4 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[s.jsx(ye,{className:"w-4 h-4"}),s.jsx("span",{children:"Update Password"})]})]})});case"appearance":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Theme Selection"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a&&Object.entries(a).map(([v,N])=>{var w,C,A,E;const y=((C=(w=N==null?void 0:N.colors)==null?void 0:w.brand)==null?void 0:C.primary)||((A=N==null?void 0:N.colors)==null?void 0:A.primary)||"#8B5CF6",p=((E=N==null?void 0:N.colors)==null?void 0:E.brand)||(N==null?void 0:N.colors)||{},j=Object.values(p).slice(0,4);return s.jsxs(S.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r(v),className:`p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 ${e===v?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-purple-300"}`,children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg",style:{backgroundColor:y}}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:(N==null?void 0:N.name)||"Custom Theme"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:(N==null?void 0:N.description)||"Custom color scheme"})]})]}),s.jsx("div",{className:"flex space-x-2",children:j.length>0?j.map((T,I)=>s.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:T}},I)):["#8B5CF6","#3B82F6","#10B981","#F59E0B"].map((T,I)=>s.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:T}},I))})]},v)})})]})});case"notifications":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Notification Preferences"}),s.jsx("div",{className:"space-y-4",children:[{id:"email_reports",label:"Email Reports",description:"Receive weekly analytics reports"},{id:"link_clicks",label:"Link Clicks",description:"Get notified when links are clicked"},{id:"security_alerts",label:"Security Alerts",description:"Important security notifications"},{id:"product_updates",label:"Product Updates",description:"New features and improvements"}].map(v=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:v.label}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:v.description})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]},v.id))})]})});case"api":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"API Keys"}),s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-4 mb-6",children:s.jsx("p",{className:"text-yellow-800 dark:text-yellow-200 text-sm",children:"API keys provide access to your account data. Keep them secure and never share them publicly."})}),s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Production API Key"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Full access to your account"}),s.jsx("code",{className:"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded mt-2 inline-block",children:"nl_prod_••••••••••••••••"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:"px-3 py-1 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:"Regenerate"}),s.jsx("button",{className:"px-3 py-1 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:"Revoke"})]})]})})}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[s.jsx(mt,{className:"w-4 h-4"}),s.jsx("span",{children:"Generate New Key"})]})]})});case"data":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Data Export & Privacy"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Export Your Data"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Download all your account data including links, analytics, and settings."}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-200 dark:hover:bg-blue-900/40 transition-colors flex items-center space-x-2",children:[s.jsx(dr,{className:"w-4 h-4"}),s.jsx("span",{children:"Export Data"})]})]}),s.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:[s.jsx("h4",{className:"font-medium text-red-900 dark:text-red-200 mb-2",children:"Delete Account"}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),s.jsxs(S.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2",children:[s.jsx(Ut,{className:"w-4 h-4"}),s.jsx("span",{children:"Delete Account"})]})]})]})]})});default:return null}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Settings"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your account preferences and configuration"})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[s.jsx("div",{className:"lg:w-64",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-4",children:s.jsx("nav",{className:"space-y-2",children:u.map(v=>s.jsxs("button",{onClick:()=>n(v.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-all duration-200 ${i===v.id?"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx(v.icon,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:v.name})]},v.id))})})}),s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:x()})})]})]})};function Bx(){return s.jsx(bu,{children:s.jsx(lo,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[s.jsxs(bd,{children:[s.jsx(ee,{path:"/login",element:s.jsx(af,{})}),s.jsx(ee,{path:"/register",element:s.jsx(nf,{})}),s.jsx(ee,{path:"/",element:s.jsx(ce,{children:s.jsx(ue,{children:s.jsx(Fn,{})})})}),s.jsx(ee,{path:"/dashboard",element:s.jsx(ce,{children:s.jsx(ue,{children:s.jsx(Fn,{})})})}),s.jsx(ee,{path:"/links",element:s.jsx(ce,{children:s.jsx(ue,{children:s.jsx(Tx,{})})})}),s.jsx(ee,{path:"/analytics",element:s.jsx(ce,{children:s.jsx(ue,{children:s.jsx(Px,{})})})}),s.jsx(ee,{path:"/reports",element:s.jsx(ce,{children:s.jsx(ue,{children:s.jsx(Dx,{})})})}),s.jsx(ee,{path:"/filters",element:s.jsx(ce,{children:s.jsx(ue,{children:s.jsx(Ix,{})})})}),s.jsx(ee,{path:"/domains",element:s.jsx(ce,{children:s.jsx(ue,{children:s.jsx(Mx,{})})})}),s.jsx(ee,{path:"/integrations",element:s.jsx(ce,{children:s.jsx(ue,{children:s.jsx($x,{})})})}),s.jsx(ee,{path:"/api",element:s.jsx(ce,{children:s.jsx(ue,{children:s.jsx(Lx,{})})})}),s.jsx(ee,{path:"/account",element:s.jsx(ce,{children:s.jsx(ue,{children:s.jsx(Ax,{})})})}),s.jsx(ee,{path:"/help",element:s.jsx(ce,{children:s.jsx(ue,{children:s.jsx(Ex,{})})})}),s.jsx(ee,{path:"/settings",element:s.jsx(ce,{children:s.jsx(ue,{children:s.jsx(Ux,{})})})}),s.jsx(ee,{path:"*",element:s.jsx(to,{to:"/",replace:!0})})]}),s.jsx(no,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})})})}const Vx={async createLink(t){try{const{data:{user:e}}=await R.auth.getUser();if(!e)throw new Error("User not authenticated");t.short_code||(t.short_code=this.generateShortCode()),!t.destination_url&&t.original_url&&(t.destination_url=t.original_url);const{data:r,error:a}=await R.from("links").insert({...t,user_id:e.id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(a)throw a;return r}catch(e){throw console.error("Error creating link:",e),e}},async getLinks(){try{const{data:{user:t}}=await R.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:e,error:r}=await R.from("links").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(r)throw r;return e||[]}catch(t){throw console.error("Error fetching links:",t),t}},async getLinkById(t){try{const{data:e,error:r}=await R.from("links").select("*").eq("id",t).single();if(r)throw r;return e}catch(e){throw console.error("Error fetching link:",e),e}},async getLinkByShortCode(t){try{const{data:e,error:r}=await R.from("links").select("*").eq("short_code",t).eq("is_active",!0).single();if(r)throw r;return e}catch(e){throw console.error("Error fetching link by short code:",e),e}},async updateLink(t,e){try{const{data:{user:r}}=await R.auth.getUser();if(!r)throw new Error("User not authenticated");e.original_url&&!e.destination_url&&(e.destination_url=e.original_url);const{data:a,error:i}=await R.from("links").update({...e,updated_at:new Date().toISOString()}).eq("id",t).eq("user_id",r.id).select().single();if(i)throw i;return a}catch(r){throw console.error("Error updating link:",r),r}},async deleteLink(t){try{const{data:{user:e}}=await R.auth.getUser();if(!e)throw new Error("User not authenticated");const{error:r}=await R.from("links").delete().eq("id",t).eq("user_id",e.id);if(r)throw r;return!0}catch(e){throw console.error("Error deleting link:",e),e}},async recordClick(t,e){try{const{error:r}=await R.from("clicks").insert({link_id:t,...e,clicked_at:new Date().toISOString()});if(r)throw r;return!0}catch(r){throw console.error("Error recording click:",r),r}},async getLinkAnalytics(t){try{const{data:{user:e}}=await R.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:r}=await R.from("links").select("id").eq("id",t).eq("user_id",e.id).single();if(!r)throw new Error("Link not found or access denied");const{data:a,error:i}=await R.from("clicks").select("*").eq("link_id",t).order("clicked_at",{ascending:!1});if(i)throw i;return a||[]}catch(e){throw console.error("Error fetching analytics:",e),e}},generateShortCode(t=6){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let r="";for(let a=0;a<t;a++)r+=e.charAt(Math.floor(Math.random()*e.length));return r},async isShortCodeAvailable(t){try{const{data:e,error:r}=await R.from("links").select("id").eq("short_code",t).single();if(r&&r.code==="PGRST116")return!0;if(r)throw r;return!1}catch(e){return console.error("Error checking short code availability:",e),!1}},async getDashboardStats(){try{const{data:{user:t}}=await R.auth.getUser();if(!t)throw new Error("User not authenticated");const{count:e}=await R.from("links").select("*",{count:"exact",head:!0}).eq("user_id",t.id),{data:r}=await R.from("links").select("total_clicks").eq("user_id",t.id),a=(r==null?void 0:r.reduce((l,c)=>l+(c.total_clicks||0),0))||0,{count:i}=await R.from("links").select("*",{count:"exact",head:!0}).eq("user_id",t.id).eq("is_active",!0),n=new Date;n.setDate(n.getDate()-30);const{count:o}=await R.from("clicks").select("*",{count:"exact",head:!0}).gte("clicked_at",n.toISOString()).in("link_id",await R.from("links").select("id").eq("user_id",t.id).then(({data:l})=>(l==null?void 0:l.map(c=>c.id))||[]));return{totalLinks:e||0,totalClicks:a||0,activeLinks:i||0,recentClicks:o||0}}catch(t){return console.error("Error fetching dashboard stats:",t),{totalLinks:0,totalClicks:0,activeLinks:0,recentClicks:0}}}},Fx={async generateTrackingScripts(t){var e,r;try{const{data:{user:a}}=await R.auth.getUser();if(!a)return"";const{data:i,error:n}=await R.from("user_integrations").select("integration_type, config").eq("user_id",a.id).eq("is_active",!0);if(n)throw n;let o="";for(const l of i||[])switch(l.integration_type){case"google_analytics":(e=l.config)!=null&&e.measurement_id&&(o+=this.generateGAScript(l.config.measurement_id,t));break;case"facebook_pixel":(r=l.config)!=null&&r.pixel_id&&(o+=this.generateFBPixelScript(l.config.pixel_id,t));break}return o}catch(a){return console.error("Error generating tracking scripts:",a),""}},generateGAScript(t,e){return`
      <!-- Google Analytics 4 -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=${t}"><\/script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '${t}');
        
        // Track link click event
        gtag('event', 'link_click', {
          'custom_parameter': 'nanhi_link',
          'link_id': '${e}',
          'event_category': 'engagement',
          'event_label': 'short_link_redirect'
        });
      <\/script>
    `},generateFBPixelScript(t,e){return`
      <!-- Facebook Pixel -->
      <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        
        fbq('init', '${t}');
        fbq('track', 'PageView');
        
        // Track custom event for link click
        fbq('trackCustom', 'LinkClick', {
          link_id: '${e}',
          source: 'nanhi_link'
        });
      <\/script>
      <noscript>
        <img height="1" width="1" style="display:none" 
             src="https://www.facebook.com/tr?id=${t}&ev=PageView&noscript=1" />
      </noscript>
    `},async sendWebhookNotification(t,e){try{const{data:{user:r}}=await R.auth.getUser();if(!r)return;const{data:a,error:i}=await R.from("user_integrations").select("config").eq("user_id",r.id).eq("integration_type","webhooks").eq("is_active",!0);if(i)throw i;for(const n of a||[]){const{webhook_url:o,secret:l}=n.config||{};if(!o)continue;const c={event:"link_click",link_id:t,timestamp:new Date().toISOString(),data:e},d={"Content-Type":"application/json","User-Agent":"Nanhi.Link-Webhook/1.0"};if(l){const u=await this.generateWebhookSignature(JSON.stringify(c),l);d["X-Nanhi-Signature"]=u}try{await fetch(o,{method:"POST",headers:d,body:JSON.stringify(c)})}catch(u){console.error("Webhook delivery failed:",u)}}}catch(r){console.error("Error sending webhook notifications:",r)}},async generateWebhookSignature(t,e){const r=new TextEncoder,a=await crypto.subtle.importKey("raw",r.encode(e),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),i=await crypto.subtle.sign("HMAC",a,r.encode(t));return"sha256="+Array.from(new Uint8Array(i)).map(n=>n.toString(16).padStart(2,"0")).join("")}},qx={async getUserClicks(){try{const{data:{user:t}}=await R.auth.getUser();if(!t)throw new Error("Not authenticated");const{data:e,error:r}=await R.from("clicks").select(`
          *,
          links!inner(user_id)
        `).eq("links.user_id",t.id).order("created_at",{ascending:!1});if(r)throw r;return e||[]}catch(t){throw console.error("Error fetching user clicks:",t),t}},async getLinkClicks(t){try{const{data:e,error:r}=await R.from("clicks").select("*").eq("link_id",t).order("created_at",{ascending:!1});if(r)throw r;return e||[]}catch(e){throw console.error("Error fetching link clicks:",e),e}},async recordClick(t,e={}){try{const{data:r,error:a}=await R.from("clicks").insert({link_id:t,ip_address:e.ip_address||null,user_agent:e.user_agent||null,referer:e.referer||null,country:e.country||null,city:e.city||null,device:e.device||null,browser:e.browser||null,os:e.os||null}).select().single();if(a)throw a;return Fx.sendWebhookNotification(t,{...e,click_id:r.id,timestamp:r.created_at}).catch(i=>{console.error("Webhook notification failed:",i)}),r}catch(r){throw console.error("Error recording click:",r),r}},async getClickAnalytics(t,e="7d"){try{let r=new Date;switch(e){case"24h":r.setHours(r.getHours()-24);break;case"7d":r.setDate(r.getDate()-7);break;case"30d":r.setDate(r.getDate()-30);break;case"90d":r.setDate(r.getDate()-90);break;default:r.setDate(r.getDate()-7)}const{data:a,error:i}=await R.from("clicks").select("*").eq("link_id",t).gte("created_at",r.toISOString()).order("created_at",{ascending:!1});if(i)throw i;return a||[]}catch(r){throw console.error("Error fetching click analytics:",r),r}}},Hx=f.createContext({}),zx=({children:t})=>{const[e,r]=f.useState([]),[a,i]=f.useState([]),[n,o]=f.useState(!0);f.useEffect(()=>{(async()=>{try{o(!0);const[d,u]=await Promise.all([Vx.getUserLinks().catch(()=>[]),qx.getUserClicks().catch(()=>[])]);r(d||[]),i(u||[])}catch(d){console.error("Error fetching data:",d),r([]),i([])}finally{o(!1)}})()},[]);const l={links:e||[],clicks:a||[],setLinks:r,setClicks:i,loading:n,setLoading:o};return s.jsx(Hx.Provider,{value:l,children:t})};zs.createRoot(document.getElementById("root")).render(s.jsx(ja.StrictMode,{children:s.jsx(Sd,{children:s.jsx(lo,{children:s.jsxs(zx,{children:[s.jsx(Bx,{}),s.jsx(no,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})})})}));
